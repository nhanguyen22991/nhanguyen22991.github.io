"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[5922],{82908:(j,A,r)=>{r.d(A,{P3:()=>F,Io:()=>Y});var S=r(80529),u=r(88001),b=r(50494),C=r(54004),J=r(99251),e=r(97582),o=r(87067),n=r(43429);class B{}(0,e.gn)([(0,o.C)()],B.prototype,"status",void 0),(0,e.gn)([(0,n.D)(()=>P),(0,o.C)()],B.prototype,"data",void 0),(0,e.gn)([(0,o.C)()],B.prototype,"objectError",void 0),(0,e.gn)([(0,o.C)()],B.prototype,"success",void 0);class P{}(0,e.gn)([(0,n.D)(()=>t),(0,o.C)()],P.prototype,"bookingContact",void 0);class t{}(0,e.gn)([(0,o.C)()],t.prototype,"email",void 0),(0,e.gn)([(0,o.C)()],t.prototype,"name",void 0),(0,e.gn)([(0,o.C)()],t.prototype,"phone",void 0);class U{}(0,e.gn)([(0,o.C)()],U.prototype,"status",void 0),(0,e.gn)([(0,n.D)(()=>k),(0,o.C)()],U.prototype,"data",void 0),(0,e.gn)([(0,o.C)()],U.prototype,"objectError",void 0);class k{}(0,e.gn)([(0,o.C)()],k.prototype,"airline",void 0),(0,e.gn)([(0,o.C)()],k.prototype,"bookingCode",void 0),(0,e.gn)([(0,n.D)(()=>x),(0,o.C)()],k.prototype,"cancelCharge",void 0),(0,e.gn)([(0,n.D)(()=>D),(0,o.C)()],k.prototype,"totalCharge",void 0),(0,e.gn)([(0,n.D)(()=>N),(0,o.C)()],k.prototype,"cancelJourney",void 0),(0,e.gn)([(0,n.D)(()=>D),(0,o.C)()],k.prototype,"nonRefund",void 0),(0,e.gn)([(0,n.D)(()=>D),(0,o.C)()],k.prototype,"refund",void 0);class x{}(0,e.gn)([(0,o.C)()],x.prototype,"base",void 0),(0,e.gn)([(0,o.C)()],x.prototype,"applied",void 0),(0,e.gn)([(0,o.C)()],x.prototype,"surCharge",void 0),(0,e.gn)([(0,o.C)()],x.prototype,"tax",void 0),(0,e.gn)([(0,o.C)()],x.prototype,"total",void 0),(0,e.gn)([(0,o.C)()],x.prototype,"discount",void 0),(0,e.gn)([(0,n.D)(()=>T),(0,o.C)()],x.prototype,"currency",void 0);class T{}(0,e.gn)([(0,o.C)()],T.prototype,"baseCurrency",void 0),(0,e.gn)([(0,o.C)()],T.prototype,"code",void 0),(0,e.gn)([(0,o.C)()],T.prototype,"description",void 0),(0,e.gn)([(0,o.C)()],T.prototype,"exchangeRate",void 0);class D{}(0,e.gn)([(0,o.C)()],D.prototype,"base",void 0),(0,e.gn)([(0,o.C)()],D.prototype,"applied",void 0),(0,e.gn)([(0,o.C)()],D.prototype,"surCharge",void 0),(0,e.gn)([(0,o.C)()],D.prototype,"tax",void 0),(0,e.gn)([(0,o.C)()],D.prototype,"total",void 0),(0,e.gn)([(0,o.C)()],D.prototype,"discount",void 0),(0,e.gn)([(0,n.D)(()=>T),(0,o.C)()],D.prototype,"currency",void 0);class N{}(0,e.gn)([(0,n.D)(()=>h),(0,o.C)()],N.prototype,"journeyInfo",void 0),(0,e.gn)([(0,n.D)(()=>y),(0,o.C)()],N.prototype,"charge",void 0);class h{}(0,e.gn)([(0,o.C)()],h.prototype,"key",void 0);class y{}(0,e.gn)([(0,o.C)()],y.prototype,"base",void 0),(0,e.gn)([(0,o.C)()],y.prototype,"applied",void 0),(0,e.gn)([(0,o.C)()],y.prototype,"surCharge",void 0),(0,e.gn)([(0,o.C)()],y.prototype,"tax",void 0),(0,e.gn)([(0,o.C)()],y.prototype,"total",void 0),(0,e.gn)([(0,o.C)()],y.prototype,"discount",void 0),(0,e.gn)([(0,n.D)(()=>T),(0,o.C)()],y.prototype,"currency",void 0);class f{}(0,e.gn)([(0,o.C)()],f.prototype,"status",void 0),(0,e.gn)([(0,n.D)(()=>s),(0,o.C)()],f.prototype,"data",void 0),(0,e.gn)([(0,o.C)()],f.prototype,"objectError",void 0);class s{}(0,e.gn)([(0,o.C)()],s.prototype,"airline",void 0),(0,e.gn)([(0,o.C)()],s.prototype,"pnr",void 0),(0,e.gn)([(0,n.D)(()=>d),(0,o.C)()],s.prototype,"charge",void 0),(0,e.gn)([(0,o.C)()],s.prototype,"makePayment",void 0),(0,e.gn)([(0,n.D)(()=>i),(0,o.C)()],s.prototype,"cancelJourney",void 0),(0,e.gn)([(0,n.D)(()=>E),(0,o.C)()],s.prototype,"paymentInfo",void 0);class d{}(0,e.gn)([(0,o.C)()],d.prototype,"key",void 0),(0,e.gn)([(0,n.D)(()=>g),(0,o.C)()],d.prototype,"chargeType",void 0),(0,e.gn)([(0,n.D)(()=>m),(0,o.C)()],d.prototype,"charge",void 0),(0,e.gn)([(0,o.C)()],d.prototype,"description",void 0),(0,e.gn)([(0,o.C)()],d.prototype,"extra",void 0);class g{}(0,e.gn)([(0,o.C)()],g.prototype,"code",void 0),(0,e.gn)([(0,o.C)()],g.prototype,"type",void 0),(0,e.gn)([(0,n.D)(()=>c),(0,o.C)()],g.prototype,"description",void 0);class c{}(0,e.gn)([(0,o.C)()],c.prototype,"en",void 0),(0,e.gn)([(0,o.C)()],c.prototype,"vi",void 0);class m{}(0,e.gn)([(0,o.C)()],m.prototype,"base",void 0),(0,e.gn)([(0,o.C)()],m.prototype,"applied",void 0),(0,e.gn)([(0,o.C)()],m.prototype,"surCharge",void 0),(0,e.gn)([(0,o.C)()],m.prototype,"tax",void 0),(0,e.gn)([(0,o.C)()],m.prototype,"total",void 0),(0,e.gn)([(0,o.C)()],m.prototype,"discount",void 0),(0,e.gn)([(0,n.D)(()=>p),(0,o.C)()],m.prototype,"currency",void 0);class p{}(0,e.gn)([(0,o.C)()],p.prototype,"baseCurrency",void 0),(0,e.gn)([(0,o.C)()],p.prototype,"code",void 0),(0,e.gn)([(0,o.C)()],p.prototype,"description",void 0),(0,e.gn)([(0,o.C)()],p.prototype,"exchangeRate",void 0);class i{}(0,e.gn)([(0,o.C)()],i.prototype,"airline",void 0),(0,e.gn)([(0,o.C)()],i.prototype,"airlineName",void 0),(0,e.gn)([(0,o.C)()],i.prototype,"duration",void 0),(0,e.gn)([(0,o.C)()],i.prototype,"delay",void 0),(0,e.gn)([(0,o.C)()],i.prototype,"stopOvernight",void 0),(0,e.gn)([(0,o.C)()],i.prototype,"fareOptions",void 0),(0,e.gn)([(0,o.C)()],i.prototype,"key",void 0),(0,e.gn)([(0,o.C)()],i.prototype,"leg",void 0),(0,e.gn)([(0,o.C)()],i.prototype,"numOfStops",void 0),(0,e.gn)([(0,o.C)()],i.prototype,"operating",void 0),(0,e.gn)([(0,o.C)()],i.prototype,"operatingName",void 0),(0,e.gn)([(0,n.D)(()=>l),(0,o.C)()],i.prototype,"segments",void 0),(0,e.gn)([(0,n.D)(()=>v),(0,o.C)()],i.prototype,"departure",void 0),(0,e.gn)([(0,n.D)(()=>Z),(0,o.C)()],i.prototype,"arrival",void 0),(0,e.gn)([(0,o.C)()],i.prototype,"expireTime",void 0),(0,e.gn)([(0,o.C)()],i.prototype,"fareClass",void 0),(0,e.gn)([(0,o.C)()],i.prototype,"fareClassCode",void 0);class l{}(0,e.gn)([(0,o.C)()],l.prototype,"key",void 0),(0,e.gn)([(0,o.C)()],l.prototype,"id",void 0),(0,e.gn)([(0,o.C)()],l.prototype,"index",void 0),(0,e.gn)([(0,o.C)()],l.prototype,"airline",void 0),(0,e.gn)([(0,o.C)()],l.prototype,"airlineName",void 0),(0,e.gn)([(0,o.C)()],l.prototype,"duration",void 0),(0,e.gn)([(0,o.C)()],l.prototype,"delay",void 0),(0,e.gn)([(0,o.C)()],l.prototype,"flightNumber",void 0),(0,e.gn)([(0,o.C)()],l.prototype,"operating",void 0),(0,e.gn)([(0,o.C)()],l.prototype,"operatingName",void 0),(0,e.gn)([(0,o.C)()],l.prototype,"stopPoint",void 0),(0,e.gn)([(0,n.D)(()=>v),(0,o.C)()],l.prototype,"departure",void 0),(0,e.gn)([(0,n.D)(()=>Z),(0,o.C)()],l.prototype,"arrival",void 0),(0,e.gn)([(0,o.C)()],l.prototype,"bookingClassArr",void 0),(0,e.gn)([(0,n.D)(()=>M),(0,o.C)()],l.prototype,"bookedInfo",void 0),(0,e.gn)([(0,o.C)()],l.prototype,"fareType",void 0),(0,e.gn)([(0,o.C)()],l.prototype,"modelAirplane",void 0),(0,e.gn)([(0,o.C)()],l.prototype,"modelAirplaneName",void 0),(0,e.gn)([(0,o.C)()],l.prototype,"codeAirline",void 0);class v{}(0,e.gn)([(0,n.D)(()=>G),(0,o.C)()],v.prototype,"airport",void 0),(0,e.gn)([(0,o.C)()],v.prototype,"localTime",void 0),(0,e.gn)([(0,o.C)()],v.prototype,"scheduleTime",void 0);class G{}(0,e.gn)([(0,o.C)()],G.prototype,"code",void 0),(0,e.gn)([(0,o.C)()],G.prototype,"name",void 0),(0,e.gn)([(0,n.D)(()=>R),(0,o.C)()],G.prototype,"utcOffset",void 0);class R{}(0,e.gn)([(0,o.C)()],R.prototype,"zone",void 0),(0,e.gn)([(0,o.C)()],R.prototype,"iso",void 0);class Z{}(0,e.gn)([(0,n.D)(()=>G),(0,o.C)()],Z.prototype,"airport",void 0),(0,e.gn)([(0,o.C)()],Z.prototype,"localTime",void 0),(0,e.gn)([(0,o.C)()],Z.prototype,"scheduleTime",void 0);class M{}(0,e.gn)([(0,o.C)()],M.prototype,"fareClass",void 0),(0,e.gn)([(0,o.C)()],M.prototype,"status",void 0),(0,e.gn)([(0,o.C)()],M.prototype,"fareType",void 0),(0,e.gn)([(0,o.C)()],M.prototype,"fareBasic",void 0);class E{}(0,e.gn)([(0,o.C)()],E.prototype,"passengerKey",void 0),(0,e.gn)([(0,o.C)()],E.prototype,"passengerType",void 0),(0,e.gn)([(0,o.C)()],E.prototype,"passengerFirstName",void 0),(0,e.gn)([(0,o.C)()],E.prototype,"passengerGender",void 0),(0,e.gn)([(0,o.C)()],E.prototype,"passengerNamePrefix",void 0),(0,e.gn)([(0,o.C)()],E.prototype,"passengerLastName",void 0),(0,e.gn)([(0,o.C)()],E.prototype,"ticket",void 0),(0,e.gn)([(0,o.C)()],E.prototype,"type",void 0),(0,e.gn)([(0,o.C)()],E.prototype,"currencyCode",void 0),(0,e.gn)([(0,o.C)()],E.prototype,"description",void 0),(0,e.gn)([(0,o.C)()],E.prototype,"paymentMethod",void 0),(0,e.gn)([(0,o.C)()],E.prototype,"paymentTime",void 0),(0,e.gn)([(0,o.C)()],E.prototype,"paymentTimeZone",void 0),(0,e.gn)([(0,o.C)()],E.prototype,"paymentRef",void 0),(0,e.gn)([(0,o.C)()],E.prototype,"amount",void 0);class V{}(0,e.gn)([(0,o.C)()],V.prototype,"status",void 0),(0,e.gn)([(0,n.D)(()=>z),(0,o.C)()],V.prototype,"data",void 0),(0,e.gn)([(0,o.C)()],V.prototype,"objectError",void 0),(0,e.gn)([(0,o.C)()],V.prototype,"success",void 0);class z{}(0,e.gn)([(0,n.D)(()=>J.eG),(0,o.C)()],z.prototype,"bookingData",void 0),(0,e.gn)([(0,n.D)(()=>Q),(0,o.C)()],z.prototype,"rebookInfo",void 0);class Q{}(0,e.gn)([(0,o.C)()],Q.prototype,"mode",void 0),(0,e.gn)([(0,o.C)()],Q.prototype,"rebookFrom",void 0),(0,e.gn)([(0,o.C)()],Q.prototype,"phone",void 0);var L=r(94650);const O={headers:new S.WM({"Content-Type":"application/json"})};let F=(()=>{class a{constructor(_,I){this.http=_,this.appConfig=I}getBookingDetail(_,I,W=!1,q=!1){return this.http.post(this.appConfig.apiUrl+"flight/booking-retriver",JSON.stringify({airline:I,bookingCode:_,refresh:W,includePrice:q}),O).pipe((0,C.U)($=>(0,b.yE)(J.JG,$,{excludeExtraneousValues:!0})))}quotationCancelJourney(_){return this.http.post(this.appConfig.apiUrl+"ticket/quotation-journey-cancel",JSON.stringify(_),O).pipe((0,C.U)(I=>(0,b.yE)(U,I,{excludeExtraneousValues:!0})))}cancelJourney(_){return this.http.post(this.appConfig.apiUrl+"ticket/cancel-journey-reservation",JSON.stringify(_),O).pipe((0,C.U)(I=>(0,b.yE)(f,I,{excludeExtraneousValues:!0})))}getBookingInfo(_){return this.http.post(this.appConfig.apiUrl+"flight/get-pnr-info",JSON.stringify(_),O).pipe((0,C.U)(I=>(0,b.yE)(B,I,{excludeExtraneousValues:!0})))}getRebookPnrSnapshot(_){return this.http.post(this.appConfig.apiUrl+"flight/get-rebook-pnr-snapshot",JSON.stringify(_),O)}rebookPnr(_){return this.http.post(this.appConfig.apiUrl+"flight/rebook-pnr",JSON.stringify(_),O).pipe((0,C.U)(I=>(0,b.yE)(V,I,{excludeExtraneousValues:!0})))}}return a.\u0275fac=function(_){return new(_||a)(L.LFG(S.eN),L.LFG(u.qB))},a.\u0275prov=L.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var Y=(()=>{return(a=Y||(Y={})).UPDATE_JOURNEY="UPDATE_JOURNEY",a.ADD_JOURNEY="ADD_JOURNEY",a.NONE="NONE",Y;var a})()},85922:(j,A,r)=>{r.r(A),r.d(A,{SendEmailModalComponent:()=>g.B,SendEmailPageComponent:()=>d});var S=r(36895),u=r(24006),b=r(10908),C=r(83700),J=r(27898),e=r(44143),o=r(74713),n=r(67534),B=r(34541),P=r(28746),t=r(94650),U=r(58273),k=r(9381),x=r(97579),T=r(82908);function D(c,m){1&c&&t._UZ(0,"cf-input-hint",21),2&c&&t.Q6J("hint","M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function N(c,m){1&c&&t._UZ(0,"cf-input-hint",21),2&c&&t.Q6J("hint","Nh\xe0 cung c\u1ea5p kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function h(c,m){1&c&&t._UZ(0,"cf-input-hint",21),2&c&&t.Q6J("hint","Email kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function y(c,m){1&c&&t._UZ(0,"cf-input-hint",21),2&c&&t.Q6J("hint","\u0110\u1ecbnh d\u1ea1ng kh\xf4ng h\u1ee3p l\u1ec7")}function f(c,m){1&c&&t._UZ(0,"cf-spinner")}const s=function(){return[]};let d=(()=>{class c{constructor(p,i,l,v,G,R){this._fb=p,this._manageBookingService=i,this._mobileDetectService=l,this._bottomSheetService=v,this._modal=G,this._bookingDetailService=R,this.providerOptions=[{value:"VN",text:"VN - Vietnam Airlines"},{value:"VJ",text:"VJ - Vietjet Air"},{value:"QH",text:"QH - Bamboo Airways"},{value:"AIR_1G",text:"1G"}],this.isDisableEmail=!1,this.isDisableCheckbox=!1,this.isLoading=!1}ngOnInit(){this.initFormGroup(),this.formGroup.get("bookingCode").valueChanges.subscribe({next:p=>{6===p.length&&this.formGroup.value.airline&&this.getBookingContact()}})}initFormGroup(){this.formGroup=this._fb.group({bookingCode:["",u.kI.required],provider:[""],email:[""],includeTicket:[!1,[u.kI.required]]})}onSendEmail(){if(this.formGroup.invalid)return;const p=this.formGroup.value,i={bookingCode:p.bookingCode.trim().toUpperCase()||"",provider:p.provider||"",email:p.email.trim()||"",language:"vi",includeTicket:p.includeTicket};this._manageBookingService.sendEmail(i).subscribe({next:l=>{if("OK"===l.status)if(this._mobileDetectService.isMobile()){const v=this._bottomSheetService.open(n.z5,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",data:{title:"G\u1eedi email th\xe0nh c\xf4ng",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${i.email}</strong> th\xe0nh c\xf4ng. Vui l\xf2ng ki\u1ec3m tra email</div>`,status:"success"}});v.containerInstance._rightButtonClick.subscribe(G=>v.dismiss())}else this._modal.open(n.z5,{title:"G\u1eedi email th\xe0nh c\xf4ng",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${i.email}</strong> th\xe0nh c\xf4ng. Vui l\xf2ng ki\u1ec3m tra email</div>`,status:"success"});else if(this._mobileDetectService.isMobile()){const v=this._bottomSheetService.open(n.z5,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",data:{title:"C\xf3 l\u1ed7i x\u1ea3y ra",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${i.email}</strong> th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i</div>`,status:"error"}});v.containerInstance._rightButtonClick.subscribe(G=>v.dismiss())}else this._modal.open(n.z5,{title:"C\xf3 l\u1ed7i x\u1ea3y ra",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${i.email}</strong> th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i</div>`,status:"error"})},error:()=>{if(this._mobileDetectService.isMobile()){const l=this._bottomSheetService.open(n.z5,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",data:{title:"C\xf3 l\u1ed7i x\u1ea3y ra",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${i.email}</strong> th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i</div>`,status:"error"}});l.containerInstance._rightButtonClick.subscribe(v=>l.dismiss())}else this._modal.open(n.z5,{title:"C\xf3 l\u1ed7i x\u1ea3y ra",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${i.email}</strong> th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i</div>`,status:"error"})}})}checkedChange(p){this.formGroup.controls.includeTicket.setValue(p)}onChangeProvider(p){"VN"===p.value.toUpperCase()?(this.formGroup.value.bookingCode?this.getBookingContact():this.formGroup.controls.email.setValue(""),this.formGroup.controls.email.setValidators(null),this.formGroup.controls.email.updateValueAndValidity(),this.isDisableEmail=!0,this.isDisableCheckbox=!1):(this.formGroup.controls.email.setValidators([u.kI.required]),this.formGroup.controls.email.updateValueAndValidity(),this.formGroup.controls.includeTicket.setValue(!0),this.isDisableEmail=!1,this.isDisableCheckbox=!0)}getBookingContact(){const p={bookingCode:this.formGroup.value.bookingCode};this.isLoading=!0,this._bookingDetailService.getBookingInfo(p).pipe((0,P.x)(()=>this.isLoading=!1)).subscribe({next:i=>{"OK"===i.status&&this.formGroup.controls.email.setValue(i.data.bookingContact.email)}})}}return c.\u0275fac=function(p){return new(p||c)(t.Y36(u.qu),t.Y36(U.fB),t.Y36(k.L),t.Y36(b.a2),t.Y36(x.oE),t.Y36(T.P3))},c.\u0275cmp=t.Xpm({type:c,selectors:[["send-email-page"]],hostAttrs:[1,"h-full"],standalone:!0,features:[t.jDz],decls:32,vars:22,consts:[[1,"w-full","h-full","md:flex","md:flex-col","md:justify-between"],[1,"flex","justify-center","p-8","md:!p-4"],[1,"w-[764px]","md:!w-full"],[1,"flex","gap-x-[20px]"],[1,"w-1","bg-primary-2-4"],[1,"flex","items-center","text-heading-md"],[1,"bg-neutral-white","rounded","p-6","flex","flex-col","gap-y-4","mt-4","md:p-4"],[1,"grow-[400]","!w-full",3,"status"],["cfLabel","",1,"text-express-sm","text-black",3,"CfRequired"],["cf-input","","size","medium","placeholder","Nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7",3,"formControl"],["cfHint","",3,"hint",4,"ngIf"],["textField","text","valueField","value","placeholder","Ch\u1ecdn h\xe3ng bay",1,"!w-full","!max-w-full",3,"status","data","formControl","allowSearch","selectedChange"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5",3,"CfRequired"],[1,"grow-[400]","!w-full",3,"disabled","status"],["cf-input","","size","medium","placeholder","Nh\u1eadp email nh\u1eadn m\u1eb7t v\xe9",3,"formControl"],["size","medium",3,"disabled","checked","checkChange"],[1,"mt-6","w-full","text-right","md:hidden"],["cf-button","","size","medium",1,"!min-w-[100px]","justify-center",3,"disabled","click"],[1,"hidden","md:block","w-full","p-4","bg-neutral-white"],["cf-button","","size","medium",1,"!w-full","justify-center",3,"disabled","click"],[4,"ngIf"],["cfHint","",3,"hint"]],template:function(p,i){1&p&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"div",4),t.TgZ(5,"div",5),t._uU(6,"Th\xf4ng tin g\u1eedi v\xe9"),t.qZA()(),t.TgZ(7,"div",6)(8,"cf-input-group",7)(9,"label",8),t._uU(10," M\xe3 \u0111\u1eb7t ch\u1ed7 "),t.qZA(),t._UZ(11,"input",9),t.YNc(12,D,1,1,"cf-input-hint",10),t.qZA(),t.TgZ(13,"cf-select",11),t.NdJ("selectedChange",function(v){return i.onChangeProvider(v)}),t.TgZ(14,"label",12),t._uU(15," Nh\xe0 cung c\u1ea5p "),t.qZA(),t.YNc(16,N,1,1,"cf-input-hint",10),t.qZA(),t.TgZ(17,"cf-input-group",13)(18,"label",8),t._uU(19," Email "),t.qZA(),t._UZ(20,"input",14),t.YNc(21,h,1,1,"cf-input-hint",10),t.YNc(22,y,1,1,"cf-input-hint",10),t.qZA(),t.TgZ(23,"cf-checkbox",15),t.NdJ("checkChange",function(v){return i.checkedChange(v)}),t._uU(24," K\xe8m Ticket EMD "),t.qZA()(),t.TgZ(25,"div",16)(26,"button",17),t.NdJ("click",function(){return i.onSendEmail()}),t._uU(27," G\u1eedi"),t.qZA()()()(),t.TgZ(28,"div",18)(29,"button",19),t.NdJ("click",function(){return i.onSendEmail()}),t._uU(30," G\u1eedi"),t.qZA()()(),t.YNc(31,f,1,0,"cf-spinner",20)),2&p&&(t.xp6(8),t.Q6J("status",i.formGroup.controls.bookingCode.invalid&&(i.formGroup.controls.bookingCode.dirty||i.formGroup.controls.bookingCode.touched)?"error":"default"),t.xp6(1),t.Q6J("CfRequired",!0),t.xp6(2),t.Q6J("formControl",i.formGroup.controls.bookingCode),t.xp6(1),t.Q6J("ngIf",i.formGroup.controls.bookingCode.hasError("required")&&i.formGroup.controls.bookingCode.touched),t.xp6(1),t.Q6J("status",i.formGroup.controls.provider.invalid&&(i.formGroup.controls.provider.dirty||i.formGroup.controls.provider.touched)?"error":"default")("data",i.providerOptions||t.DdM(21,s))("formControl",i.formGroup.controls.provider)("allowSearch",!0),t.xp6(1),t.Q6J("CfRequired",!0),t.xp6(2),t.Q6J("ngIf",i.formGroup.controls.provider.hasError("required")&&i.formGroup.controls.provider.touched),t.xp6(1),t.Q6J("disabled",i.isDisableEmail)("status",i.formGroup.controls.email.invalid&&(i.formGroup.controls.email.dirty||i.formGroup.controls.email.touched)?"error":"default"),t.xp6(1),t.Q6J("CfRequired",!0),t.xp6(2),t.Q6J("formControl",i.formGroup.controls.email),t.xp6(1),t.Q6J("ngIf",i.formGroup.controls.email.hasError("required")&&(i.formGroup.controls.email.touched||i.formGroup.controls.email.dirty)),t.xp6(1),t.Q6J("ngIf",i.formGroup.controls.email.hasError("email")),t.xp6(1),t.Q6J("disabled",i.isDisableCheckbox)("checked",i.formGroup.value.includeTicket),t.xp6(3),t.Q6J("disabled",i.formGroup.invalid),t.xp6(3),t.Q6J("disabled",i.formGroup.invalid),t.xp6(2),t.Q6J("ngIf",i.isLoading))},dependencies:[S.ez,S.O5,C.N8,C.Xq,e.j$,e.ND,e.BN,e.v2,B.C,u.UX,u.Fj,u.JJ,u.oH,u.u5,o.q,b.DW,J.u,n.OR],encapsulation:2}),c})();var g=r(95911)},95911:(j,A,r)=>{r.d(A,{B:()=>N});var S=r(36895),u=r(24006),b=r(10908),C=r(83700),J=r(27898),e=r(72506),o=r(44143),n=r(67534),B=r(34541),P=r(28746),t=r(94650),U=r(58273),k=r(97579);function x(h,y){1&h&&t._UZ(0,"cf-input-hint",18),2&h&&t.Q6J("hint","Email kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function T(h,y){1&h&&t._UZ(0,"cf-input-hint",18),2&h&&t.Q6J("hint","\u0110\u1ecbnh d\u1ea1ng kh\xf4ng h\u1ee3p l\u1ec7")}function D(h,y){1&h&&t._UZ(0,"cf-spinner")}let N=(()=>{class h{constructor(f,s,d,g,c,m,p,i){this.fb=s,this._manageBookingService=d,this._modal=g,this._bottomSheetService=c,this.ref=m,this.bottomSheetData=p,this.bottomSheetRef=i,this.isLoading=!1,this.isDisableEmail=!1,this.isDisableCheckbox=!1,f.registerIcons([e.UNF,e.PcQ]),m&&(this.emailInfo=this.ref.data.emailInfo),p&&(this.emailInfo=p.emailInfo)}ngOnInit(){switch(this.initFormGroup(),this.emailInfo.provider){case"VN":this.isDisableEmail=!0,this.formGroup.controls.email.setValidators(null),this.formGroup.controls.email.setValue(this.emailInfo.email),this.providerDisplay="VN - Vietnam Airlines";break;case"VJ":this.isDisableEmail=!1,this.isDisableCheckbox=!0,this.formGroup.controls.includeTicket.setValue(!0),this.providerDisplay="VJ - Vietjet Air";break;case"QH":this.isDisableEmail=!1,this.isDisableCheckbox=!0,this.formGroup.controls.includeTicket.setValue(!0),this.providerDisplay="QH - Bamboo Airways";break;case"AIR_1G":this.isDisableEmail=!1,this.isDisableCheckbox=!0,this.formGroup.controls.includeTicket.setValue(!0),this.providerDisplay="1G";break;default:this.providerDisplay=""}}initFormGroup(){this.formGroup=this.fb.group({email:["",[u.kI.required,u.kI.email]],includeTicket:[!1,[u.kI.required]]})}close(){this.ref&&this.ref.close(!1),this.bottomSheetData&&this.bottomSheetRef.dismiss(!1)}ok(){if(this.formGroup.invalid)return;const f=this.formGroup.value,s={bookingCode:this.emailInfo.bookingCode.trim().toUpperCase()||"",provider:this.emailInfo.provider||"",email:f.email.trim()||"",language:"vi",includeTicket:f.includeTicket};this.isLoading=!0,this._manageBookingService.sendEmail(s).pipe((0,P.x)(()=>this.isLoading=!1)).subscribe({next:d=>{if("OK"===d.status){if(this.ref&&this._modal.open(n.z5,{title:"G\u1eedi email th\xe0nh c\xf4ng",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${s.email}</strong> th\xe0nh c\xf4ng. Vui l\xf2ng ki\u1ec3m tra email</div>`,status:"success"}).afterClosed$.subscribe({next:()=>{this.ref.close(!1)}}),this.bottomSheetData){const g=this._bottomSheetService.open(n.z5,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",data:{title:"G\u1eedi email th\xe0nh c\xf4ng",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${s.email}</strong> th\xe0nh c\xf4ng. Vui l\xf2ng ki\u1ec3m tra email</div>`,status:"success"}});g.containerInstance._rightButtonClick.subscribe(c=>g.dismiss()),g.afterDismissed().subscribe(()=>{this.bottomSheetRef.dismiss(!1)})}}else if(this.ref&&this._modal.open(n.z5,{title:"C\xf3 l\u1ed7i x\u1ea3y ra",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${s.email}</strong> th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i</div>`,status:"error"}).afterClosed$.subscribe({next:()=>{}}),this.bottomSheetData){const g=this._bottomSheetService.open(n.z5,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",data:{title:"C\xf3 l\u1ed7i x\u1ea3y ra",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${s.email}</strong> th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i</div>`,status:"error"}});g.containerInstance._rightButtonClick.subscribe(c=>g.dismiss()),g.afterDismissed().subscribe(()=>{this.bottomSheetRef.dismiss(!1)})}},error:()=>{if(this.ref&&this._modal.open(n.z5,{title:"C\xf3 l\u1ed7i x\u1ea3y ra",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${s.email}</strong> th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i</div>`,status:"error"}).afterClosed$.subscribe({next:()=>{}}),this.bottomSheetData){const d=this._bottomSheetService.open(n.z5,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",data:{title:"C\xf3 l\u1ed7i x\u1ea3y ra",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${s.email}</strong> th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i</div>`,status:"error"}});d.containerInstance._rightButtonClick.subscribe(g=>d.dismiss()),d.afterDismissed().subscribe(()=>{this.bottomSheetRef.dismiss(!1)})}}})}onCheckTicket(f){this.formGroup.controls.includeTicket.setValue(f)}}return h.\u0275fac=function(f){return new(f||h)(t.Y36(e.KNP),t.Y36(u.qu),t.Y36(U.fB),t.Y36(k.oE),t.Y36(b.a2),t.Y36(k.gb,8),t.Y36(b.Rr,8),t.Y36(b.Zu,8))},h.\u0275cmp=t.Xpm({type:h,selectors:[["send-email-modal"]],standalone:!0,features:[t.jDz],decls:29,vars:16,consts:[[1,"w-[640px]","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-b-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-gray-6"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"p-6","flex","flex-col","gap-y-4"],[1,"grow-[400]","!w-full",3,"disabled","status"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],["cf-input","","size","medium","placeholder","Nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7",3,"value"],["cf-input","","size","medium","placeholder","Ch\u1ecdn h\xe3ng bay",3,"value"],["cfLabel","",1,"text-express-sm","text-black",3,"CfRequired"],["cf-input","","size","medium","placeholder","Nh\u1eadp email nh\u1eadn m\u1eb7t v\xe9",3,"formControl"],["cfHint","",3,"hint",4,"ngIf"],["size","medium",3,"disabled","checked","checkChange"],[1,"p-6","flex","gap-x-4","justify-end","md:justify-between"],["cf-button","","size","medium","type","secondary",1,"min-w-[100px]","md:!w-full","justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"min-w-[100px]","md:!w-full","justify-center","items-center",3,"disabled","click"],["icon","circle_check","size","small",1,"ml-2"],[4,"ngIf"],["cfHint","",3,"hint"]],template:function(f,s){1&f&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Th\xf4ng tin nh\u1eadn v\xe9"),t.qZA(),t.TgZ(4,"cf-icon",3),t.NdJ("click",function(){return s.close()}),t.qZA()(),t.TgZ(5,"div",4)(6,"cf-input-group",5)(7,"label",6),t._uU(8," M\xe3 \u0111\u1eb7t ch\u1ed7 "),t.qZA(),t._UZ(9,"input",7),t.qZA(),t.TgZ(10,"cf-input-group",5)(11,"label",6),t._uU(12," Nh\xe0 cung c\u1ea5p "),t.qZA(),t._UZ(13,"input",8),t.qZA(),t.TgZ(14,"cf-input-group",5)(15,"label",9),t._uU(16," Email "),t.qZA(),t._UZ(17,"input",10),t.YNc(18,x,1,1,"cf-input-hint",11),t.YNc(19,T,1,1,"cf-input-hint",11),t.qZA(),t.TgZ(20,"cf-checkbox",12),t.NdJ("checkChange",function(g){return s.onCheckTicket(g)}),t._uU(21," K\xe8m Ticket EMD "),t.qZA()(),t.TgZ(22,"div",13)(23,"button",14),t.NdJ("click",function(){return s.close()}),t._uU(24," \u0110\xf3ng "),t.qZA(),t.TgZ(25,"button",15),t.NdJ("click",function(){return s.ok()}),t._uU(26," X\xe1c nh\u1eadn "),t._UZ(27,"cf-icon",16),t.qZA()()(),t.YNc(28,D,1,0,"cf-spinner",17)),2&f&&(t.xp6(6),t.Q6J("disabled",!0)("status","default"),t.xp6(3),t.Q6J("value",s.emailInfo.bookingCode),t.xp6(1),t.Q6J("disabled",!0)("status","default"),t.xp6(3),t.Q6J("value",s.providerDisplay),t.xp6(1),t.Q6J("disabled",s.isDisableEmail)("status",s.formGroup.controls.email.invalid&&(s.formGroup.controls.email.dirty||s.formGroup.controls.email.touched)?"error":"default"),t.xp6(1),t.Q6J("CfRequired",!0),t.xp6(2),t.Q6J("formControl",s.formGroup.controls.email),t.xp6(1),t.Q6J("ngIf",s.formGroup.controls.email.hasError("required")&&(s.formGroup.controls.email.touched||s.formGroup.controls.email.dirty)),t.xp6(1),t.Q6J("ngIf",s.formGroup.controls.email.hasError("email")),t.xp6(1),t.Q6J("disabled",s.isDisableCheckbox)("checked",s.formGroup.value.includeTicket),t.xp6(5),t.Q6J("disabled",s.formGroup.invalid),t.xp6(3),t.Q6J("ngIf",s.isLoading))},dependencies:[S.ez,S.O5,e.AxE,e.Sm8,C.N8,C.Xq,u.UX,u.Fj,u.JJ,u.oH,u.u5,o.j$,o.ND,o.BN,o.v2,B.C,b.DW,n.OR,J.u],encapsulation:2}),h})()},34541:(j,A,r)=>{r.d(A,{C:()=>b});var S=r(36895),u=r(94650);let b=(()=>{class C{constructor(e,o,n){this.elementRef=e,this.renderer=o,this.document=n}set CfRequired(e){if(e){const o=this.document.createElement("span");o.innerHTML="&nbsp;(*)",o.className="text-primary-1-4 text-espressive-sm",this.renderer.appendChild(this.elementRef.nativeElement,o)}}}return C.\u0275fac=function(e){return new(e||C)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(S.K0))},C.\u0275dir=u.lG2({type:C,selectors:[["","CfRequired",""]],inputs:{CfRequired:"CfRequired"},standalone:!0}),C})()}}]);