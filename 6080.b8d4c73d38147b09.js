"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[6080],{56080:(j,E,s)=>{s.r(E),s.d(E,{BtcOrderManagementComponent:()=>kt,BtcOrderManagementDetailComponent:()=>gt});var c=s(97582),l=s(36895),p=s(24006),_=s(83700),m=s(72506),x=s(44143),v=s(74713),h=s(12264),g=s(10908),e=s(94650),b=s(97579);let Z=(()=>{class n{constructor(t,i,r,a){this.ref=t,this.bottomSheetData=i,this.bottomSheetRef=r,this.cfIconRegister=a,this.remarkControl=new p.NI("",p.kI.required),t&&(this.title=t.data.title,this.body=t.data.body)}ngOnInit(){}close(){this.ref&&this.ref.close(!1),this.bottomSheetData&&this.bottomSheetRef.dismiss(!1)}ok(){this.ref&&this.ref.close({remark:this.remarkControl.value}),this.bottomSheetData&&this.bottomSheetRef.dismiss({remark:this.remarkControl.value})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.gb,8),e.Y36(g.Rr,8),e.Y36(g.Zu,8),e.Y36(m.KNP))},n.\u0275cmp=e.Xpm({type:n,selectors:[["btc-order-change-state"]],standalone:!0,features:[e.jDz],decls:23,vars:4,consts:[[1,"w-[500px]","flex","flex-col","rounded-lg","bg-neutral-white","md:w-screen"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-b-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"p-6","flex","flex-col","gap-y-4"],[1,"flex","items-center","gap-x-4"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M1.23916 18.3887L10.1497 3.95489C10.3277 3.66664 10.594 3.42543 10.92 3.25719C11.246 3.08895 11.6194 3.00005 12 3.00005C12.3806 3.00005 12.754 3.08895 13.08 3.25719C13.406 3.42543 13.6723 3.66664 13.8503 3.95489L22.7608 18.3887C22.9281 18.6611 23.0101 18.9659 22.999 19.2736C22.9879 19.5812 22.8839 19.8811 22.6973 20.1441C22.5106 20.4071 22.2477 20.6241 21.934 20.7741C21.6204 20.9241 21.2667 21.002 20.9075 21H3.08847C2.72962 21.0014 2.37647 20.9231 2.06336 20.7729C1.75026 20.6226 1.48787 20.4055 1.3017 20.1426C1.11553 19.8797 1.01193 19.5801 1.00097 19.2727C0.99001 18.9654 1.07207 18.6608 1.23916 18.3887Z","fill","#FCB40A"],["d","M12 18.75C11.5858 18.75 11.25 18.4143 11.25 18L11.25 17.9901C11.25 17.5758 11.5858 17.2401 12 17.2401C12.4142 17.2401 12.75 17.5758 12.75 17.9901L12.75 18C12.75 18.4143 12.4142 18.75 12 18.75Z","fill","#2C2C2C"],["d","M12 15.75C11.5858 15.75 11.25 15.4142 11.25 15L11.25 8.00002C11.25 7.5858 11.5858 7.25002 12 7.25002C12.4142 7.25002 12.75 7.5858 12.75 8.00002L12.75 15C12.75 15.4142 12.4142 15.75 12 15.75Z","fill","#2C2C2C"],[1,"text-body-md",3,"innerHTML"],[1,"text-espressive-sm","text-black","mb-1.5"],["placeholder","Ghi ch\xfa",1,"w-full","placeholder:text-body-md","placeholder:text-neutral-gray-4","border","border-neutral-gray-2","rounded-[8px]","shadow-xs","px-[14px]","py-[10px]","max-h-80",2,"min-height","40px",3,"formControl"],[1,"flex","justify-end","gap-x-4","pb-6","pr-6","md:p-4"],["cf-button","","size","medium","type","secondary",1,"md:w-full","md:justify-center",3,"click"],["cf-button","","size","medium","primary-1","",1,"md:w-full","md:justify-center",3,"disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return i.close()}),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"div"),e.O4$(),e.TgZ(8,"svg",6),e._UZ(9,"path",7)(10,"path",8)(11,"path",9),e.qZA()(),e.kcU(),e._UZ(12,"div",10),e.qZA(),e.TgZ(13,"div")(14,"div",11),e._uU(15,"Remark"),e.qZA(),e.TgZ(16,"div"),e._UZ(17,"textarea",12),e.qZA()()(),e.TgZ(18,"div",13)(19,"button",14),e.NdJ("click",function(){return i.close()}),e._uU(20," H\u1ee7y "),e.qZA(),e.TgZ(21,"button",15),e.NdJ("click",function(){return i.ok()}),e._uU(22," X\xe1c nh\u1eadn "),e.qZA()()()),2&t&&(e.xp6(3),e.Oqu(i.title),e.xp6(9),e.Q6J("innerHTML",i.body,e.oJD),e.xp6(5),e.Q6J("formControl",i.remarkControl),e.xp6(4),e.Q6J("disabled",i.remarkControl.invalid||!(null!=i.remarkControl.value&&i.remarkControl.value.trim())))},dependencies:[l.ez,m.AxE,m.Sm8,_.N8,_.Xq,p.u5,p.Fj,p.JJ,p.UX,p.oH],encapsulation:2}),n})();var te=s(67534),Y=s(44890),A=s(40899),q=s(80429),Q=s(15439),ne=s(88996),ie=s(95577),I=s(54004),re=s(64307),H=s(18505),S=s(28746),oe=s(39300),ae=s(63900),G=s(80529),de=s(88001),B=s(50494),u=s(87067);let K=(()=>{class n{}return(0,c.gn)([(0,u.C)()],n.prototype,"status",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"data",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"objectError",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"traceId",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"errorCode",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"success",void 0),n})();var k=s(43429);let ce=(()=>{class n{}return(0,c.gn)([(0,u.C)()],n.prototype,"status",void 0),(0,c.gn)([(0,k.D)(()=>se),(0,u.C)()],n.prototype,"data",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"objectError",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"traceId",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"errorCode",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"success",void 0),n})(),se=(()=>{class n{}return(0,c.gn)([(0,u.C)()],n.prototype,"orderId",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"state",void 0),(0,c.gn)([(0,k.D)(()=>ue),(0,u.C)()],n.prototype,"totalCharge",void 0),(0,c.gn)([(0,k.D)(()=>le),(0,u.C)()],n.prototype,"journeyInfos",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"timeBook",void 0),n})(),le=(()=>{class n{}return(0,c.gn)([(0,u.C)()],n.prototype,"airline",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"startPoint",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"endPoint",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"departureTime",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"numPax",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"nameBooked",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"totalPrice",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"pnr",void 0),n})(),ue=(()=>{class n{}return(0,c.gn)([(0,u.C)()],n.prototype,"totalFare",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"totalPrice",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"totalDiscount",void 0),n})(),pe=(()=>{class n{}return(0,c.gn)([(0,u.C)()],n.prototype,"status",void 0),(0,c.gn)([(0,k.D)(()=>me),(0,u.C)()],n.prototype,"data",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"objectError",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"traceId",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"errorCode",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"success",void 0),n})(),me=(()=>{class n{}return(0,c.gn)([(0,u.C)()],n.prototype,"orderId",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"state",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"email",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"phoneNumber",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"totalFare",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"totalCharge",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"numPax",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"timeBook",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"paymentMethod",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"paxName",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"gender",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"paxType",void 0),(0,c.gn)([(0,u.C)()],n.prototype,"birthday",void 0),n})();const D={headers:new G.WM({"Content-Type":"application/json"})};let w=(()=>{class n{constructor(t,i){this.http=t,this.appConfig=i}getListOrder(t){return this.http.post(this.appConfig.apiUrl+"bc-server/get-list-order",JSON.stringify(t),D).pipe((0,I.U)(i=>(0,B.yE)(ce,i,{excludeExtraneousValues:!0})))}getInfoOrderDetail(t){return this.http.post(this.appConfig.apiUrl+"bc-server/get-info-order-detail",JSON.stringify({orderId:t}),D).pipe((0,I.U)(i=>(0,B.yE)(K,i,{excludeExtraneousValues:!0})))}updateStateOrder(t){return this.http.post(this.appConfig.apiUrl+"bc-server/update-state-order",JSON.stringify(t),D).pipe((0,I.U)(i=>(0,B.yE)(K,i,{excludeExtraneousValues:!0})))}approveIssuedPrnOrder(t){return this.http.post(this.appConfig.apiUrl+"bc-server/approve-issued-pnr-order",JSON.stringify(t),D)}getListOrderToExport(t){return this.http.post(this.appConfig.apiUrl+"bc-server/get-list-order-to-export",JSON.stringify(t),D).pipe((0,I.U)(i=>(0,B.yE)(pe,i,{excludeExtraneousValues:!0})))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(G.eN),e.LFG(de.qB))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var N=s(82761),z=s(62733),V=s(28490),X=s(62331),ge=s(58273);function fe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.confirmPayment())}),e._uU(1," X\xe1c nh\u1eadn thanh to\xe1n "),e.qZA()}}function _e(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.confirmRefund())}),e._uU(1," X\xe1c nh\u1eadn ho\xe0n ti\u1ec1n "),e.qZA()}}function ve(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.confirmIssueFailed())}),e._uU(1," X\xe1c nh\u1eadn xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i "),e.qZA()}}function he(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.confirmIssueSuccess())}),e._uU(1," X\xe1c nh\u1eadn xu\u1ea5t v\xe9 th\xe0nh c\xf4ng "),e.qZA()}}function xe(n,o){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,fe,2,0,"button",21),e.YNc(2,_e,2,0,"button",21),e.YNc(3,ve,2,0,"button",22),e.YNc(4,he,2,0,"button",21),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","PAYMENT_PROCESSING"===(null==t.dataOrder.orderInfo?null:t.dataOrder.orderInfo.state)&&t.isViewUpdateOrder),e.xp6(1),e.Q6J("ngIf","FAILED"===(null==t.dataOrder.orderInfo?null:t.dataOrder.orderInfo.state)&&t.isViewRefundTopup),e.xp6(1),e.Q6J("ngIf","PAYMENT_SUCCESS"===(null==t.dataOrder.orderInfo?null:t.dataOrder.orderInfo.state)&&t.isViewUpdateOrder),e.xp6(1),e.Q6J("ngIf","PAYMENT_SUCCESS"===(null==t.dataOrder.orderInfo?null:t.dataOrder.orderInfo.state)&&t.isViewUpdateOrder)}}function ye(n,o){if(1&n&&(e.TgZ(0,"div",38),e._UZ(1,"cf-icon",39),e.TgZ(2,"span",40),e._uU(3),e.qZA()()),2&n){const t=o.ngIf;e.Q6J("ngClass",t.bgColor),e.xp6(1),e.Q6J("icon",t.icon),e.xp6(2),e.hij(" ",t.name," ")}}function Te(n,o){if(1&n&&(e.TgZ(0,"div",24)(1,"div",25),e._UZ(2,"div",26),e.TgZ(3,"div",27),e._uU(4,"T\u1ed5ng quan \u0111\u01a1n h\xe0ng"),e.qZA()(),e.TgZ(5,"div",28)(6,"div",29)(7,"div",24)(8,"div",30)(9,"div",31),e._UZ(10,"cf-icon",32),e.TgZ(11,"div",33),e._uU(12," M\xe3 \u0111\u01a1n h\xe0ng: "),e.qZA(),e.TgZ(13,"span",34),e._uU(14),e.qZA()(),e.TgZ(15,"div",31),e._UZ(16,"cf-icon",35),e.TgZ(17,"div",33),e._uU(18," Gi\u1ea3m gi\xe1 \u0111\u1ea7u book "),e.qZA(),e.TgZ(19,"span",34),e._uU(20),e.ALo(21,"replace"),e.ALo(22,"number"),e.qZA()(),e.TgZ(23,"div",31),e._UZ(24,"cf-icon",35),e.TgZ(25,"div",33),e._uU(26," T\u1ed5ng ti\u1ec1n (\u0110\xe3 g\u1ed3m VAT): "),e.qZA(),e.TgZ(27,"span",34),e._uU(28),e.ALo(29,"replace"),e.ALo(30,"number"),e.qZA()(),e.TgZ(31,"div",31),e._UZ(32,"cf-icon",36),e.TgZ(33,"div",33),e._uU(34," Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n: "),e.qZA(),e.TgZ(35,"span",34),e._uU(36),e.qZA()(),e.TgZ(37,"div",31),e._UZ(38,"cf-icon",36),e.TgZ(39,"div",33),e._uU(40," Tr\u1ea1ng th\xe1i: "),e.qZA(),e.YNc(41,ye,4,3,"div",37),e.qZA()()()()()()),2&n){const t=e.oxw();e.xp6(14),e.Oqu(t.dataOrder.orderInfo.orderId),e.xp6(6),e.hij(" -",e.Dn7(21,5,e.lcZ(22,9,t.dataOrder.orderInfo.totalPromoBook),",",".")," \u0111 "),e.xp6(8),e.hij(" ",e.Dn7(29,11,e.lcZ(30,15,t.dataOrder.orderInfo.totalPrice),",",".")," \u0111 "),e.xp6(8),e.hij("",t.dataOrder.orderInfo.paymentMethod," "),e.xp6(5),e.Q6J("ngIf",t.configStatus[t.dataOrder.orderInfo.state])}}function Ze(n,o){if(1&n&&(e.TgZ(0,"div",24)(1,"div",25),e._UZ(2,"div",26),e.TgZ(3,"div",27),e._uU(4,"Th\xf4ng tin li\xean h\u1ec7"),e.qZA()(),e.TgZ(5,"div",28)(6,"div",41)(7,"div",42),e._UZ(8,"cf-icon",43),e.TgZ(9,"span",44),e._uU(10,"H\u1ecd v\xe0 t\xean:"),e.qZA(),e.TgZ(11,"span",45),e._uU(12),e.qZA()(),e.TgZ(13,"div",42),e._UZ(14,"cf-icon",46),e.TgZ(15,"span",44),e._uU(16,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i:"),e.qZA(),e.TgZ(17,"span",45),e._uU(18),e.qZA()(),e.TgZ(19,"div",42),e._UZ(20,"cf-icon",47),e.TgZ(21,"span",44),e._uU(22,"Email:"),e.qZA(),e.TgZ(23,"span",45),e._uU(24),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(12),e.hij(" ",t.dataOrder.contact.name||"N/A"," "),e.xp6(6),e.AsE(" ",t.dataOrder.contact.phonePrefix,"",t.dataOrder.contact.phone||"N/A"," "),e.xp6(6),e.hij(" ",t.dataOrder.contact.email||"N/A"," ")}}function Ae(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",52),e._uU(2),e.qZA(),e.TgZ(3,"td",53),e._uU(4),e.ALo(5,"mapper"),e.qZA(),e.TgZ(6,"td",54),e._uU(7),e.ALo(8,"mapper"),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw(2);e.xp6(2),e.hij(" ",t.firstName+" "+t.lastName||"N/A"," "),e.xp6(2),e.hij(" ",e.xi3(5,3,t.type,i.formatterPassengerType)||"N/A"," "),e.xp6(3),e.hij(" ",e.xi3(8,6,t.gender,i.formatterGender)||"N/A"," ")}}function be(n,o){if(1&n&&(e.TgZ(0,"div",24)(1,"div",25),e._UZ(2,"div",26),e.TgZ(3,"div",27),e._uU(4,"Th\xf4ng tin h\xe0nh kh\xe1ch"),e.qZA()(),e.TgZ(5,"div",28)(6,"div",48)(7,"table",49)(8,"thead")(9,"tr")(10,"th",50),e._uU(11," H\u1ecd t\xean "),e.qZA(),e.TgZ(12,"th",50),e._uU(13," Lo\u1ea1i kh\xe1ch "),e.qZA(),e.TgZ(14,"th",50),e._uU(15," Gi\u1edbi t\xednh "),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,Ae,9,9,"tr",51),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(17),e.Q6J("ngForOf",t.dataOrder.listPax)}}function Ce(n,o){if(1&n&&(e.TgZ(0,"div",80)(1,"div",81),e._uU(2),e.qZA(),e.TgZ(3,"div",81),e._uU(4),e.qZA(),e.TgZ(5,"div",81),e._uU(6),e.ALo(7,"date"),e.ALo(8,"date"),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.AsE(" ",t.airline,"",t.flightNumber," "),e.xp6(2),e.AsE(" ",t.startPoint," - ",t.endPoint," "),e.xp6(2),e.AsE(" ",e.xi3(7,6,1e3*t.departureTime,"HH:mm")," - ",e.xi3(8,9,1e3*t.departureTime,"dd/MM/yyyy")," ")}}function Ee(n,o){if(1&n&&(e.TgZ(0,"div",82)(1,"div"),e._uU(2," M\xe3 \u0111\u1eb7t ch\u1ed7 "),e.qZA(),e.TgZ(3,"div",83),e._uU(4),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(4),e.AsE(" ",t.pnr||"---","","ISSUED"===t.statePnr?" (\u0110\xe3 xu\u1ea5t v\xe9)":" (\u0110\xe3 gi\u1eef ch\u1ed7)"," ")}}function Oe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",84),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.onApproveIssuedPrnOrder(r))}),e._uU(1," Xu\u1ea5t v\xe9 "),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("disabled","ISSUED"===t.statePnr||!t.statePnr||i.isLoadingApproveIssued)}}function Ie(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",52),e._uU(2),e.qZA(),e.TgZ(3,"td",53),e._uU(4),e.ALo(5,"mapper"),e.qZA(),e.TgZ(6,"td",54),e._uU(7),e.ALo(8,"mapper"),e.qZA(),e.TgZ(9,"td",54),e._uU(10),e.ALo(11,"replace"),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"td",85),e._uU(14),e.ALo(15,"replace"),e.ALo(16,"number"),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw(3);e.xp6(2),e.AsE(" ",t.firstName," ",t.lastName," "),e.xp6(2),e.hij(" ",e.xi3(5,6,t.type,i.formatterPassengerType)," "),e.xp6(3),e.hij(" ",e.xi3(8,9,t.gender,i.formatterGender)," "),e.xp6(3),e.hij(" ",t.promoPrice?""+e.Dn7(11,12,e.lcZ(12,16,t.promoPrice),",","."):0," "),e.xp6(4),e.hij(" ",e.Dn7(15,18,e.lcZ(16,22,t.totalFare),",",".")," \u0111 ")}}function De(n,o){if(1&n&&(e.TgZ(0,"div",86)(1,"div",87)(2,"div",88),e._uU(3,"H\u1ecd t\xean"),e.qZA(),e.TgZ(4,"div",89),e._uU(5),e.qZA()(),e.TgZ(6,"div",87)(7,"div",88),e._uU(8,"Lo\u1ea1i kh\xe1ch"),e.qZA(),e.TgZ(9,"div",89),e._uU(10),e.ALo(11,"mapper"),e.qZA()(),e.TgZ(12,"div",87)(13,"div",88),e._uU(14,"Gi\u1edbi t\xednh"),e.qZA(),e.TgZ(15,"div",89),e._uU(16),e.ALo(17,"mapper"),e.qZA()(),e.TgZ(18,"div",87)(19,"div",88),e._uU(20,"Khuy\u1ebfn m\xe3i/pax"),e.qZA(),e.TgZ(21,"div",89),e._uU(22),e.ALo(23,"replace"),e.ALo(24,"number"),e.qZA()(),e.TgZ(25,"div",87)(26,"div",88),e._uU(27,"Gi\xe1 v\xe9"),e.qZA(),e.TgZ(28,"div",89),e._uU(29),e.ALo(30,"replace"),e.ALo(31,"number"),e.qZA()()()),2&n){const t=o.$implicit,i=e.oxw(3);e.xp6(5),e.AsE("",t.firstName," ",t.lastName," "),e.xp6(5),e.hij(" ",e.xi3(11,6,t.type,i.formatterPassengerType)||"N/A",""),e.xp6(6),e.Oqu(e.xi3(17,9,t.gender,i.formatterGender)||"N/A"),e.xp6(6),e.hij("-",e.Dn7(23,12,e.lcZ(24,16,t.promoPrice),",",".")||"N/A",""),e.xp6(7),e.Oqu(e.Dn7(30,18,e.lcZ(31,22,t.totalFare),",",".")||"N/A")}}function Ue(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",57)(1,"div",58)(2,"div",59),e._UZ(3,"img",60),e.ALo(4,"mapper"),e.TgZ(5,"div",61),e._uU(6),e.qZA()(),e.TgZ(7,"div",62)(8,"div",59)(9,"div",63)(10,"div",59)(11,"div",64),e._uU(12),e.ALo(13,"mapper"),e.qZA()(),e.TgZ(14,"div"),e._UZ(15,"cf-icon",65),e.qZA(),e.TgZ(16,"div",59)(17,"div",66),e._uU(18),e.ALo(19,"mapper"),e.qZA()()(),e.TgZ(20,"div",67),e.YNc(21,Ce,9,12,"div",68),e.qZA()(),e.YNc(22,Ee,5,2,"div",69),e.qZA()(),e.TgZ(23,"div",70)(24,"button",71),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.openBookingPage(a))}),e._uU(25," M\u1edf booking "),e.qZA(),e.YNc(26,Oe,2,1,"button",72),e.qZA(),e.TgZ(27,"table",73)(28,"thead")(29,"tr")(30,"th",50),e._uU(31," H\u1ecd t\xean "),e.qZA(),e.TgZ(32,"th",50),e._uU(33," Lo\u1ea1i kh\xe1ch "),e.qZA(),e.TgZ(34,"th",50),e._uU(35," Gi\u1edbi t\xednh "),e.qZA(),e.TgZ(36,"th",50),e._uU(37," Khuy\u1ebfn m\xe3i/pax "),e.qZA(),e.TgZ(38,"th",74),e._uU(39," Gi\xe1 v\xe9 "),e.qZA()()(),e.TgZ(40,"tbody"),e.YNc(41,Ie,17,24,"tr",51),e.qZA()(),e.TgZ(42,"div",75),e.YNc(43,De,32,24,"div",76),e.qZA(),e.TgZ(44,"div",77)(45,"div",78),e._uU(46," T\u1ed5ng ti\u1ec1n: "),e.qZA(),e.TgZ(47,"div",79),e._uU(48),e.ALo(49,"replace"),e.ALo(50,"number"),e.ALo(51,"mapper"),e.qZA()(),e.TgZ(52,"div",77)(53,"div",78),e._uU(54," Sau gi\u1ea3m: "),e.qZA(),e.TgZ(55,"div",79),e._uU(56),e.ALo(57,"replace"),e.ALo(58,"number"),e.ALo(59,"mapper"),e.qZA()()()}if(2&n){const t=o.$implicit,i=e.oxw(2);e.xp6(3),e.Q6J("src",e.xi3(4,15,t.airline,i.getAirlineLogoByCode),e.LSH)("alt",t.airline),e.xp6(3),e.hij(" ",t.airline," "),e.xp6(6),e.AsE(" ",e.xi3(13,18,t.startPoint,i.getLocationData)," (",t.startPoint,") "),e.xp6(6),e.AsE(" ",e.xi3(19,21,t.endPoint,i.getLocationData)," ( ",t.endPoint,") "),e.xp6(3),e.Q6J("ngForOf",t.segments),e.xp6(1),e.Q6J("ngIf",t.pnr),e.xp6(2),e.Q6J("disabled",!t.pnr),e.xp6(2),e.Q6J("ngIf",i.isApproveIssuedBC),e.xp6(15),e.Q6J("ngForOf",t.paxList),e.xp6(2),e.Q6J("ngForOf",t.paxList),e.xp6(5),e.hij(" ",e.Dn7(49,24,e.lcZ(50,28,e.xi3(51,30,t.paxList,i.sumPriceByPaxList)),",",".")," \u0111 "),e.xp6(8),e.hij(" ",e.Dn7(57,33,e.lcZ(58,37,e.xi3(59,39,t.paxList,i.sumPriceAfterPromo)),",",".")," \u0111 ")}}function Be(n,o){if(1&n&&(e.TgZ(0,"div",24)(1,"div",25),e._UZ(2,"div",26),e.TgZ(3,"div",27),e._uU(4,"Th\xf4ng tin h\xe0nh tr\xecnh"),e.qZA()(),e.TgZ(5,"div",28)(6,"div",55),e.YNc(7,Ue,60,42,"div",56),e.qZA()()()),2&n){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.dataOrder.listJourney)}}const O=function(){return[]};function ke(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",90)(1,"div",91)(2,"cf-select",92),e.NdJ("selectedChange",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onChangeRemark())}),e.TgZ(3,"label",93),e._uU(4,"M\xe3 \u0111\u1eb7t ch\u1ed7"),e.qZA()()(),e.TgZ(5,"div",94)(6,"cf-input-group",95),e._UZ(7,"input",96),e.qZA(),e.TgZ(8,"button",97),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onRemarkBooking())}),e.TgZ(9,"span"),e._uU(10,"G\u1eedi"),e.qZA(),e._UZ(11,"cf-icon",98),e.qZA()(),e._UZ(12,"div",14),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.formRemark),e.xp6(2),e.Q6J("status","default")("data",t.listBookingCode||e.DdM(6,O))("allowSearch",!1),e.xp6(4),e.Q6J("status","default"),e.xp6(2),e.Q6J("disabled",t.formRemark.invalid||"T\u1ea5t c\u1ea3"===t.formRemark.value.bookingCode)}}function Me(n,o){if(1&n&&(e.TgZ(0,"div",103)(1,"div",104)(2,"div"),e._UZ(3,"img",105),e.qZA(),e.TgZ(4,"div")(5,"div",106),e._uU(6),e.qZA(),e.TgZ(7,"div",107),e._uU(8),e.qZA()()(),e.TgZ(9,"label",108),e._uU(10),e.qZA()()),2&n){const t=o.$implicit;e.xp6(3),e.Q6J("src",t.userAvatar||"https://cheapflighttest.s3.ap-southeast-1.amazonaws.com/avarta-default.jpg",e.LSH),e.xp6(3),e.AsE("",t.userDisplayName," - ",t.pnr,""),e.xp6(2),e.Oqu(t.noteTime),e.xp6(2),e.hij(" ",t.description," ")}}function qe(n,o){if(1&n&&(e.TgZ(0,"div",101),e.YNc(1,Me,11,5,"div",102),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.listTickRemarks||e.DdM(1,O))}}function Se(n,o){1&n&&(e.TgZ(0,"div")(1,"div",109)(2,"div",110)(3,"div",111),e._UZ(4,"div",112)(5,"div",112),e.qZA(),e.TgZ(6,"div",111),e._UZ(7,"div",112)(8,"div",112),e.qZA()()()())}function we(n,o){if(1&n&&(e.TgZ(0,"div",99),e.YNc(1,qe,2,2,"div",100),e.YNc(2,Se,9,0,"div",19),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isLoadingRemark),e.xp6(1),e.Q6J("ngIf",t.isLoadingRemark)}}function Ne(n,o){if(1&n&&(e.TgZ(0,"div",113)(1,"div",104)(2,"div"),e._UZ(3,"img",105),e.qZA(),e.TgZ(4,"div")(5,"div",106),e._uU(6),e.qZA(),e.TgZ(7,"div",107),e._uU(8),e.ALo(9,"date"),e.qZA()()(),e.TgZ(10,"div",114)(11,"div",115),e._uU(12," Chuy\u1ec3n t\u1eeb tr\u1ea1ng th\xe1i "),e.TgZ(13,"span",116),e._uU(14),e.qZA(),e._uU(15," sang "),e.TgZ(16,"span",116),e._uU(17),e.qZA()(),e.TgZ(18,"div",115),e._uU(19),e.qZA()()()),2&n){const t=o.$implicit,i=e.oxw();e.xp6(3),e.Q6J("src","https://cheapflighttest.s3.ap-southeast-1.amazonaws.com/avarta-default.jpg",e.LSH),e.xp6(3),e.Oqu("BOOKER"===t.actionType?t.nameBooked:"H\u1ec7 th\u1ed1ng"),e.xp6(2),e.Oqu(e.xi3(9,6,t.timeAction,"HH:mm - dd/MM/yyyy")),e.xp6(6),e.Oqu(i.getStateDisplay(t.oldState)),e.xp6(3),e.Oqu(i.getStateDisplay(t.newState)),e.xp6(2),e.hij(" N\u1ed9i dung remark: ",t.noteChange," ")}}function Le(n,o){1&n&&(e.TgZ(0,"div",117)(1,"div"),e._UZ(2,"img",118),e.qZA(),e.TgZ(3,"div",119)(4,"div",120)(5,"div"),e._uU(6,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 hi\u1ec3n th\u1ecb"),e.qZA()()()())}function Je(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",124,128),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(1),a=e.oxw(2);return e.KtG(a.mobileTabChange("OVERVIEW",r))}),e._uU(2," T\u1ed5ng quan \u0111\u01a1n h\xe0ng "),e.qZA()}if(2&n){const t=e.oxw(2);e.ekj("text-secondary-3-4","OVERVIEW"===t.mobileTabMode)("!border-secondary-3-4","OVERVIEW"===t.mobileTabMode)("bg-secondary-3-1","OVERVIEW"===t.mobileTabMode)}}function Fe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",124,129),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(1),a=e.oxw(2);return e.KtG(a.mobileTabChange("CONTACT",r))}),e._uU(2," Th\xf4ng tin li\xean h\u1ec7 "),e.qZA()}if(2&n){const t=e.oxw(2);e.ekj("text-secondary-3-4","CONTACT"===t.mobileTabMode)("!border-secondary-3-4","CONTACT"===t.mobileTabMode)("bg-secondary-3-1","CONTACT"===t.mobileTabMode)}}function Pe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",124,130),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(1),a=e.oxw(2);return e.KtG(a.mobileTabChange("PAX",r))}),e._uU(2," Th\xf4ng tin h\xe0nh kh\xe1ch "),e.qZA()}if(2&n){const t=e.oxw(2);e.ekj("text-secondary-3-4","PAX"===t.mobileTabMode)("!border-secondary-3-4","PAX"===t.mobileTabMode)("bg-secondary-3-1","PAX"===t.mobileTabMode)}}function Re(n,o){if(1&n&&(e.TgZ(0,"div",38),e._UZ(1,"cf-icon",39),e.TgZ(2,"span",40),e._uU(3),e.qZA()()),2&n){const t=o.ngIf;e.Q6J("ngClass",t.bgColor),e.xp6(1),e.Q6J("icon",t.icon),e.xp6(2),e.hij(" ",t.name," ")}}function je(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(4);return e.KtG(r.confirmPayment())}),e._uU(1," X\xe1c nh\u1eadn thanh to\xe1n "),e.qZA()}}function Ye(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(4);return e.KtG(r.confirmRefund())}),e._uU(1," X\xe1c nh\u1eadn ho\xe0n ti\u1ec1n "),e.qZA()}}function Qe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(4);return e.KtG(r.confirmIssueFailed())}),e._uU(1," X\xe1c nh\u1eadn xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i "),e.qZA()}}function He(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(4);return e.KtG(r.confirmIssueSuccess())}),e._uU(1," X\xe1c nh\u1eadn xu\u1ea5t v\xe9 th\xe0nh c\xf4ng "),e.qZA()}}function Ge(n,o){if(1&n&&(e.TgZ(0,"div",134),e.YNc(1,je,2,0,"button",21),e.YNc(2,Ye,2,0,"button",21),e.YNc(3,Qe,2,0,"button",22),e.YNc(4,He,2,0,"button",21),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf","PAYMENT_PROCESSING"===(null==t.dataOrder.orderInfo?null:t.dataOrder.orderInfo.state)&&t.isViewUpdateOrder),e.xp6(1),e.Q6J("ngIf","FAILED"===(null==t.dataOrder.orderInfo?null:t.dataOrder.orderInfo.state)&&t.isViewRefundTopup),e.xp6(1),e.Q6J("ngIf","PAYMENT_SUCCESS"===(null==t.dataOrder.orderInfo?null:t.dataOrder.orderInfo.state)&&t.isViewUpdateOrder),e.xp6(1),e.Q6J("ngIf","PAYMENT_SUCCESS"===(null==t.dataOrder.orderInfo?null:t.dataOrder.orderInfo.state)&&t.isViewUpdateOrder)}}function Ke(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",131)(1,"div",28)(2,"div",29)(3,"div",24)(4,"div",30)(5,"div",31),e._UZ(6,"cf-icon",32),e.TgZ(7,"div",33),e._uU(8," M\xe3 \u0111\u01a1n h\xe0ng: "),e.qZA(),e.TgZ(9,"span",34),e._uU(10),e.qZA()(),e.TgZ(11,"div",31),e._UZ(12,"cf-icon",35),e.TgZ(13,"div",33),e._uU(14," Gi\u1ea3m gi\xe1 \u0111\u1ea7u book "),e.qZA(),e.TgZ(15,"span",34),e._uU(16),e.ALo(17,"replace"),e.ALo(18,"number"),e.qZA()(),e.TgZ(19,"div",31),e._UZ(20,"cf-icon",35),e.TgZ(21,"div",33),e._uU(22," T\u1ed5ng ti\u1ec1n (\u0110\xe3 g\u1ed3m VAT): "),e.qZA(),e.TgZ(23,"span",34),e._uU(24),e.ALo(25,"replace"),e.ALo(26,"number"),e.qZA()(),e.TgZ(27,"div",31),e._UZ(28,"cf-icon",36),e.TgZ(29,"div",33),e._uU(30," Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n: "),e.qZA(),e.TgZ(31,"span",34),e._uU(32),e.qZA()(),e.TgZ(33,"div",31),e._UZ(34,"cf-icon",36),e.TgZ(35,"div",33),e._uU(36," Tr\u1ea1ng th\xe1i: "),e.qZA(),e.YNc(37,Re,4,3,"div",37),e.qZA()()()()(),e.TgZ(38,"div",132),e.YNc(39,Ge,5,4,"div",133),e.TgZ(40,"button",4),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.back())}),e._uU(41," Quay l\u1ea1i "),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(10),e.Oqu(t.dataOrder.orderInfo.orderId),e.xp6(6),e.hij(" -",e.Dn7(17,6,e.lcZ(18,10,t.dataOrder.orderInfo.totalPromoBook),",",".")," \u0111 "),e.xp6(8),e.hij(" ",e.Dn7(25,12,e.lcZ(26,16,t.dataOrder.orderInfo.totalPrice),",",".")," \u0111 "),e.xp6(8),e.hij("",t.dataOrder.orderInfo.paymentMethod," "),e.xp6(5),e.Q6J("ngIf",t.configStatus[t.dataOrder.orderInfo.state]),e.xp6(2),e.Q6J("ngIf",null==t.dataOrder?null:t.dataOrder.orderInfo)}}function ze(n,o){if(1&n&&(e.TgZ(0,"div",131)(1,"div",28)(2,"div",41)(3,"div",42),e._UZ(4,"cf-icon",43),e.TgZ(5,"span",44),e._uU(6,"H\u1ecd v\xe0 t\xean:"),e.qZA(),e.TgZ(7,"span",45),e._uU(8),e.qZA()(),e.TgZ(9,"div",42),e._UZ(10,"cf-icon",46),e.TgZ(11,"span",44),e._uU(12,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i:"),e.qZA(),e.TgZ(13,"span",45),e._uU(14),e.qZA()(),e.TgZ(15,"div",42),e._UZ(16,"cf-icon",47),e.TgZ(17,"span",44),e._uU(18,"Email:"),e.qZA(),e.TgZ(19,"span",45),e._uU(20),e.qZA()()()()()),2&n){const t=e.oxw(2);e.xp6(8),e.hij(" ",t.dataOrder.contact.name||"N/A"," "),e.xp6(6),e.AsE(" ",t.dataOrder.contact.phonePrefix,"",t.dataOrder.contact.phone||"N/A"," "),e.xp6(6),e.hij(" ",t.dataOrder.contact.email||"N/A"," ")}}function Ve(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",52),e._uU(2),e.qZA(),e.TgZ(3,"td",53),e._uU(4),e.ALo(5,"mapper"),e.qZA(),e.TgZ(6,"td",54),e._uU(7),e.ALo(8,"mapper"),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw(3);e.xp6(2),e.hij(" ",t.firstName+" "+t.lastName||"N/A"," "),e.xp6(2),e.hij(" ",e.xi3(5,3,t.type,i.formatterPassengerType)||"N/A"," "),e.xp6(3),e.hij(" ",e.xi3(8,6,t.gender,i.formatterGender)||"N/A"," ")}}function Xe(n,o){if(1&n&&(e.TgZ(0,"div",131)(1,"div",28)(2,"div",48)(3,"table",49)(4,"thead")(5,"tr")(6,"th",50),e._uU(7," H\u1ecd t\xean "),e.qZA(),e.TgZ(8,"th",50),e._uU(9," Lo\u1ea1i kh\xe1ch "),e.qZA(),e.TgZ(10,"th",50),e._uU(11," Gi\u1edbi t\xednh "),e.qZA()()(),e.TgZ(12,"tbody"),e.YNc(13,Ve,9,9,"tr",51),e.qZA()()()()()),2&n){const t=e.oxw(2);e.xp6(13),e.Q6J("ngForOf",t.dataOrder.listPax)}}function $e(n,o){if(1&n&&(e.TgZ(0,"div",80)(1,"div",81),e._uU(2),e.qZA(),e.TgZ(3,"div",81),e._uU(4),e.qZA(),e.TgZ(5,"div",81),e._uU(6),e.ALo(7,"date"),e.ALo(8,"date"),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.AsE(" ",t.airline,"",t.flightNumber," "),e.xp6(2),e.AsE(" ",t.startPoint," - ",t.endPoint," "),e.xp6(2),e.AsE(" ",e.xi3(7,6,1e3*t.departureTime,"HH:mm")," - ",e.xi3(8,9,1e3*t.departureTime,"dd/MM/yyyy")," ")}}function We(n,o){if(1&n&&(e.TgZ(0,"div",82)(1,"div"),e._uU(2," M\xe3 \u0111\u1eb7t ch\u1ed7 "),e.qZA(),e.TgZ(3,"div",83),e._uU(4),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(4),e.AsE(" ",t.pnr||"---","","ISSUED"===t.statePnr?" (\u0110\xe3 xu\u1ea5t v\xe9)":" (\u0110\xe3 gi\u1eef ch\u1ed7)"," ")}}function et(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",84),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,a=e.oxw(3);return e.KtG(a.onApproveIssuedPrnOrder(r))}),e._uU(1," Xu\u1ea5t v\xe9 "),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("disabled","ISSUED"===t.statePnr||!t.statePnr||i.isLoadingApproveIssued)}}function tt(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",52),e._uU(2),e.qZA(),e.TgZ(3,"td",53),e._uU(4),e.ALo(5,"mapper"),e.qZA(),e.TgZ(6,"td",54),e._uU(7),e.ALo(8,"mapper"),e.qZA(),e.TgZ(9,"td",54),e._uU(10),e.ALo(11,"replace"),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"td",85),e._uU(14),e.ALo(15,"replace"),e.ALo(16,"number"),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw(4);e.xp6(2),e.AsE(" ",t.firstName," ",t.lastName," "),e.xp6(2),e.hij(" ",e.xi3(5,6,t.type,i.formatterPassengerType)," "),e.xp6(3),e.hij(" ",e.xi3(8,9,t.gender,i.formatterGender)," "),e.xp6(3),e.hij(" ",t.promoPrice?""+e.Dn7(11,12,e.lcZ(12,16,t.promoPrice),",","."):0," "),e.xp6(4),e.hij(" ",e.Dn7(15,18,e.lcZ(16,22,t.totalFare),",",".")," \u0111 ")}}function nt(n,o){if(1&n&&(e.TgZ(0,"div",86)(1,"div",87)(2,"div",88),e._uU(3,"H\u1ecd t\xean"),e.qZA(),e.TgZ(4,"div",89),e._uU(5),e.qZA()(),e.TgZ(6,"div",87)(7,"div",88),e._uU(8,"Lo\u1ea1i kh\xe1ch"),e.qZA(),e.TgZ(9,"div",89),e._uU(10),e.ALo(11,"mapper"),e.qZA()(),e.TgZ(12,"div",87)(13,"div",88),e._uU(14,"Gi\u1edbi t\xednh"),e.qZA(),e.TgZ(15,"div",89),e._uU(16),e.ALo(17,"mapper"),e.qZA()(),e.TgZ(18,"div",87)(19,"div",88),e._uU(20,"Khuy\u1ebfn m\xe3i/pax"),e.qZA(),e.TgZ(21,"div",89),e._uU(22),e.ALo(23,"replace"),e.ALo(24,"number"),e.qZA()(),e.TgZ(25,"div",87)(26,"div",88),e._uU(27,"Gi\xe1 v\xe9"),e.qZA(),e.TgZ(28,"div",89),e._uU(29),e.ALo(30,"replace"),e.ALo(31,"number"),e.qZA()()()),2&n){const t=o.$implicit,i=e.oxw(4);e.xp6(5),e.AsE("",t.firstName," ",t.lastName," "),e.xp6(5),e.hij(" ",e.xi3(11,6,t.type,i.formatterPassengerType)||"N/A",""),e.xp6(6),e.Oqu(e.xi3(17,9,t.gender,i.formatterGender)||"N/A"),e.xp6(6),e.hij("-",e.Dn7(23,12,e.lcZ(24,16,t.promoPrice),",",".")||"N/A",""),e.xp6(7),e.Oqu(e.Dn7(30,18,e.lcZ(31,22,t.totalFare),",",".")||"N/A")}}function it(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",57)(1,"div",58)(2,"div",59),e._UZ(3,"img",60),e.ALo(4,"mapper"),e.TgZ(5,"div",61),e._uU(6),e.qZA()(),e.TgZ(7,"div",62)(8,"div",59)(9,"div",63)(10,"div",59)(11,"div",64),e._uU(12),e.ALo(13,"mapper"),e.qZA()(),e.TgZ(14,"div"),e._UZ(15,"cf-icon",65),e.qZA(),e.TgZ(16,"div",59)(17,"div",66),e._uU(18),e.ALo(19,"mapper"),e.qZA()()(),e.TgZ(20,"div",67),e.YNc(21,$e,9,12,"div",68),e.qZA()(),e.YNc(22,We,5,2,"div",69),e.qZA()(),e.TgZ(23,"div",70)(24,"button",71),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.openBookingPage(a))}),e._uU(25," M\u1edf booking "),e.qZA(),e.YNc(26,et,2,1,"button",72),e.qZA(),e.TgZ(27,"table",73)(28,"thead")(29,"tr")(30,"th",50),e._uU(31," H\u1ecd t\xean "),e.qZA(),e.TgZ(32,"th",50),e._uU(33," Lo\u1ea1i kh\xe1ch "),e.qZA(),e.TgZ(34,"th",50),e._uU(35," Gi\u1edbi t\xednh "),e.qZA(),e.TgZ(36,"th",50),e._uU(37," Khuy\u1ebfn m\xe3i/pax "),e.qZA(),e.TgZ(38,"th",74),e._uU(39," Gi\xe1 v\xe9 "),e.qZA()()(),e.TgZ(40,"tbody"),e.YNc(41,tt,17,24,"tr",51),e.qZA()(),e.TgZ(42,"div",135),e.YNc(43,nt,32,24,"div",76),e.qZA(),e.TgZ(44,"div",77)(45,"div",78),e._uU(46," T\u1ed5ng ti\u1ec1n: "),e.qZA(),e.TgZ(47,"div",79),e._uU(48),e.ALo(49,"replace"),e.ALo(50,"number"),e.ALo(51,"mapper"),e.qZA()(),e.TgZ(52,"div",77)(53,"div",78),e._uU(54," Sau gi\u1ea3m: "),e.qZA(),e.TgZ(55,"div",79),e._uU(56),e.ALo(57,"replace"),e.ALo(58,"number"),e.ALo(59,"mapper"),e.qZA()()()}if(2&n){const t=o.$implicit,i=e.oxw(3);e.xp6(3),e.Q6J("src",e.xi3(4,15,t.airline,i.getAirlineLogoByCode),e.LSH)("alt",t.airline),e.xp6(3),e.hij(" ",t.airline," "),e.xp6(6),e.AsE(" ",e.xi3(13,18,t.startPoint,i.getLocationData)," (",t.startPoint,") "),e.xp6(6),e.AsE(" ",e.xi3(19,21,t.endPoint,i.getLocationData)," ( ",t.endPoint,") "),e.xp6(3),e.Q6J("ngForOf",t.segments),e.xp6(1),e.Q6J("ngIf",t.pnr),e.xp6(2),e.Q6J("disabled",!t.pnr),e.xp6(2),e.Q6J("ngIf",i.isApproveIssuedBC),e.xp6(15),e.Q6J("ngForOf",t.paxList),e.xp6(2),e.Q6J("ngForOf",t.paxList),e.xp6(5),e.hij(" ",e.Dn7(49,24,e.lcZ(50,28,e.xi3(51,30,t.paxList,i.sumPriceByPaxList)),",",".")," \u0111 "),e.xp6(8),e.hij(" ",e.Dn7(57,33,e.lcZ(58,37,e.xi3(59,39,t.paxList,i.sumPriceAfterPromo)),",",".")," \u0111 ")}}function rt(n,o){if(1&n&&(e.TgZ(0,"div",131)(1,"div",28)(2,"div",55),e.YNc(3,it,60,42,"div",56),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",t.dataOrder.listJourney)}}function ot(n,o){if(1&n&&(e.TgZ(0,"div",103)(1,"div",104)(2,"div"),e._UZ(3,"img",105),e.qZA(),e.TgZ(4,"div")(5,"div",106),e._uU(6),e.qZA(),e.TgZ(7,"div",107),e._uU(8),e.qZA()()(),e.TgZ(9,"label",108),e._uU(10),e.qZA()()),2&n){const t=o.$implicit;e.xp6(3),e.Q6J("src",t.userAvatar||"https://cheapflighttest.s3.ap-southeast-1.amazonaws.com/avarta-default.jpg",e.LSH),e.xp6(3),e.AsE("",t.userDisplayName," - ",t.pnr,""),e.xp6(2),e.Oqu(t.noteTime),e.xp6(2),e.hij(" ",t.description," ")}}function at(n,o){if(1&n&&(e.TgZ(0,"div",101),e.YNc(1,ot,11,5,"div",102),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.listTickRemarks||e.DdM(1,O))}}function dt(n,o){1&n&&(e.TgZ(0,"div")(1,"div",109)(2,"div",110)(3,"div",111),e._UZ(4,"div",112)(5,"div",112),e.qZA(),e.TgZ(6,"div",111),e._UZ(7,"div",112)(8,"div",112),e.qZA()()()())}function ct(n,o){if(1&n&&(e.TgZ(0,"div",141),e.YNc(1,at,2,2,"div",100),e.YNc(2,dt,9,0,"div",19),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.isLoadingRemark),e.xp6(1),e.Q6J("ngIf",t.isLoadingRemark)}}function st(n,o){if(1&n&&(e.TgZ(0,"div",113)(1,"div",104)(2,"div"),e._UZ(3,"img",105),e.qZA(),e.TgZ(4,"div")(5,"div",106),e._uU(6),e.qZA(),e.TgZ(7,"div",107),e._uU(8),e.ALo(9,"date"),e.qZA()()(),e.TgZ(10,"div",114)(11,"div",115),e._uU(12," Chuy\u1ec3n t\u1eeb tr\u1ea1ng th\xe1i "),e.TgZ(13,"span",116),e._uU(14),e.qZA(),e._uU(15," sang "),e.TgZ(16,"span",116),e._uU(17),e.qZA()(),e.TgZ(18,"div",115),e._uU(19),e.qZA()()()),2&n){const t=o.$implicit,i=e.oxw(3);e.xp6(3),e.Q6J("src","https://cheapflighttest.s3.ap-southeast-1.amazonaws.com/avarta-default.jpg",e.LSH),e.xp6(3),e.Oqu("BOOKER"===t.actionType?t.nameBooked:"H\u1ec7 th\u1ed1ng"),e.xp6(2),e.Oqu(e.xi3(9,6,t.timeAction,"HH:mm - dd/MM/yyyy")),e.xp6(6),e.Oqu(i.getStateDisplay(t.oldState)),e.xp6(3),e.Oqu(i.getStateDisplay(t.newState)),e.xp6(2),e.hij(" N\u1ed9i dung remark: ",t.noteChange," ")}}function lt(n,o){1&n&&(e.TgZ(0,"div",117)(1,"div"),e._UZ(2,"img",118),e.qZA(),e.TgZ(3,"div",119)(4,"div",120)(5,"div"),e._uU(6,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 hi\u1ec3n th\u1ecb"),e.qZA()()()())}function ut(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",131)(1,"div",28)(2,"form",136)(3,"div",91)(4,"cf-select",92),e.NdJ("selectedChange",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onChangeRemark())}),e.TgZ(5,"label",93),e._uU(6,"M\xe3 \u0111\u1eb7t ch\u1ed7"),e.qZA()()(),e.TgZ(7,"div",137)(8,"cf-input-group",95),e._UZ(9,"input",96),e.qZA(),e.TgZ(10,"button",97),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onRemarkBooking())}),e.TgZ(11,"span"),e._uU(12,"G\u1eedi"),e.qZA(),e._UZ(13,"cf-icon",98),e.qZA()(),e._UZ(14,"div",14),e.qZA(),e.YNc(15,ct,3,2,"div",138),e._UZ(16,"div",139),e.TgZ(17,"div",140),e.YNc(18,st,20,9,"div",16),e.qZA(),e.YNc(19,lt,7,0,"div",17),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("formGroup",t.formRemark),e.xp6(2),e.Q6J("status","default")("data",t.listBookingCode||e.DdM(9,O))("allowSearch",!1),e.xp6(4),e.Q6J("status","default"),e.xp6(2),e.Q6J("disabled",t.formRemark.invalid||"T\u1ea5t c\u1ea3"===t.formRemark.value.bookingCode),e.xp6(5),e.Q6J("ngIf",!t.isLoadingRemark&&((null==t.listTickRemarks?null:t.listTickRemarks.length)||(null==t.dataOrder||null==t.dataOrder.orderInfo||null==t.dataOrder.orderInfo.trackingModifyList?null:t.dataOrder.orderInfo.trackingModifyList.length))),e.xp6(3),e.Q6J("ngForOf",(null==t.dataOrder||null==t.dataOrder.orderInfo?null:t.dataOrder.orderInfo.trackingModifyList)||e.DdM(10,O)),e.xp6(1),e.Q6J("ngIf",!(null!=t.dataOrder&&null!=t.dataOrder.orderInfo&&null!=t.dataOrder.orderInfo.trackingModifyList&&t.dataOrder.orderInfo.trackingModifyList.length))}}function pt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",121)(1,"div",122),e.YNc(2,Je,3,6,"div",123),e.YNc(3,Fe,3,6,"div",123),e.YNc(4,Pe,3,6,"div",123),e.TgZ(5,"div",124,125),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(6),a=e.oxw();return e.KtG(a.mobileTabChange("JOURNEY",r))}),e._uU(7," Th\xf4ng tin h\xe0nh tr\xecnh "),e.qZA(),e.TgZ(8,"div",124,126),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(9),a=e.oxw();return e.KtG(a.mobileTabChange("REMARK",r))}),e._uU(10," remark "),e.qZA()(),e.YNc(11,Ke,42,18,"div",127),e.YNc(12,ze,21,4,"div",127),e.YNc(13,Xe,14,1,"div",127),e.YNc(14,rt,4,1,"div",127),e.YNc(15,ut,20,11,"div",127),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.dataOrder.orderInfo),e.xp6(1),e.Q6J("ngIf",t.dataOrder.contact),e.xp6(1),e.Q6J("ngIf",null==t.dataOrder?null:t.dataOrder.listPax),e.xp6(1),e.ekj("text-secondary-3-4","JOURNEY"===t.mobileTabMode)("!border-secondary-3-4","JOURNEY"===t.mobileTabMode)("bg-secondary-3-1","JOURNEY"===t.mobileTabMode),e.xp6(3),e.ekj("text-secondary-3-4","REMARK"===t.mobileTabMode)("!border-secondary-3-4","REMARK"===t.mobileTabMode)("bg-secondary-3-1","REMARK"===t.mobileTabMode),e.xp6(3),e.Q6J("ngIf","OVERVIEW"===t.mobileTabMode&&t.dataOrder.orderInfo),e.xp6(1),e.Q6J("ngIf","CONTACT"===t.mobileTabMode&&t.dataOrder.contact),e.xp6(1),e.Q6J("ngIf","PAX"===t.mobileTabMode&&(null==t.dataOrder?null:t.dataOrder.listPax)),e.xp6(1),e.Q6J("ngIf","JOURNEY"===t.mobileTabMode&&(null==t.dataOrder?null:t.dataOrder.listJourney)),e.xp6(1),e.Q6J("ngIf","REMARK"===t.mobileTabMode&&t.formRemark)}}function mt(n,o){1&n&&e._UZ(0,"cf-spinner")}let gt=(()=>{class n{constructor(t,i,r,a,d,y,J,F,C,P,R){this._bcServiceSvc=t,this.route=i,this._flightDataService=r,this.cfIconRegister=a,this._locationDataSvc=d,this._modal=y,this.router=J,this._toastService=F,this._permissionService=C,this._manageBookingService=P,this.fb=R,this.mobileTabMode="OVERVIEW",this.listBookingCode=[],this.configStatus=h.cT,this.isViewRefundTopup=this._permissionService.hasPermission(A.or.RefundTopup),this.isViewUpdateOrder=this._permissionService.hasPermission(A.or.UpdateOrder),this.isApproveIssuedBC=this._permissionService.hasPermission(A.or.CanAprovedIssuedBC),this.isLoadingRemark=!1,this.actionSuccessOptions=[{text:"Xu\u1ea5t v\xe9 th\xe0nh c\xf4ng",value:"SUCCESS"},{text:"Xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i",value:"FAILED"}],this.isLoading=!1,this.actionSuccess="",this.getAirlineLogoByCode=f=>this._flightDataService.getAirlineLogoByCode(f),this.getLocationData=f=>this._locationDataSvc.getCityNameByCode(f),this.isLoadingApproveIssued=!1,this.listTickRemarks=[],this.formatterPassengerType=f=>({ADT:"Ng\u01b0\u1eddi l\u1edbn",CHD:"Tr\u1ebb em",INF:"Em b\xe9"}[f]||f),this.formatterGender=f=>({male:"Nam",female:"N\u1eef",order:"Kh\xf4ng x\xe1c \u0111\u1ecbnh"}[f]||f),this.sumPriceByPaxList=f=>f.reduce((T,U)=>T+U.totalFare,0),this.sumPriceAfterPromo=f=>f.reduce((T,U)=>T+(U.totalFare-U.promoPrice),0),this.controlEmpty=f=>{var T;return(null===(T=f.value)||void 0===T?void 0:T.trim())?null:{emptyString:!0}},this.cfIconRegister.registerIcons([m.KYu,m.GUN,m.$f3,m.o1t,m.P5K,m.PcQ,m.S7Q,m.Gey,m.YwC,m.hTA,m.okA,m.xgX])}ngOnInit(){this.initDataOrder()}initFormRemark(){var t;this.formRemark=this.fb.group({bookingCode:[(null===(t=this.listBookingCode[0])||void 0===t?void 0:t.bookingCode)||"",p.kI.required],type:["PUBLIC",p.kI.required],note:["",[p.kI.required,this.controlEmpty]]})}onChangeRemark(){this.getListTicketRemarks()}getListTicketRemarks(){this.isLoadingRemark=!0;const t=this.formRemark.value;if("T\u1ea5t c\u1ea3"==t.bookingCode)this.listTickRemarks=[],(0,ne.D)(this.listBookingCode.filter(i=>"T\u1ea5t c\u1ea3"!=i.bookingCode)).pipe((0,ie.z)(i=>{const r={bookingCode:i.bookingCode,type:t.type};return this._manageBookingService.getTicketRemarks(r).pipe((0,I.U)(a=>a.success?a.data.map(d=>({description:d.description,noteTime:Q(1e3*d.noteTime).format("HH:mm - DD/MM/YYYY"),type:d.type,userAvatar:d.userAvatar,userDisplayName:d.userDisplayName,pnr:r.bookingCode,rawNoteTime:d.noteTime})):[]))}),(0,re.q)(),(0,H.b)(i=>{const r=i.flat();this.listTickRemarks=r.sort((a,d)=>d.rawNoteTime-a.rawNoteTime).map(a=>(0,c._T)(a,["rawNoteTime"]))}),(0,S.x)(()=>this.isLoadingRemark=!1)).subscribe();else{const i={bookingCode:t.bookingCode,type:t.type};this._manageBookingService.getTicketRemarks(i).pipe((0,H.b)(r=>{r.success&&(this.listTickRemarks=r.data.sort((a,d)=>d.noteTime-a.noteTime).slice(0,2).map(a=>({description:a.description,noteTime:Q(1e3*a.noteTime).format("HH:mm - DD/MM/YYYY"),type:a.type,userAvatar:a.userAvatar,userDisplayName:a.userDisplayName,pnr:i.bookingCode})))})).pipe((0,S.x)(()=>this.isLoadingRemark=!1)).subscribe()}}initDataOrder(){this.route.paramMap.pipe((0,oe.h)(t=>t.has("id")),(0,ae.w)(t=>{const i=t.get("id");return this._bcServiceSvc.getInfoOrderDetail(i)})).subscribe(t=>{this.dataOrder=t.data,this.listBookingCode=[{bookingCode:"T\u1ea5t c\u1ea3"},...t.data.listJourney.filter(i=>i.pnr).map(i=>({bookingCode:i.pnr}))],this.initFormRemark(),this.getListTicketRemarks()})}confirmPayment(){this._modal.open(Z,{title:"X\xe1c nh\u1eadn thanh to\xe1n \u0111\u01a1n h\xe0ng",body:"H\u1ec7 th\u1ed1ng s\u1ebd ti\u1ebfn h\xe0nh xu\u1ea5t v\xe9 khi b\u1ea5m x\xe1c nh\u1eadn. B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn \u0111\u01a1n h\xe0ng n\xe0y \u0111\xe3 \u0111\u01b0\u1ee3c thanh to\xe1n th\xe0nh c\xf4ng"}).afterClosed$.subscribe({next:i=>{var r;if(i.data){const a={orderId:this.dataOrder.orderInfo.orderId,noteChange:(null===(r=i.data.remark)||void 0===r?void 0:r.trim())||"",state:"PAYMENT_SUCCESS"};this._bcServiceSvc.updateStateOrder(a).subscribe({next:d=>{"OK"===d.status?(this.dataOrder=d.data,this._toastService.add({severity:"success",summary:"Thanh to\xe1n th\xe0nh c\xf4ng",detail:"",sticky:!1})):this._toastService.add({severity:"error",summary:"Thanh to\xe1n th\u1ea5t b\u1ea1i",detail:"",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Thanh to\xe1n th\u1ea5t b\u1ea1i",detail:"",sticky:!0})}})}}})}confirmRefund(){this._modal.open(Z,{title:"X\xe1c nh\u1eadn ho\xe0n ti\u1ec1n \u0111\u01a1n h\xe0ng",body:"H\u1ec7 th\u1ed1ng s\u1ebd ti\u1ebfn h\xe0nh ho\xe0n ti\u1ec1n khi b\u1ea5m x\xe1c nh\u1eadn. B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn \u0111\u01a1n h\xe0ng n\xe0y \u0111\xe3 \u0111\u01b0\u1ee3c ho\xe0n ti\u1ec1n"}).afterClosed$.subscribe({next:i=>{var r;if(i.data){const a={orderId:this.dataOrder.orderInfo.orderId,noteChange:(null===(r=i.data.remark)||void 0===r?void 0:r.trim())||"",state:"REFUNDED"};this._bcServiceSvc.updateStateOrder(a).subscribe({next:d=>{"OK"===d.status?(this.dataOrder=d.data,this._toastService.add({severity:"success",summary:"Ho\xe0n ti\u1ec1n th\xe0nh c\xf4ng",detail:"",sticky:!1})):this._toastService.add({severity:"error",summary:"Ho\xe0n ti\u1ec1n th\u1ea5t b\u1ea1i",detail:"",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Ho\xe0n ti\u1ec1n th\u1ea5t b\u1ea1i",detail:"",sticky:!0})}})}}})}confirmIssueSuccess(){this._modal.open(Z,{title:"X\xe1c nh\u1eadn xu\u1ea5t v\xe9 \u0111\u01a1n h\xe0ng th\xe0nh c\xf4ng",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn x\xe1c nh\u1eadn xu\u1ea5t v\xe9 th\xe0nh c\xf4ng \u0111\u01a1n h\xe0ng n\xe0y"}).afterClosed$.subscribe({next:i=>{var r;if(i.data){const a={orderId:this.dataOrder.orderInfo.orderId,noteChange:(null===(r=i.data.remark)||void 0===r?void 0:r.trim())||"",state:"SUCCESS"};this._bcServiceSvc.updateStateOrder(a).subscribe({next:d=>{"OK"===d.status?(this.dataOrder=d.data,this._toastService.add({severity:"success",summary:"C\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i th\xe0nh c\xf4ng",detail:"",sticky:!1})):this._toastService.add({severity:"error",summary:"C\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i th\u1ea5t b\u1ea1i",detail:"",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"C\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i th\u1ea5t b\u1ea1i",detail:"",sticky:!0})}})}else this.actionSuccess=""}})}confirmIssueFailed(){this._modal.open(Z,{title:"X\xe1c nh\u1eadn xu\u1ea5t v\xe9 \u0111\u01a1n h\xe0ng th\u1ea5t b\u1ea1i",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn x\xe1c nh\u1eadn xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i \u0111\u01a1n h\xe0ng n\xe0y"}).afterClosed$.subscribe({next:i=>{var r;if(i.data){const a={orderId:this.dataOrder.orderInfo.orderId,noteChange:(null===(r=i.data.remark)||void 0===r?void 0:r.trim())||"",state:"FAILED"};this._bcServiceSvc.updateStateOrder(a).subscribe({next:d=>{"OK"===d.status?(this.dataOrder=d.data,this._toastService.add({severity:"success",summary:"C\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i th\xe0nh c\xf4ng",detail:"",sticky:!1})):this._toastService.add({severity:"error",summary:"C\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i th\u1ea5t b\u1ea1i",detail:"",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"C\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i th\u1ea5t b\u1ea1i",detail:"",sticky:!0})}})}else this.actionSuccess=""}})}getStateDisplay(t){switch(t){case"PAYMENT_PROCESSING":return"Ch\u01b0a thanh to\xe1n";case"PAYMENT_SUCCESS":return"\u0110\xe3 thanh to\xe1n";case"CANCELLED":return"\u0110\xe3 h\u1ee7y";case"SUCCESS":return"Xu\u1ea5t v\xe9 th\xe0nh c\xf4ng";case"FAILED":return"Xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i";case"REFUNDED":return"\u0110\xe3 ho\xe0n ti\u1ec1n";default:return""}}onChangeActionSuccess(t){"SUCCESS"===t.value&&this.confirmIssueSuccess(),"FAILED"===t.value&&this.confirmIssueFailed()}back(){window.history.back()}onApproveIssuedPrnOrder(t){this.isLoadingApproveIssued=!0,this._bcServiceSvc.approveIssuedPrnOrder({orderId:this.dataOrder.orderInfo.orderId,pnr:t.pnr,provider:t.airline}).pipe((0,S.x)(()=>this.isLoadingApproveIssued=!1)).subscribe(r=>{"OK"==r.status?(this._toastService.add({severity:"success",summary:"C\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i th\xe0nh c\xf4ng",detail:r.objectError.errorDescription.vi,sticky:!1}),setTimeout(()=>{this.initDataOrder()},1e3),this.isLoadingApproveIssued=!1):(this._toastService.add({severity:"error",summary:"C\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i th\u1ea5t b\u1ea1i",detail:r.objectError.errorDescription.vi,sticky:!0}),this.isLoadingApproveIssued=!1)})}openBookingPage(t){this.router.navigate(["/admin/booking-detail",t.airline,t.pnr])}onRemarkBooking(){if(this.formRemark.invalid)return;const i=Object.assign({},this.formRemark.value);this._manageBookingService.createRemark(i).subscribe({next:r=>{r.success&&(this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Th\xeam remark th\xe0nh c\xf4ng",sticky:!1}),this.getListTicketRemarks(),this.formRemark.controls.note.setValue(""))}})}mobileTabChange(t,i){this.mobileTabMode=t,i.scrollIntoView({behavior:"smooth",inline:"center"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(w),e.Y36(N.gz),e.Y36(z.G),e.Y36(m.KNP),e.Y36(V._),e.Y36(b.oE),e.Y36(N.F0),e.Y36(X.BX),e.Y36(A.$A),e.Y36(ge.fB),e.Y36(p.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["btc-order-management-detail"]],standalone:!0,features:[e.jDz],decls:25,vars:12,consts:[[1,"container","mx-auto","px-4","py-6","max-w-5xl","flex","gap-x-4","md:hidden"],[1,"w-full"],[1,"space-y-6"],[1,"flex","justify-between","items-center"],["type","secondary","size","medium","cf-button","",1,"bg-white",3,"click"],["class","flex gap-4 items-center",4,"ngIf"],["class","flex flex-col gap-4",4,"ngIf"],["class","flex flex-col gap-4 ",4,"ngIf"],[1,"rounded","bg-white","block","w-[380px]","h-full","mt-[106px]"],[1,"flex","justify-between","items-center","py-3.5","px-4","border-b","border-neutral-gray-1"],[1,"text-express-sm","text-neutral-gray-6"],[1,""],["class","p-4 flex flex-col gap-y-4",3,"formGroup",4,"ngIf"],["class","px-4 pb-4 flex flex-col gap-y-2",4,"ngIf"],[1,"border-b","border-neutral-gray-1","w-full","h-full"],[1,"p-4","flex","flex-col","gap-y-2"],["class","p-3 rounded flex flex-col gap-y-2 bg-neutral-gray-1",4,"ngFor","ngForOf"],["class","bg-neutral-white rounded-lg shadow-cf-info-card h-full w-full p-4 flex flex-col justify-center items-center gap-y-8 md:px-5 md:py-[80px]",4,"ngIf"],["class","md:flex hidden flex-col w-full ",4,"ngIf"],[4,"ngIf"],[1,"flex","gap-4","items-center"],["type","solid","size","medium","cf-button","",3,"click",4,"ngIf"],["type","secondary","class","bg-white","size","medium","cf-button","",3,"click",4,"ngIf"],["type","solid","size","medium","cf-button","",3,"click"],[1,"flex","flex-col","gap-4"],[1,"flex","gap-x-[20px]"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-black"],[1,"p-6","bg-white","shadow-sm","rounded-lg"],[1,"flex","justify-between","items-start","flex-col","gap-3"],[1,"flex","flex-col","gap-3"],[1,"flex","items-center","gap-2","text-sm","text-neutral-gray-6"],["cfHeadIcon","","icon","ticket","size","small",1,"text-neutral-gray-6"],[1,"text-body-md-short"],[1,"font-medium","text-body-md-short","text-neutral-gray-6"],["cfHeadIcon","","icon","money","size","small",1,"text-neutral-gray-6"],["cfHeadIcon","","icon","credit_card","size","small",1,"text-neutral-gray-6"],["class","py-1 px-2 rounded-full w-fit gap-1 h-fit flex items-center justify-center",3,"ngClass",4,"ngIf"],[1,"py-1","px-2","rounded-full","w-fit","gap-1","h-fit","flex","items-center","justify-center",3,"ngClass"],["size","small",1,"md:hidden","text-white",3,"icon"],[1,"text-neutral-white","text-body-sm"],[1,"space-y-3"],[1,"flex","items-center","gap-2","text-sm"],["cfHeadIcon","","icon","user","size","small",1,"text-neutral-gray-6"],[1,"text-neutral-gray-6","text-body-md-short"],[1,"font-medium","text-body-md-short"],["cfHeadIcon","","icon","call","size","small",1,"text-neutral-gray-6"],["cfHeadIcon","","icon","email","size","small",1,"text-neutral-gray-6"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-neutral-gray-3"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","pb-3"],[4,"ngFor","ngForOf"],[1,"text-body-md","text-neutral-black","pt-4","uppercase"],[1,"text-body-md","text-neutral-black","pt-4"],[1,"text-body-md","text-neutral-black","pt-4","capitalize"],[1,"space-y-4"],["class","p-3 flex flex-col  gap-3 shadow-lg rounded-lg",4,"ngFor","ngForOf"],[1,"p-3","flex","flex-col","gap-3","shadow-lg","rounded-lg"],[1,"flex","gap-6","items-center"],[1,"flex","flex-col","items-center"],[1,"w-14","h-14","object-contain",3,"src","alt"],[1,"text-body-md-long","font-semibold","text-neutral-gray-4"],[1,"flex","gap-3","md:flex-col"],[1,"flex","gap-3","items-center","md:flex-col","md:items-start"],[1,"text-body-md","font-semibold"],["icon","plane","size","small"],[1,"text-body-lg","font-semibold"],[1,"flex","flex-col","gap-3","w-full"],["class","flex gap-2 md:flex-col text-neutral-gray-4 text-body-md",4,"ngFor","ngForOf"],["class","flex flex-col gap-1 text-body-md",4,"ngIf"],[1,"flex","gap-3"],["cf-button","","type","secondary",1,"min-w-[100px]","justify-center",3,"disabled","click"],["class","min-w-[100px] justify-center","cf-button","",3,"disabled","click",4,"ngIf"],[1,"min-w-full","divide-y","divide-neutral-gray-3","md:hidden"],[1,"text-espressive-sm","text-neutral-gray-4","pb-3","text-right"],[1,"hidden","w-full","md:flex","justify-between","gap-4"],["class","flex flex-col rounded-lg bg-neutral-white p-3 gap-y-2",4,"ngFor","ngForOf"],[1,"w-full","flex","justify-end","items-center","gap-4"],[1,"text-espressive-sm","text-neutral-gray-4"],[1,"text-heading-md","font-bold"],[1,"flex","gap-2","md:flex-col","text-neutral-gray-4","text-body-md"],[1,"flex","items-center","gap-1"],[1,"flex","flex-col","gap-1","text-body-md"],[1,"font-semibold"],["cf-button","",1,"min-w-[100px]","justify-center",3,"disabled","click"],[1,"text-body-md","text-neutral-black","pt-4","text-right"],[1,"flex","flex-col","rounded-lg","bg-neutral-white","p-3","gap-y-2"],[1,"flex","items-center","gap-x-5"],[1,"text-body-sm","text-neutral-gray-4","w-[104px]"],[1,"text-espressive-md","text-neutral-gray-6"],[1,"p-4","flex","flex-col","gap-y-4",3,"formGroup"],[1,"flex","gap-x-1","w-full"],["textField","bookingCode","valueField","bookingCode","placeholder","M\xe3 \u0111\u1eb7t ch\u1ed7","formControlName","bookingCode",1,"w-full",3,"status","data","allowSearch","selectedChange"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],[1,"flex","gap-x-4","md:fixed","md:bottom-0","md:p-4","md:bg-neutral-white","md:w-full","md:right-0"],[1,"grow-[400]","!w-full",3,"status"],["cf-input","","size","medium","placeholder","Th\xeam nhanh...","formControlName","note"],["cf-button","","size","medium","color","primary-1","type","solid",3,"disabled","click"],["icon","chevron_right","size","small"],[1,"px-4","pb-4","flex","flex-col","gap-y-2"],["class","flex flex-col gap-y-1",4,"ngIf"],[1,"flex","flex-col","gap-y-1"],["class","p-3 bg-neutral-gray-1 rounded flex flex-col gap-y-2",4,"ngFor","ngForOf"],[1,"p-3","bg-neutral-gray-1","rounded","flex","flex-col","gap-y-2"],[1,"flex","items-center","gap-x-2"],[1,"w-10","h-10","rounded-full","object-cover","ng-star-inserted",3,"src"],[1,"text-express-sm"],[1,"text-body-sm","text-neutral-gray-4"],[1,"text-body-sm","text-neutral-gray-6","line-clamp-2"],[1,"w-full","h-[138px]","bg-neutral-white","rounded"],[1,"flex","justify-between","items-center","h-full","animate-pulse"],[1,"w-full","flex","flex-col","items-center","space-y-3"],[1,"w-24","bg-neutral-gray-2","h-6","rounded-md"],[1,"p-3","rounded","flex","flex-col","gap-y-2","bg-neutral-gray-1"],[1,"flex","flex-col","gap-y-3"],[1,"text-body-sm"],[1,"text-body-md-short","font-medium"],[1,"bg-neutral-white","rounded-lg","shadow-cf-info-card","h-full","w-full","p-4","flex","flex-col","justify-center","items-center","gap-y-8","md:px-5","md:py-[80px]"],["src","assets/images/empty_result.png","alt","empty",1,"w-[80px]","object-contain"],[1,"flex","flex-col","justify-between","items-center"],[1,"text-center","text-body-md-short"],[1,"md:flex","hidden","flex-col","w-full"],[1,"py-2","px-4","md:flex","hidden","whitespace-nowrap","overflow-x-scroll","bg-neutral-white","sticky","min-h-[52px]","top-0","z-[1]","shadow-cf-sm"],["class","px-4 py-1.5 rounded-full text-espressive-md text-neutral-gray-4 border border-transparent",3,"text-secondary-3-4","!border-secondary-3-4","bg-secondary-3-1","click",4,"ngIf"],[1,"px-4","py-1.5","rounded-full","text-espressive-md","text-neutral-gray-4","border","border-transparent",3,"click"],["creditShellTab",""],["fareRuleTab",""],["class","p-4 gap-y-3 md:flex md:flex-col hidden w-full",4,"ngIf"],["bookingDetailTab",""],["paxInfoTab",""],["totalPriceTab",""],[1,"p-4","gap-y-3","md:flex","md:flex-col","hidden","w-full"],[1,"flex","justify-between","items-center","flex-wrap","gap-3"],["class","flex gap-3 items-center flex-wrap",4,"ngIf"],[1,"flex","gap-3","items-center","flex-wrap"],[1,"hidden","w-full","md:flex","justify-between","gap-4","flex-col","bg-neutral-gray-1","rounded-lg","p-3"],[1,"flex","flex-col","gap-y-4",3,"formGroup"],[1,"flex","gap-x-4","bg-white"],["class","py-4 flex flex-col gap-y-2",4,"ngIf"],[1,"border-b","border-neutral-gray-1","w-full","h-full","mb-4"],[1,"flex","flex-col","gap-y-2"],[1,"py-4","flex","flex-col","gap-y-2"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),e.NdJ("click",function(){return i.back()}),e._uU(5," Quay l\u1ea1i "),e.qZA(),e.YNc(6,xe,5,4,"div",5),e.qZA(),e.YNc(7,Te,42,17,"div",6),e.YNc(8,Ze,25,4,"div",7),e.YNc(9,be,18,1,"div",6),e.YNc(10,Be,8,1,"div",6),e.qZA()(),e.TgZ(11,"div",8)(12,"div",9)(13,"div",10),e._uU(14,"Remark"),e.qZA(),e._UZ(15,"div"),e.qZA(),e.TgZ(16,"div",11),e.YNc(17,ke,13,7,"form",12),e.YNc(18,we,3,2,"div",13),e._UZ(19,"div",14),e.TgZ(20,"div",15),e.YNc(21,Ne,20,9,"div",16),e.qZA(),e.YNc(22,Le,7,0,"div",17),e.qZA()()(),e.YNc(23,pt,16,20,"div",18),e.YNc(24,mt,1,0,"cf-spinner",19)),2&t&&(e.xp6(6),e.Q6J("ngIf",null==i.dataOrder?null:i.dataOrder.orderInfo),e.xp6(1),e.Q6J("ngIf",null==i.dataOrder?null:i.dataOrder.orderInfo),e.xp6(1),e.Q6J("ngIf",null==i.dataOrder?null:i.dataOrder.contact),e.xp6(1),e.Q6J("ngIf",null==i.dataOrder?null:i.dataOrder.listPax),e.xp6(1),e.Q6J("ngIf",null==i.dataOrder?null:i.dataOrder.listJourney),e.xp6(7),e.Q6J("ngIf",i.formRemark),e.xp6(1),e.Q6J("ngIf",!i.isLoadingRemark&&((null==i.listTickRemarks?null:i.listTickRemarks.length)||(null==i.dataOrder||null==i.dataOrder.orderInfo||null==i.dataOrder.orderInfo.trackingModifyList?null:i.dataOrder.orderInfo.trackingModifyList.length))),e.xp6(3),e.Q6J("ngForOf",(null==i.dataOrder||null==i.dataOrder.orderInfo?null:i.dataOrder.orderInfo.trackingModifyList)||e.DdM(11,O)),e.xp6(1),e.Q6J("ngIf",!(null!=i.dataOrder&&null!=i.dataOrder.orderInfo&&null!=i.dataOrder.orderInfo.trackingModifyList&&i.dataOrder.orderInfo.trackingModifyList.length)),e.xp6(1),e.Q6J("ngIf",i.dataOrder),e.xp6(1),e.Q6J("ngIf",i.isLoading))},dependencies:[l.ez,l.mk,l.sg,l.O5,l.JJ,l.uU,m.AxE,m.Sm8,q.q,Y.AS,x.j$,x.ND,x.BN,p.UX,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,_.N8,_.Xq,v.q,te.OR,p.u5],encapsulation:2}),n})();var ft=s(88516),_t=s(4688),L=s(78043);function vt(n,o){if(1&n&&(e.TgZ(0,"div",19),e._UZ(1,"cf-icon",20),e.TgZ(2,"span",21),e._uU(3),e.qZA()()),2&n){const t=o.ngIf;e.Q6J("ngClass",t.bgColor),e.xp6(1),e.Q6J("icon",t.icon),e.xp6(2),e.hij(" ",t.name," ")}}function ht(n,o){if(1&n&&(e.TgZ(0,"div",46),e._UZ(1,"div",47),e.TgZ(2,"div",48),e._uU(3),e.qZA(),e._UZ(4,"div",47),e.qZA()),2&n){const t=e.oxw().index;e.xp6(3),e.hij("Ch\u1eb7ng ",t+2,"")}}function xt(n,o){if(1&n&&(e.TgZ(0,"div",22)(1,"div",23)(2,"div",24)(3,"div",25),e._UZ(4,"img",26),e.ALo(5,"mapper"),e.qZA(),e.TgZ(6,"div",27)(7,"div",28)(8,"div",29)(9,"div",30),e._uU(10),e.ALo(11,"mapper"),e.qZA()(),e.TgZ(12,"div"),e._UZ(13,"cf-icon",31),e.qZA(),e.TgZ(14,"div",29)(15,"div",30),e._uU(16),e.ALo(17,"mapper"),e.qZA()()(),e.TgZ(18,"div",32)(19,"div",33)(20,"div",34),e._UZ(21,"cf-icon",35),e._uU(22),e.ALo(23,"date"),e.qZA(),e.TgZ(24,"div",34),e._UZ(25,"cf-icon",8),e._uU(26),e.ALo(27,"date"),e.qZA()()()()()(),e.TgZ(28,"div",36)(29,"div",37)(30,"div",38)(31,"div",39),e._UZ(32,"cf-icon",40),e._uU(33," H\xe0nh kh\xe1ch: "),e.qZA(),e.TgZ(34,"div",41),e._uU(35),e.qZA()(),e.TgZ(36,"div",38)(37,"div",39),e._UZ(38,"cf-icon",42),e._uU(39," PNR: "),e.qZA(),e.TgZ(40,"div",41),e._uU(41),e.qZA()()(),e.TgZ(42,"div",43)(43,"div",44),e._uU(44),e.ALo(45,"replace"),e.ALo(46,"number"),e.qZA()()(),e.YNc(47,ht,5,1,"div",45),e.qZA()),2&n){const t=o.$implicit,i=o.last,r=e.oxw();e.xp6(4),e.Q6J("src",e.xi3(5,11,t.airline,r.getAirlineLogoByCode),e.LSH),e.xp6(6),e.AsE(" ",e.xi3(11,14,t.startPoint,r.getLocationData)," (",t.startPoint,") "),e.xp6(6),e.AsE(" ",e.xi3(17,17,t.endPoint,r.getLocationData)," ( ",t.endPoint,") "),e.xp6(6),e.hij(" ",e.xi3(23,20,t.departureTime,"dd/MM/yyyy")," "),e.xp6(4),e.hij(" ",e.xi3(27,23,t.departureTime,"HH:mm")," "),e.xp6(9),e.hij(" ",t.numPax||"---"," "),e.xp6(6),e.hij(" ",t.pnr||"---"," "),e.xp6(3),e.hij(" T\u1ed5ng ti\u1ec1n: ",e.Dn7(45,26,e.lcZ(46,30,t.totalPrice),",",".")," \u0111 "),e.xp6(3),e.Q6J("ngIf",!i)}}function yt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.navigateToDetail(r.order.orderId))}),e._uU(1," Chi ti\u1ebft "),e.qZA()}}function Tt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.confirmPayment())}),e._uU(1," X\xe1c nh\u1eadn thanh to\xe1n "),e.qZA()}}function Zt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.confirmRefund())}),e._uU(1," X\xe1c nh\u1eadn ho\xe0n ti\u1ec1n "),e.qZA()}}let At=(()=>{class n{constructor(t,i,r,a,d,y,J,F){this._flightDataService=t,this._locationDataSvc=i,this.cfIconRegister=r,this.router=a,this._modal=d,this._bcServiceSvc=y,this._toastService=J,this._permissionService=F,this.configStatus=h.cT,this.isViewInfoOrderDetail=this._permissionService.hasPermission(A.or.GetInfoOrderDetail),this.isViewUpdateOrder=this._permissionService.hasPermission(A.or.UpdateOrder),this.isViewRefundTopup=this._permissionService.hasPermission(A.or.RefundTopup),this.getAirlineLogoByCode=C=>this._flightDataService.getAirlineLogoByCode(C),this.getLocationData=C=>this._locationDataSvc.getCityNameByCode(C),this.totalPriceJourneys=C=>C.reduce((P,R)=>P+R.totalPrice,0),this.cfIconRegister.registerIcons([m.okA,m.qDv,m.wvd,m.o1t,m.DFc,m.YwC,m.TOh,m.o1t,m.P5K,m.PcQ,m.S7Q,m.Gey])}navigateToDetail(t){this.router.navigate(["admin/btc-order-detail",t])}confirmPayment(){this._modal.open(Z,{title:"X\xe1c nh\u1eadn thanh to\xe1n \u0111\u01a1n h\xe0ng",body:"H\u1ec7 th\u1ed1ng s\u1ebd ti\u1ebfn h\xe0nh xu\u1ea5t v\xe9 khi b\u1ea5m x\xe1c nh\u1eadn. B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn \u0111\u01a1n h\xe0ng n\xe0y \u0111\u01b0\u1ee3c thanh to\xe1n th\xe0nh c\xf4ng"}).afterClosed$.subscribe({next:i=>{var r;if(i.data){const a={orderId:this.order.orderId,noteChange:(null===(r=i.data.remark)||void 0===r?void 0:r.trim())||"",state:"PAYMENT_SUCCESS"};this._bcServiceSvc.updateStateOrder(a).subscribe({next:d=>{this._toastService.add("OK"===d.status?{severity:"success",summary:"Thanh to\xe1n th\xe0nh c\xf4ng",detail:"",sticky:!1}:{severity:"error",summary:"Thanh to\xe1n th\u1ea5t b\u1ea1i",detail:"",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Thanh to\xe1n th\u1ea5t b\u1ea1i",detail:"",sticky:!0})}})}}})}confirmRefund(){this._modal.open(Z,{title:"X\xe1c nh\u1eadn ho\xe0n ti\u1ec1n \u0111\u01a1n h\xe0ng",body:"H\u1ec7 th\u1ed1ng s\u1ebd ti\u1ebfn h\xe0nh ho\xe0n ti\u1ec1n khi b\u1ea5m x\xe1c nh\u1eadn. B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn \u0111\u01a1n h\xe0ng n\xe0y \u0111\u01b0\u1ee3c ho\xe0n ti\u1ec1n"}).afterClosed$.subscribe({next:i=>{var r;if(i.data){const a={orderId:this.order.orderId,noteChange:(null===(r=i.data.remark)||void 0===r?void 0:r.trim())||"",state:"REFUNDED"};this._bcServiceSvc.updateStateOrder(a).subscribe({next:d=>{this._toastService.add("OK"===d.status?{severity:"success",summary:"Ho\xe0n ti\u1ec1n th\xe0nh c\xf4ng",detail:"",sticky:!1}:{severity:"error",summary:"Ho\xe0n ti\u1ec1n th\u1ea5t b\u1ea1i",detail:"",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Ho\xe0n ti\u1ec1n th\u1ea5t b\u1ea1i",detail:"",sticky:!0})}})}}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(z.G),e.Y36(V._),e.Y36(m.KNP),e.Y36(N.F0),e.Y36(b.oE),e.Y36(w),e.Y36(X.BX),e.Y36(A.$A))},n.\u0275cmp=e.Xpm({type:n,selectors:[["btc-order-item"]],inputs:{order:"order"},standalone:!0,features:[e.jDz],decls:27,vars:17,consts:[[1,"flex","flex-col","rounded-lg","w-full","shadow-md","bg-neutral-white","gap-3","p-4"],[1,"flex","flex-col","gap-2"],[1,"flex","gap-2","items-center"],[1,"text-body-lg","text-neutral-gray-5","font-semibold"],[1,"font-semibold","text-heading-lg","md:text-body-sm"],["class","py-1 px-2 rounded-full w-fit gap-1 h-fit flex items-center justify-center",3,"ngClass",4,"ngIf"],[1,"flex","flex-col","gap-1"],[1,"text-body-md","text-neutral-gray-4","font-medium","gap-1","flex","items-center"],["icon","clock","size","small"],[1,"pt-3","px-3"],[1,"w-full","border-b","border-neutral-gray-2","pb-4","flex","flex-col","gap-4"],["class","flex flex-col gap-4",4,"ngFor","ngForOf"],[1,"rounded-b-lg","flex","gap-2","p-3","bg-white","justify-end","items-center"],[1,"text-body-lg","font-semibold","flex","items-center","gap-1"],["icon","inbox","size","small"],[1,"text-body-lg","font-semibold"],[1,"flex","gap-2","items-center","w-full","justify-end"],["type","secondary","size","medium","cf-button","",3,"click",4,"ngIf"],["type","solid","size","medium","cf-button","",3,"click",4,"ngIf"],[1,"py-1","px-2","rounded-full","w-fit","gap-1","h-fit","flex","items-center","justify-center",3,"ngClass"],["size","small",1,"md:hidden","text-white",3,"icon"],[1,"text-neutral-white","text-body-sm"],[1,"flex","flex-col","gap-4"],[1,"flex","justify-between"],[1,"flex","gap-6","items-center","md:w-full","md:justify-between"],[1,"flex","gap-3"],["alt","logo airline",1,"w-14","h-14","object-contain",3,"src"],[1,"flex","flex-col","items-center","gap-1","md:items-start","md:flex-1"],[1,"flex","gap-3","items-center","md:flex-col","md:items-start"],[1,"flex","flex-col","items-center"],[1,"text-body-md","font-semibold"],["icon","plane","size","small"],[1,"flex","gap-4"],[1,"flex","gap-3","items-center","text-neutral-gray-4","text-espressive-sm"],[1,"flex","items-center","gap-1"],["icon","calendar","size","small"],[1,"flex","gap-5","justify-between"],[1,"flex","gap-6","items-center","md:items-start","md:flex-col"],[1,"flex","gap-1"],[1,"text-body-md","flex","gap-1","items-center"],["icon","users","size","small",1,"md:hidden"],[1,"text-body-md"],["icon","ticket","size","small",1,"md:hidden"],[1,"flex","flex-col","gap-1","items-center","md:justify-end"],[1,"text-body-md","font-medium"],["class","my-2 flex items-center gap-2",4,"ngIf"],[1,"my-2","flex","items-center","gap-2"],[1,"flex-1","border-t","border-neutral-gray-2","h-[1px]"],[1,"border","rounded-2xl","p-1","border-neutral-gray-2","w-fit","text-body-sm"],["type","secondary","size","medium","cf-button","",3,"click"],["type","solid","size","medium","cf-button","",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e.YNc(6,vt,4,3,"div",5),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7),e._UZ(9,"cf-icon",8),e._uU(10),e.ALo(11,"date"),e.qZA()()(),e.TgZ(12,"div",9)(13,"div",10),e.YNc(14,xt,48,32,"div",11),e.qZA()(),e.TgZ(15,"div",12)(16,"div",13),e._UZ(17,"cf-icon",14),e._uU(18," T\u1ed5ng ti\u1ec1n: "),e.qZA(),e.TgZ(19,"div",15),e._uU(20),e.ALo(21,"replace"),e.ALo(22,"number"),e.qZA()(),e.TgZ(23,"div",16),e.YNc(24,yt,2,0,"button",17),e.YNc(25,Tt,2,0,"button",18),e.YNc(26,Zt,2,0,"button",18),e.qZA()()),2&t&&(e.xp6(4),e.hij(" ",i.order.orderId," "),e.xp6(2),e.Q6J("ngIf",i.configStatus[i.order.state]),e.xp6(4),e.hij(" Ng\xe0y \u0111\u1eb7t: ",e.xi3(11,8,i.order.timeBook,"dd/MM/yyyy")||"---"," "),e.xp6(4),e.Q6J("ngForOf",i.order.journeyInfos),e.xp6(6),e.hij(" ",e.Dn7(21,11,e.lcZ(22,15,i.order.totalCharge.totalPrice),",",".")," \u0111 "),e.xp6(4),e.Q6J("ngIf",i.isViewInfoOrderDetail),e.xp6(1),e.Q6J("ngIf","PAYMENT_PROCESSING"===i.order.state&&i.isViewUpdateOrder),e.xp6(1),e.Q6J("ngIf","FAILED"===i.order.state&&i.isViewRefundTopup))},dependencies:[l.ez,l.mk,l.sg,l.O5,l.JJ,l.uU,m.AxE,m.Sm8,_.N8,_.Xq,q.q,Y.AS],styles:[":host{display:block}\n"],encapsulation:2,changeDetection:0}),n})();var $=s(35119),W=s(81664),M=s(47910),bt=s(16039);const Ct=function(n,o){return{"border-b-4 border-neutral-gray-4":n,"!pl-5":o}},Et=function(n){return{"text-neutral-gray-6":n}},Ot=function(n){return{"!bg-neutral-gray-6 text-express-sm":n}};function It(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",39,40),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.MAs(2),y=e.oxw();return e.KtG(y.onChangeTab(a,d))}),e.TgZ(3,"div",41),e._uU(4),e.TgZ(5,"cf-label",42),e._uU(6),e.qZA()()(),e.BQk()}if(2&n){const t=o.$implicit,i=o.first,r=e.oxw();e.xp6(1),e.Q6J("ngClass",e.WLB(6,Ct,t.value===r.currentTab,!i)),e.xp6(2),e.Q6J("ngClass",e.VKq(9,Et,t.value===r.currentTab)),e.xp6(1),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("color","green")("ngClass",e.VKq(11,Ot,t.value===r.currentTab)),e.xp6(1),e.hij(" ",t.counter>99?"99+":t.counter," ")}}function Dt(n,o){1&n&&e._UZ(0,"cf-input-hint",43),2&n&&e.Q6J("hint","Th\u1eddi gian kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Ut(n,o){if(1&n&&(e.ynx(0),e._UZ(1,"btc-order-item",44),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("order",t)}}const ee=function(){return[]},Bt=function(){return{standalone:!0}};let kt=(()=>{class n{constructor(t,i,r){this._fb=t,this._bcServiceSvc=i,this._excelService=r,this.listTab=[{value:"ALL",text:"T\u1ea5t c\u1ea3",counter:0,active:!0},...Object.keys(h.cT).map(a=>({value:a,text:h.cT[a].name,counter:0,active:!1}))],this.currentTab="ALL",this.listOrderRaw=[],this.invalidTimeFilter=!1,this.dateRangeStr="",this.timeOptions=h.qM,this.channelTypeOptions=h.bN,this.searchTypeOptions=h.Oi,this.filterByTab=(a,d)=>a.filter(y=>"ALL"===d||y.state===d)}ngOnInit(){this.initSearchForm()}onChangeTab(t,i){t.value!==this.currentTab&&(this.currentTab=t.value,this.onSearch())}initSearchForm(){const t=(0,l.p6)((0,$.Z)(new Date),"dd/MM/yyyy","vi-VN"),i=(0,l.p6)((0,W.Z)(new Date),"dd/MM/yyyy","vi-VN");this.dateRangeStr=t+" - "+i,this.searchForm=this._fb.group({startTime:[(0,$.Z)(new Date),p.kI.required],endTime:[(0,W.Z)(new Date),p.kI.required],searchText:"",filterTimeType:L.XY.TIME_BOOKED,channelType:L.R$.ALL,searchType:L.r4.ORDER}),this.onSearch()}onDateSelection(t,i,r,a){if(i.value||r.value)if(i.value&&!r.value&&t&&t.getTime()>=i.value.getTime()){r.setValue(t),a.close(),this.startDate=i.value;const d=(0,l.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr+=d}else{r.setValue(null),i.setValue(t);const d=(0,l.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=d+" - "}else{i.setValue(t),r.setValue(null);const d=(0,l.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=d+" - "}this.invalidTimeFilter=i.invalid||r.invalid}onSearch(){this.searchForm.invalid||this.invalidTimeFilter||this._bcServiceSvc.getListOrder(Object.assign(Object.assign({},this.searchForm.value),{startTime:(0,M.Z)(this.searchForm.value.startTime,"yyyy-MM-dd"),endTime:(0,M.Z)(this.searchForm.value.endTime,"yyyy-MM-dd"),state:this.currentTab&&"ALL"!=this.currentTab?this.currentTab:null})).subscribe({next:t=>{this.listOrderRaw=[...t.data],this.progressCouterOfTabs(t.data)}})}exportExcel(){this.searchForm.invalid||this.invalidTimeFilter||this._bcServiceSvc.getListOrderToExport(Object.assign(Object.assign({},this.searchForm.value),{startTime:(0,M.Z)(this.searchForm.value.startTime,"yyyy-MM-dd"),endTime:(0,M.Z)(this.searchForm.value.endTime,"yyyy-MM-dd"),state:this.currentTab&&"ALL"!=this.currentTab?this.currentTab:null})).subscribe({next:t=>{console.log(t),"OK"===t.status?this._excelService.exportToExcel(t.data,["M\xe3 \u0111\u01a1n h\xe0ng","Tr\u1ea1ng th\xe1i \u0111\u01a1n h\xe0ng","Email \u0111\u1eb7t v\xe9","S\u0110T \u0111\u1eb7t v\xe9","T\u1ed5ng ti\u1ec1n (NET)","T\u1ed5ng ti\u1ec1n (gi\xe1 \u0111\xe3 c\u1ed9ng ph\xed)","S\u1ed1 l\u01b0\u1ee3ng kh\xe1ch","Ng\xe0y gi\u1edd \u0111\u1eb7t","Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n","T\xean kh\xe1ch","Gi\u1edbi t\xednh","Lo\u1ea1i kh\xe1ch","Ng\xe0y sinh"],"btc-order-management",[{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20}]):console.error("Error fetching data for export:",t)}})}progressCouterOfTabs(t){this.listTab=[...this.listTab.map(i=>(i.counter=(t||[]).filter(r=>"ALL"===i.value||r.state===i.value).length,i))]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(w),e.Y36(bt.x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["btc-order-management"]],standalone:!0,features:[e.jDz],decls:51,vars:35,consts:[[1,"flex","flex-col","h-full","w-full"],[1,"py-4","px-[30px]","flex","flex-col","gap-y-[30px]","md:gap-y-4","bg-neutral-white"],[1,"flex","justify-between","gap-x-6","md:flex-col","md:gap-y-4"],[1,"flex","flex-col","gap-y-1.5"],[1,"text-heading-lg","md:text-heading-sm"],[1,"flex","flex-col","gap-y-5"],[1,"flex","overflow-x-auto"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-y-3",3,"formGroup"],[1,"flex","gap-x-4","items-end","md:hidden"],[1,"flex","gap-y-1.5","flex-col"],[1,"text-express-md","whitespace-nowrap","text-neutral-gray-5"],["textField","text","valueField","value","formControlName","filterTimeType",1,"!max-w-none","w-[180px]",3,"status","data","placeholder","allowSearch"],[1,"flex"],[1,"grow",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfLabel",""],["cf-input","","type","text","size","medium","placeholder","Ch\u1ecdn ng\xe0y kh\u1edfi h\xe0nh",1,"py-[8px]",3,"ngModel","ngModelOptions","click","ngModelChange"],[1,"hidden"],["cfHint","",3,"hint",4,"ngIf"],["cfDatepicker","","type","text","outsideDays","hidden",1,"w-0","m-0","mr-2","bottom-0",3,"secondaryCalendar","displayMonths","rangeSelection","containerWidth","startDate","canReset","fromDate","toDate","dateSelect"],["dateRange","cfDatepicker"],["textField","text","valueField","value","formControlName","channelType",1,"!max-w-none","w-[160px]",3,"status","data","placeholder","allowSearch"],[1,"flex","flex-col","justify-end","w-[168px]","shrink-0"],["cf-button","","type","secondary","size","medium",1,"justify-center",3,"click"],["cfHeadIcon","","icon","search","size","small",1,"mr-2"],[1,"flex","gap-2","flex-1"],[1,"flex","items-center","gap-y-1.5"],["textField","text","valueField","value","formControlName","searchType",1,"!max-w-none","w-full",3,"status","data","placeholder","allowSearch"],[1,"flex-1","md:hidden"],["cfHeadIcon","","icon","search","size","small",1,"text-neutral-gray-4"],["size","medium","cf-input","","placeholder","Nh\u1eadp m\xe3 \u0111\u01a1n h\xe0ng","autocomplete","off","formControlName","searchText"],["tableSearchInput",""],["cf-button","","type","secondary","size","medium",1,"justify-center",3,"disabled","click"],[1,"flex-auto","h-full","w-full"],[1,"h-full","pt-8","pb-4","px-[30px]","flex","justify-center"],[1,"w-[680px]","max-w-[680px]"],[1,"w-full","h-full"],[1,"flex","flex-col","gap-y-6","md:gap-y-4"],[1,"py-2.5","pr-5","pl-0","flex","gap-x-2.5","border-b","border-neutral-gray-1","cursor-pointer",3,"ngClass","click"],["tabElement",""],[1,"flex","items-center","whitespace-nowrap","text-heading-md","text-neutral-gray-4","md:text-express-md",3,"ngClass"],[1,"!text-express-xs","!p-1","bg-neutral-gray-4","ml-2",3,"color","ngClass"],["cfHint","",3,"hint"],[3,"order"]],template:function(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5,"Qu\u1ea3n l\xfd \u0111\u01a1n h\xe0ng B2C"),e.qZA()()(),e.TgZ(6,"div",5)(7,"div",6),e.YNc(8,It,7,13,"ng-container",7),e.qZA(),e.TgZ(9,"form",8)(10,"div",9)(11,"div",10)(12,"div",11),e._uU(13,"L\u1ecdc theo"),e.qZA(),e._UZ(14,"cf-select",12),e.qZA(),e.TgZ(15,"div",13)(16,"cf-input-group",14),e._UZ(17,"cf-icon",15),e.TgZ(18,"label",16),e._uU(19,"Th\u1eddi gian"),e.qZA(),e.TgZ(20,"input",17),e.NdJ("click",function(){e.CHM(r);const d=e.MAs(24);return e.KtG(d.open())})("ngModelChange",function(d){return i.dateRangeStr=d}),e.qZA(),e.TgZ(21,"div",18),e.YNc(22,Dt,1,1,"cf-input-hint",19),e.qZA()(),e.TgZ(23,"input",20,21),e.NdJ("dateSelect",function(d){e.CHM(r);const y=e.MAs(24);return e.KtG(i.onDateSelection(d,i.searchForm.controls.startTime,i.searchForm.controls.endTime,y))}),e.qZA()(),e.TgZ(25,"div",10)(26,"div",11),e._uU(27,"K\xeanh b\xe1n l\u1ebb"),e.qZA(),e._UZ(28,"cf-select",22),e.qZA(),e.TgZ(29,"div",23)(30,"button",24),e.NdJ("click",function(){return i.exportExcel()}),e._UZ(31,"cf-icon",25),e._uU(32," Xu\u1ea5t excel "),e.qZA()()(),e.TgZ(33,"div",26)(34,"div",27),e._UZ(35,"cf-select",28),e.qZA(),e.TgZ(36,"cf-input-group",29),e._UZ(37,"cf-icon",30)(38,"input",31,32),e.qZA(),e.TgZ(40,"div",23)(41,"button",33),e.NdJ("click",function(){return i.onSearch()}),e._UZ(42,"cf-icon",25),e._uU(43," T\xecm ki\u1ebfm "),e.qZA()()()()()(),e.TgZ(44,"div",34)(45,"div",35)(46,"div",36)(47,"div",37)(48,"div",38),e.YNc(49,Ut,2,1,"ng-container",7),e.ALo(50,"mapper"),e.qZA()()()()()()}2&t&&(e.xp6(8),e.Q6J("ngForOf",i.listTab),e.xp6(1),e.Q6J("formGroup",i.searchForm),e.xp6(5),e.Q6J("status","default")("data",i.timeOptions||e.DdM(32,ee))("placeholder","")("allowSearch",!0),e.xp6(2),e.Q6J("status",i.invalidTimeFilter?"error":"default"),e.xp6(4),e.Q6J("ngModel",i.dateRangeStr)("ngModelOptions",e.DdM(33,Bt)),e.xp6(2),e.Q6J("ngIf",i.invalidTimeFilter),e.xp6(1),e.Q6J("secondaryCalendar","lunar")("displayMonths",2)("rangeSelection",!0)("containerWidth",600)("startDate",i.startDate)("canReset",!1)("fromDate",i.searchForm.controls.startTime.value)("toDate",i.searchForm.controls.endTime.value),e.xp6(5),e.Q6J("status","default")("data",i.channelTypeOptions)("placeholder","")("allowSearch",!1),e.xp6(7),e.Q6J("status","default")("data",i.searchTypeOptions||e.DdM(34,ee))("placeholder","")("allowSearch",!1),e.xp6(6),e.Q6J("disabled",i.invalidTimeFilter),e.xp6(8),e.Q6J("ngForOf",e.Dn7(50,28,i.listOrderRaw,i.filterByTab,i.currentTab)))},dependencies:[l.ez,l.mk,l.sg,l.O5,At,v.q,x.j$,x.ND,x.BN,x.v2,m.AxE,m.Sm8,_.N8,_.Xq,p.u5,p._Y,p.Fj,p.JJ,p.JL,p.On,_t.b,ft.Cs,p.UX,p.sg,p.u,q.q],encapsulation:2}),n})()},80429:(j,E,s)=>{s.d(E,{q:()=>l});var c=s(94650);let l=(()=>{class p{transform(m,x,...v){return x(m,...v)}}return p.\u0275fac=function(m){return new(m||p)},p.\u0275pipe=c.Yjl({name:"mapper",type:p,pure:!0,standalone:!0}),p})()},4688:(j,E,s)=>{s.d(E,{b:()=>x});var c=s(36895),l=s(94650),p=s(72506);function _(v,h){if(1&v){const g=l.EpF();l.TgZ(0,"cf-icon",3),l.NdJ("click",function(b){l.CHM(g);const Z=l.oxw();return l.KtG(Z.close(b))}),l.qZA()}}const m=["*"];let x=(()=>{class v{constructor(g,e,b){this.renderer=g,this.elementRef=e,this.mode="default",this.type="solid",this.size="medium",this.color="red",this.onClose=new l.vpe,b.registerIcons([p.UNF])}ngOnChanges(g){this.loadClasses()}ngOnInit(){this.loadClasses()}loadClasses(){this.classes="rounded inline-flex justify-center items-center gap-x-1 "+this.getSizeClass()+" "+this.getModeClass()}getSizeClass(){return"small"===this.size?"py-1 px-2 text-express-sm":"xsmall"===this.size?"py-[2px] px-1 text-express-sm":"py-1.5 px-3 text-express-md"}getModeClass(){return"outline"===this.type?`bg-white bordertext-${this.color}-4 border-${this.color}-4`:"inverted"===this.type?`bg-${this.color}-1 text-${this.color}-4`:"gray-2"===this.color?"text-neutral-gray-6 bg-neutral-gray-2":`text-neutral-white bg-${this.color}-4`}close(g){this.onClose.emit(g),g.defaultPrevented||this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}}return v.\u0275fac=function(g){return new(g||v)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(p.KNP))},v.\u0275cmp=l.Xpm({type:v,selectors:[["cf-label"]],hostVars:2,hostBindings:function(g,e){2&g&&l.Tol(e.classes)},inputs:{mode:"mode",type:"type",size:"size",color:"color"},outputs:{onClose:"onClose"},standalone:!0,features:[l.TTD,l.jDz],ngContentSelectors:m,decls:4,vars:1,consts:[[1,"flex","justify-between","items-center","gap-x-2"],[1,"text-ellipsis","overflow-hidden","whitespace-normal","flex","items-center"],["icon","close","size","small","class","cursor-pointer",3,"click",4,"ngIf"],["icon","close","size","small",1,"cursor-pointer",3,"click"]],template:function(g,e){1&g&&(l.F$t(),l.TgZ(0,"div",0)(1,"div",1),l.Hsn(2),l.qZA(),l.YNc(3,_,1,0,"cf-icon",2),l.qZA()),2&g&&(l.xp6(3),l.Q6J("ngIf","closeable"===e.mode))},dependencies:[c.ez,c.O5,p.AxE,p.Sm8],encapsulation:2,changeDetection:0}),v})()}}]);