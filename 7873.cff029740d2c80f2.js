"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[7873],{47917:(O,D,f)=>{f.d(D,{h:()=>h});var h=(()=>{return(d=h||(h={})).B2B_GMBR="B2B_GMBR",d.B2C_GMBR="B2C_GMBR",h;var d})()},89319:(O,D,f)=>{f.r(D),f.d(D,{AddOnBaggageModalComponent:()=>ae,AddOnSeatModalComponent:()=>se,ControlErrorPipe:()=>no,PassengerInfoPageComponent:()=>to});var h=f(36895),d=f(24006),C=f(10908),S=f(83700),b=f(87683),$=f(88516),T=f(72506),K=f(44143),H=f(19123),z=f(74713),N=f(67534),X=f(47917),Z=f(65858),Q=f(57085),Y=f(44890),u=f(88001),U=f(34541),me=f(7453),ve=f(57716),Ce=f(25614),V=f(40899),ye=f(3447),xe=f(35650),ne=f(43201),E=f(15439),be=f(77579),R=f(28746),Ie=f(78372),ce=f(18505),Te=f(70262),le=f(17414),Pe=f(60515),Ee=f(23151),Ae=f(82805),de=f(82722),Se=f(56451),j=f(62331),e=f(94650),ie=f(99251),ue=f(58273),ke=f(36634),W=f(97579),oe=f(9381);function De(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"cf-add-on-baggage",13),e.NdJ("baggageSelectedChange",function(o){const s=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.onBaggageSelected(o,s.journeys))}),e.qZA(),e.BQk()}if(2&i){const t=l.$implicit,n=l.index;e.xp6(1),e.Q6J("passengerIndex",n)("passenger",t)("listJourney",t.journeys)}}function Ne(i,l){if(1&i&&(e.TgZ(0,"div",11),e.YNc(1,De,2,3,"ng-container",12),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.dataBaggageInput)}}function Ze(i,l){if(1&i&&e._UZ(0,"cf-confirm-add-on",14),2&i){const t=e.oxw(2);e.Q6J("serviceSelected",t.serviceSelected)}}function Fe(i,l){if(1&i&&(e.TgZ(0,"div",8),e.YNc(1,Ne,2,1,"div",9),e.YNc(2,Ze,1,1,"ng-template",null,10,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf","addon"===n.mode)("ngIfElse",t)}}function Be(i,l){1&i&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton")(2,"ticket-item-skeleton"),e.qZA())}const ge=function(i){return{"opacity-50 cursor-default pointer-events-none":i}};function Je(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",15)(2,"button",16),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onClearBaggage())}),e._UZ(3,"cf-icon",17),e.TgZ(4,"span"),e._uU(5,"H\u1ee7y d\u1ecbch v\u1ee5"),e.qZA()(),e.TgZ(6,"div",18)(7,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.close())}),e._uU(8," \u0110\xf3ng "),e.qZA(),e.TgZ(9,"button",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),a=e.MAs(12);return e.KtG(o.onAddonBaggage(a))}),e._UZ(10,"cf-icon",21),e.TgZ(11,"span"),e._uU(12,"Th\u1ef1c hi\u1ec7n"),e.qZA()()()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngClass",e.VKq(2,ge,!t.hasBaggageSelected)),e.xp6(7),e.Q6J("ngClass",e.VKq(4,ge,!t.isEnableAddBaggage()))}}function we(i,l){1&i&&e._UZ(0,"cf-icon",26)}function Me(i,l){1&i&&e._UZ(0,"cf-icon",26)}function qe(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",22)(2,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onReview())}),e._uU(3," Ki\u1ec3m tra l\u1ea1i "),e.YNc(4,we,1,0,"cf-icon",24),e.qZA(),e.TgZ(5,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onConfirm())}),e._UZ(6,"cf-icon",21),e._uU(7," X\xe1c nh\u1eadn "),e.YNc(8,Me,1,0,"cf-icon",24),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.isLoading),e.xp6(2),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("disabled",t.isLoading),e.xp6(3),e.Q6J("ngIf",t.isLoading)}}function Qe(i,l){1&i&&e._UZ(0,"cf-icon",26)}function Ue(i,l){1&i&&e._UZ(0,"cf-icon",26)}function Oe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",28),e._UZ(2,"cf-confirm-add-on",14),e.qZA(),e.TgZ(3,"div",29)(4,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onReview())}),e._uU(5," Ki\u1ec3m tra l\u1ea1i "),e.YNc(6,Qe,1,0,"cf-icon",24),e.qZA(),e.TgZ(7,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onConfirm())}),e._UZ(8,"cf-icon",21),e._uU(9," X\xe1c nh\u1eadn "),e.YNc(10,Ue,1,0,"cf-icon",24),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("serviceSelected",t.serviceSelected),e.xp6(2),e.Q6J("disabled",t.isLoading),e.xp6(2),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("disabled",t.isLoading),e.xp6(3),e.Q6J("ngIf",t.isLoading)}}function Ye(i,l){1&i&&e._UZ(0,"cf-spinner")}let ae=(()=>{class i{constructor(t,n,o,a,s,r,p,g,c,_,v){this.cfIconRegister=t,this._bookFlightService=n,this._manageBookingService=o,this._addOnBaggageDataProvider=a,this.ref=s,this.bottomSheetData=r,this.bottomSheetRef=p,this._toastService=g,this._modal=c,this._mobileDetectService=_,this._bottomSheetService=v,this.dataBaggageInput=[],this.dataBaggageSource=[],this.mode="addon",this.hasBaggageSelected=!1,this.isLoading=!1,this.isSkeleton=!1,this.isChangeBag=!1,t.registerIcons([T.UNF,T.Hge,T.B2I,T.PcQ]),s&&(this.dataBaggageInput=s.data.dataBaggageInput,this.addonBaggageReq=s.data.addonBaggageReq,this.type=s.data.type,this.bookingInfo=s.data.bookingInfo),r&&(this.dataBaggageInput=r.dataBaggageInput,this.addonBaggageReq=r.addonBaggageReq,this.type=r.type,this.bookingInfo=r.bookingInfo),this.dataBaggageSource=this.dataBaggageInput.map(m=>Object.assign(Object.assign({},m),{journeys:m.journeys.map(y=>Object.assign(Object.assign({},y),{baggageSelected:Object.assign({},y.baggageSelected)}))}))}ngOnInit(){this.loadBaggage(),this.hasBaggageSelected=this.dataBaggageInput.some(t=>t.journeys.some(n=>n.baggageSelected.baggageKey))}checkHasBaggage(){this.hasBaggageSelected=this.dataBaggageInput.some(t=>t.journeys.some(n=>n.baggageSelected.baggageKey))}proccessDataApi(t){if(t.every(n=>"ERROR"===n.status))return this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"Kh\xf4ng l\u1ea5y \u0111\u01b0\u1ee3c th\xf4ng tin h\xe0nh l\xfd",sticky:!0}),void this.ref.close(!1);this.dataBaggageInput.forEach(n=>{n.journeys.forEach((o,a)=>{var s,r;const p=t.find(g=>{var c,_;return o.flight===(null===(c=g.flight)||void 0===c?void 0:c.airline.concat(" ",null===(_=g.flight)||void 0===_?void 0:_.flightNumber))});if(p){const g=null!==(r=null===(s=p.bagOptions)||void 0===s?void 0:s.map(c=>{var _,v,m;const y=c.chargeBreakdown.filter(I=>"ADULT"===I.passengerType&&["ADULT","ADT","adult"].includes(n.passengerType)||"CHILD"===I.passengerType&&["CHILD","CHD","child"].includes(n.passengerType)||"ALL"===I.passengerType).reduce((I,k)=>I+k.feeCharge.charge.total,0);return{ssrCode:null===(_=c.baggageInfo.infos)||void 0===_?void 0:_.code,unit:null===(v=c.baggageInfo.infos)||void 0===v?void 0:v.unit,weight:null===(m=c.baggageInfo.infos)||void 0===m?void 0:m.weight,baggageKey:c.key,baggageName:c.baggageInfo.infos.name||c.baggageInfo.infos.code,baggageDisplay:(c.baggageInfo.infos.name||c.baggageInfo.infos.code)+" - "+new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(y),totalCharge:y}}))&&void 0!==r?r:[];o.containerKey=p.key,g.unshift({baggageKey:"",baggageDisplay:"Kh\xf4ng mua d\u1ecbch v\u1ee5 h\xe0nh l\xfd"}),o.baggageOptions=g}else o.error=!0,o.containerKey="",o.baggageOptions=[]})})}baggageObservable(){return this._bookFlightService.getBaggage(this.addonBaggageReq)}isEnableAddBaggage(){return!(!this.isChangeBag||"baggage_addon"===this.type&&!this.hasBaggageSelected||"get_baggage"===this.type&&!this.hasBaggageSelected)}loadBaggage(){var t;this.isSkeleton=!0,null===(t=this.baggageObservable())||void 0===t||t.pipe((0,R.x)(()=>this.isSkeleton=!1)).subscribe({next:n=>{"OK"===n.status?this.proccessDataApi(n.data):this.ref.close(n)},error:n=>{console.log(n)}})}close(){"baggage_addon"===this.type?this._mobileDetectService.isMobile()?this._bottomSheetService.dismiss():this.ref.close(!1):(this.dataBaggageInput=this.dataBaggageSource,this._mobileDetectService.isMobile()?this.bottomSheetRef.dismiss(this.dataBaggageSource):this.ref.close(this.dataBaggageSource))}onAddonBaggage(t){if(this.hasBaggageSelected){const n=this.dataBaggageInput.map(s=>({baggageSelected:s.journeys.map(r=>({leg:r.leg,airlineLogo:r.airlineLogo,airlineName:r.airlineName,journeyKey:r.journeyKey,segmentKey:r.containerKey,departDate:r.startTime,flight:`${r.startCode} - ${r.endCode}`,flightNumber:r.flightNumber,serviceKey:r.baggageSelected.baggageKey,serviceName:r.baggageSelected.baggageName,passengerName:s.passengerName,passengerKey:s.passengerKey,unitPrice:r.baggageSelected.totalCharge,startTime:r.startTime,ssrCode:r.baggageSelected.ssrCode,unit:r.baggageSelected.unit,weight:r.baggageSelected.weight,addBaggageFee:s.addBaggageFee}))})).flatMap(s=>s.baggageSelected).filter(s=>s.serviceName),o=n.reduce((s,r)=>s+r.unitPrice,0),a=n.reduce((s,r)=>s+r.addBaggageFee,0);if("baggage_addon"===this.type&&"VJ"==this.bookingInfo.airline&&"ISSUED"==this.bookingInfo.bookingStatus){let s={addOnBags:n.map(r=>({bagInfo:{bagKey:r.serviceKey,ssrCode:r.ssrCode,unit:r.unit,weight:r.weight},journey:{key:r.journeyKey},passenger:{key:r.passengerKey},price:r.unitPrice,segment:{key:r.segmentKey,flightNumber:r.flightNumber}})),airline:this.bookingInfo.airline,bookingCode:this.bookingInfo.bookingCode,provider:this.bookingInfo.provider};this.isLoading=!0,this._manageBookingService.quotationAddOnBaggage(s).pipe((0,R.x)(()=>this.isLoading=!1)).subscribe({next:r=>{var p,g,c,_,v,m,y;if("OK"===r.status){if(this.mode="confirm",this.serviceSelected={services:n,serviceCharge:a,totalPrice:o,refund:(null===(p=r.data.refund)||void 0===p?void 0:p.total)||0,totalRefund:(null===(g=r.data.totalRefund)||void 0===g?void 0:g.total)||0,remainingCredit:null!==(c=r.data.totalRefund)&&void 0!==c&&c.total?(null===(_=r.data.totalRefund)||void 0===_?void 0:_.total)-((null===(v=r.data.refund)||void 0===v?void 0:v.total)||0):0,totalAmount:r.data.totalCharge},this._mobileDetectService.isMobile()){const I=this._bottomSheetService.open(t,{headerTitle:"X\xe1c nh\u1eadn h\xe0nh l\xfd",containerFullHeigh:!0,rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4"});I.containerInstance._leftButtonClick.subscribe(k=>{I.dismiss(),this.onReview()})}}else{const I=(null===(y=null===(m=r.objectError)||void 0===m?void 0:m.errorDescription)||void 0===y?void 0:y.vi)||"C\xf3 l\u1ed7i x\u1ea3y ra trong qu\xe1 tr\xecnh Th\xeam h\xe0nh l\xfd. Vui l\xf2ng th\u1eed l\u1ea1i.";this._toastService.add({severity:"error",summary:"T\xednh gi\xe1 th\u1ea5t b\u1ea1i",detail:I,sticky:!0})}},error:r=>{this.isLoading=!1,this._toastService.add({severity:"error",summary:"T\xednh gi\xe1 th\u1ea5t b\u1ea1i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra trong qu\xe1 tr\xecnh Th\xeam h\xe0nh l\xfd. Vui l\xf2ng th\u1eed l\u1ea1i.",sticky:!0})}})}else if(this.mode="confirm",this.serviceSelected={services:n,serviceCharge:a,totalPrice:o,totalAmount:a+o},this._mobileDetectService.isMobile()){const s=this._bottomSheetService.open(t,{headerTitle:"X\xe1c nh\u1eadn h\xe0nh l\xfd",containerFullHeigh:!0,rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4"});s.containerInstance._leftButtonClick.subscribe(r=>{s.dismiss(),this.onReview()})}}else this.ref.close("baggage_addon"!==this.type&&this.dataBaggageInput)}onReview(){this.mode="addon",this._mobileDetectService.isMobile()&&this._bottomSheetService.dismiss()}onBaggageSelected(t,n){this.isChangeBag=!0;const o=n.findIndex(a=>a.journeyKey===t.journeyKey);-1!=o&&(n[o].baggageSelected=t),this.checkHasBaggage()}onConfirm(){if("baggage_addon"===this.type){const t={addOnBags:this.serviceSelected.services.map(n=>({bagInfo:{bagKey:n.serviceKey,ssrCode:n.ssrCode,unit:n.unit,weight:n.weight?n.weight+"":""},journey:{key:n.journeyKey},passenger:{key:n.passengerKey},price:n.unitPrice,segment:{key:n.segmentKey,flightNumber:n.flightNumber}})),airline:this.bookingInfo.airline,bookingCode:this.bookingInfo.bookingCode,confirmPrice:this.serviceSelected.totalAmount,provider:this.bookingInfo.provider,supplier:this.bookingInfo.supplier};this.isLoading=!0,this._manageBookingService.addonBaggages(t).pipe((0,R.x)(()=>this.isLoading=!1)).subscribe({next:n=>{this.isLoading=!1,this._mobileDetectService.isMobile()?(this._bottomSheetService.dismiss(),this.bottomSheetRef.dismiss(n)):this.ref.close(n)},error:()=>{this._mobileDetectService.isMobile()?(this._bottomSheetService.dismiss(),this.bottomSheetRef.dismiss()):this.ref.close(!1)}})}else this._toastService.add({severity:"success",summary:"Th\xeam h\xe0nh l\xfd th\xe0nh c\xf4ng!",detail:"\u0110\xe3 th\xeam h\xe0nh l\xfd th\xe0nh c\xf4ng cho chuy\u1ebfn bay \u0111\u01b0\u1ee3c ch\u1ecdn",sticky:!1}),this._mobileDetectService.isMobile()?(this._bottomSheetService.dismiss(),this.bottomSheetRef.dismiss(this.dataBaggageInput)):this.ref.close(this.dataBaggageInput)}onClearBaggage(){this._modal.open(N.V0,{title:"X\xe1c nh\u1eadn h\u1ee7y d\u1ecbch v\u1ee5 h\xe0nh l\xfd",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y d\u1ecbch v\u1ee5 h\xe0nh l\xfd k\xed g\u1eedi \u0111\xe3 th\xeam?",okText:"C\xf3, h\u1ee7y d\u1ecbch v\u1ee5",cancelText:"Kh\xf4ng"}).afterClosed$.subscribe({next:n=>{n.data&&(this.dataBaggageInput=this.dataBaggageInput.map(o=>Object.assign(Object.assign({},o),{journeys:o.journeys.map(a=>Object.assign(Object.assign({},a),{baggageSelected:{baggageName:"",baggageKey:"",containerKey:"",totalCharge:0}}))})),this.dataBaggageSource=this.dataBaggageInput,this.hasBaggageSelected=!1)}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.KNP),e.Y36(ie.Fj),e.Y36(ue.fB),e.Y36(ke.U),e.Y36(W.gb,8),e.Y36(C.Rr,8),e.Y36(C.Zu,8),e.Y36(j.BX),e.Y36(W.oE),e.Y36(oe.L),e.Y36(C.a2))},i.\u0275cmp=e.Xpm({type:i,selectors:[["add-on-baggage-modal"]],standalone:!0,features:[e.jDz],decls:14,vars:7,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],["class","px-6 pt-6 overflow-auto md:p-4",4,"ngIf"],[4,"ngIf"],[1,"p-6","md:p-4"],["mobileConfirm",""],[1,"px-6","pt-6","overflow-auto","md:p-4"],["class","flex flex-col gap-y-4",4,"ngIf","ngIfElse"],["confirmTempalate",""],[1,"flex","flex-col","gap-y-4"],[4,"ngFor","ngForOf"],[3,"passengerIndex","passenger","listJourney","baggageSelectedChange"],[3,"serviceSelected"],[1,"flex","justify-between"],["cf-button","","size","medium","type","secondary",1,"flex","items-center","gap-x-2","md:hidden",3,"ngClass","click"],["icon","delete","size","small"],[1,"flex","gap-x-2","md:w-full"],["cf-button","","size","medium","type","secondary",1,"md:w-full","justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"md:w-full","justify-center",3,"ngClass","click"],["icon","circle_check","size","small",1,"mr-2.5"],[1,"flex","justify-end","gap-x-2","md:bg-neutral-white"],["cf-button","","size","medium","type","secondary",1,"md:w-full","justify-center",3,"disabled","click"],["class","ml-2.5 animate-spin","icon","rotate_left","size","small",4,"ngIf"],["cf-button","","size","medium","color","primary-1",1,"md:w-full","justify-center",3,"disabled","click"],["icon","rotate_left","size","small",1,"ml-2.5","animate-spin"],[1,"flex","flex-col","w-full","justify-between","bg-neutral-gray-2"],[1,"p-4","overflow-y-auto"],[1,"flex","justify-end","gap-x-2","md:bg-neutral-white","p-4"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Th\xeam h\xe0nh l\xfd"),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return n.close()}),e.qZA()(),e.YNc(5,Fe,4,2,"div",4),e.YNc(6,Be,3,0,"div",5),e.TgZ(7,"div",6),e.YNc(8,Je,13,6,"ng-container",5),e.YNc(9,qe,9,4,"ng-container",5),e.qZA()(),e._UZ(10,"cf-toast"),e.YNc(11,Oe,11,5,"ng-template",null,7,e.W1O),e.YNc(13,Ye,1,0,"cf-spinner",5)),2&t&&(e.ekj("md:bg-neutral-gray-2","addon"!==n.mode),e.xp6(5),e.Q6J("ngIf",!n.isSkeleton),e.xp6(1),e.Q6J("ngIf",n.isSkeleton),e.xp6(2),e.Q6J("ngIf","addon"===n.mode),e.xp6(1),e.Q6J("ngIf","addon"!==n.mode),e.xp6(4),e.Q6J("ngIf",n.isLoading))},dependencies:[h.ez,h.mk,h.sg,h.O5,T.AxE,T.Sm8,S.N8,S.Xq,N.FL,N.Mk,j.hj,Y.IA,N.OR,C.DW],encapsulation:2}),i})();var pe=f(19010),he=f(3803),Re=f(86432),_e=f(62733);function Ge(i,l){if(1&i&&(e.TgZ(0,"div",25)(1,"div",26),e._uU(2),e.qZA(),e.TgZ(3,"div",27)(4,"div",28),e._uU(5),e.qZA(),e.TgZ(6,"div",29),e._uU(7),e.qZA()()()),2&i){const t=l.active,n=e.oxw(),o=n.index,a=n.$implicit;e.xp6(1),e.ekj("!text-primary-2-4",t)("!bg-primary-2-1",t),e.xp6(1),e.hij(" ",o+1," "),e.xp6(3),e.AsE("",a.startCode," - ",a.endCode,""),e.xp6(2),e.Oqu(a.departDate)}}const Ve=function(i){return{"border-l border-r border-neutral-gray-1":i}};function Ke(i,l){if(1&i&&(e.TgZ(0,"cf-tab",23),e.YNc(1,Ge,8,8,"ng-template",null,24,e.W1O),e.qZA()),2&i){const t=l.$implicit,n=e.MAs(2);e.Q6J("ngClass",e.VKq(3,Ve,t.active))("active",t.active)("title",n)}}function He(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",20)(1,"cf-tabset",21),e.NdJ("selectedIndexChange",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onTabChangeIndex(o))}),e.YNc(2,Ke,3,5,"cf-tab",22),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.dataSeatInput)}}function je(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"cf-add-on-seat",33),e.NdJ("seatValueChange",function(o){e.CHM(t);const a=e.oxw(3);return e.KtG(a.onSeatChange(o))}),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("segmentSelected",t.segmentSelected)}}function Le(i,l){if(1&i&&(e.TgZ(0,"div",34),e.O4$(),e.TgZ(1,"svg",35),e._UZ(2,"path",36)(3,"path",37),e.TgZ(4,"g",38),e._UZ(5,"path",39),e.qZA(),e._UZ(6,"path",40)(7,"path",41)(8,"path",42)(9,"path",43)(10,"path",44)(11,"path",45)(12,"path",46)(13,"path",47)(14,"path",48)(15,"path",49)(16,"path",50)(17,"path",51)(18,"path",52)(19,"path",53)(20,"path",54),e.TgZ(21,"defs")(22,"filter",55),e._UZ(23,"feFlood",56)(24,"feColorMatrix",57)(25,"feMorphology",58)(26,"feOffset",59)(27,"feGaussianBlur",60)(28,"feColorMatrix",61)(29,"feBlend",62)(30,"feColorMatrix",57)(31,"feMorphology",63)(32,"feOffset",64)(33,"feGaussianBlur",65)(34,"feColorMatrix",66)(35,"feBlend",67)(36,"feBlend",68),e.qZA(),e.TgZ(37,"linearGradient",69),e._UZ(38,"stop",70)(39,"stop",71),e.qZA()()(),e.kcU(),e.TgZ(40,"div",72),e._uU(41),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(41),e.Oqu(t.segmentSelected.errorMsg)}}function $e(i,l){if(1&i&&(e.TgZ(0,"div",30),e.YNc(1,je,1,1,"cf-add-on-seat",31),e.YNc(2,Le,42,1,"div",32),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","OK"===t.segmentSelected.status),e.xp6(1),e.Q6J("ngIf","ERROR"===t.segmentSelected.status)}}function ze(i,l){1&i&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton")(2,"ticket-item-skeleton")(3,"ticket-item-skeleton")(4,"ticket-item-skeleton")(5,"ticket-item-skeleton"),e.qZA())}const re=function(i){return{"opacity-50 cursor-default pointer-events-none":i}};function Xe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",73),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onNextSegment())}),e.TgZ(1,"span"),e._uU(2,"Ti\u1ebfp theo"),e.qZA(),e._UZ(3,"cf-icon",74),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(1,re,!t.isAllCurrentSeatSelected()))}}const fe=function(i){return{"min-h-[70vh]":i}};function We(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"div",6),e._uU(3,"Th\xeam ch\u1ed7 ng\u1ed3i"),e.qZA(),e.TgZ(4,"cf-icon",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.close())}),e.qZA()(),e.TgZ(5,"div",8)(6,"div",9),e.YNc(7,He,3,1,"div",10),e.YNc(8,$e,3,2,"div",11),e.YNc(9,ze,6,0,"div",1),e.qZA()(),e.TgZ(10,"div",12)(11,"button",13),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onClearSeat())}),e._UZ(12,"cf-icon",14),e.TgZ(13,"span"),e._uU(14,"H\u1ee7y d\u1ecbch v\u1ee5"),e.qZA()(),e.TgZ(15,"div",15)(16,"button",16),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.close())}),e._uU(17," \u0110\xf3ng "),e.qZA(),e.YNc(18,Xe,4,3,"button",17),e.TgZ(19,"button",18),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),a=e.MAs(5);return e.KtG(o.onAddSeat(a))}),e._UZ(20,"cf-icon",19),e.TgZ(21,"span"),e._uU(22,"Ho\xe0n th\xe0nh"),e.qZA()()()()()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(7,fe,"addon"===t.mode)),e.xp6(7),e.Q6J("ngIf",t.isShow),e.xp6(1),e.Q6J("ngIf",t.isShow),e.xp6(1),e.Q6J("ngIf",!t.isShow),e.xp6(2),e.Q6J("ngClass",e.VKq(9,re,!t.hasSeatSelected)),e.xp6(7),e.Q6J("ngIf",t.hasContinueButton),e.xp6(1),e.Q6J("ngClass",e.VKq(11,re,!t.isCompleteSeatSelected()))}}function et(i,l){1&i&&e._UZ(0,"cf-spinner")}function tt(i,l){1&i&&e._UZ(0,"cf-icon",84)}function nt(i,l){1&i&&e._UZ(0,"cf-icon",84)}function it(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",75)(1,"div",76)(2,"div",6),e._uU(3,"Th\xeam ch\u1ed7 ng\u1ed3i"),e.qZA(),e.TgZ(4,"cf-icon",77),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.close())}),e.qZA()(),e.TgZ(5,"div",78),e._UZ(6,"cf-confirm-add-on",79),e.qZA(),e.TgZ(7,"div",80)(8,"button",81),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onReview())}),e._uU(9," Ki\u1ec3m tra l\u1ea1i "),e.YNc(10,tt,1,0,"cf-icon",82),e.qZA(),e.TgZ(11,"button",83),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onConfirm())}),e._UZ(12,"cf-icon",19),e.TgZ(13,"span"),e._uU(14,"X\xe1c nh\u1eadn"),e.qZA(),e.YNc(15,nt,1,0,"cf-icon",82),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(6,fe,"addon"===t.mode)),e.xp6(6),e.Q6J("serviceSelected",t.serviceSelected),e.xp6(2),e.Q6J("disabled",t.isLoading),e.xp6(2),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("disabled",t.isLoading),e.xp6(4),e.Q6J("ngIf",t.isLoading)}}function ot(i,l){1&i&&e._UZ(0,"cf-icon",84)}function at(i,l){1&i&&e._UZ(0,"cf-icon",84)}function rt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",85)(1,"div",86),e._UZ(2,"cf-confirm-add-on",79),e.qZA(),e.TgZ(3,"div",87)(4,"button",88),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onReview())}),e._uU(5," Ki\u1ec3m tra l\u1ea1i "),e.YNc(6,ot,1,0,"cf-icon",82),e.qZA(),e.TgZ(7,"button",89),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onConfirm())}),e._UZ(8,"cf-icon",19),e._uU(9," X\xe1c nh\u1eadn "),e.YNc(10,at,1,0,"cf-icon",82),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("serviceSelected",t.serviceSelected),e.xp6(2),e.Q6J("disabled",t.isLoading),e.xp6(2),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("disabled",t.isLoading),e.xp6(3),e.Q6J("ngIf",t.isLoading)}}let se=(()=>{class i{constructor(t,n,o,a,s,r,p,g,c,_,v,m){this.ref=t,this.bottomSheetData=n,this.bottomSheetRef=o,this.cfIconRegister=a,this._ticketSelectedDataProvider=s,this._flightDataService=r,this._bookFlightService=p,this._manageBookingService=g,this._addOnSeatDataProvider=c,this._toastService=_,this._mobileDetectService=v,this._bottomSheetService=m,this.currentLeg=0,this.mode="addon",this.isShow=!1,this.isContinueSegment=!1,this.dataSeatInput=[],this.dataSeatInputSource=[],this.isLoading=!1,this.hasContinueButton=!1,this.isChangeSeat=!1,this.hasSeatSelected=!1,a.registerIcons([T.UNF,T.xgX,T.Hge,T.PcQ,T.toh]),this.ticketSelected=s.ticketSelectedData,t&&(this.dataSeatInputSource=t.data.dataSeatInput,this.addonSeatReq=t.data.addonSeatReq,this.type=t.data.type,this.bookingInfo=t.data.bookingInfo),n&&(this.dataSeatInputSource=n.dataSeatInput,this.addonSeatReq=n.addonSeatReq,this.type=n.type,this.bookingInfo=n.bookingInfo),this.dataSeatInput=this.dataSeatInputSource.map(y=>Object.assign(Object.assign({},y),{passengers:y.passengers.map(I=>Object.assign(Object.assign({},I),{seatSelected:I.seatSelected}))})),this.hasContinueButton=this.dataSeatInput.length>1}ngOnInit(){this.loadSeatMap()}proccessDataApi(t){this.dataSeatInput.forEach(n=>{const o=[],a=n.airline.concat(n.flightNumber),s=t.find(r=>{var p,g;return(null===(p=r.seatSegment)||void 0===p?void 0:p.airline.concat(null===(g=r.seatSegment)||void 0===g?void 0:g.flightNumber))===a});if(s){const r=s.seatMap,p=r.map(_=>_.row).sort((_,v)=>_-v);r.forEach(_=>{_.seatOptions.forEach(v=>{o.push(v.mapCell.identifier)})});const g=[...new Set(o)].sort(),c=r.map(_=>({row:_.row,seatOptions:_.seatOptions.map(v=>({available:v.available,includeInfant:v.includeInfant,col:v.mapCell.identifier,row:v.mapCell.row,key:v.key,totalPrice:v.feeCharge.charge.total}))}));n.seatSegment={rows:p,cols:g,containerKey:s.key,seatMaps:c},n.status="OK"}else n.status="ERROR",n.errorMsg="Kh\xf4ng l\u1ea5y \u0111\u01b0\u1ee3c danh s\xe1ch ch\u1ed7 ng\u1ed3i c\u1ee7a h\xe0nh tr\xecnh. Vui l\xf2ng li\xean h\u1ec7 Booker \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3."}),this.isShow=!0,this.segmentSelected=Object.assign({},this.dataSeatInput[this.currentLeg]),this.hasSeatSelected=this.segmentSelected.passengers.every(n=>n.seatSelected.seat)}loadSeatMap(){var t;null===(t=this.seatMapObservable())||void 0===t||t.subscribe({next:n=>{"OK"===n.status?this.proccessDataApi(n.data):this.ref.close(n)}})}seatMapObservable(){return this._bookFlightService.getSeatOptions(this.addonSeatReq)}close(){this.ref.close(!1)}isExistSeat(t){return this.segmentSelected.passengers.map(n=>n.seatSelected.seat).includes(t)}onSeatChange(t){this.isChangeSeat=!0;const n=t.row+t.col,o=this.segmentSelected.passengers.find(s=>s.passengerKey===t.passengerKey),a=this.segmentSelected.passengers.find(s=>s.seatSelected.seat===n);this.isExistSeat(n)?a&&(a.seatSelected={containerKey:"",seat:"",row:-1,col:"",seatKey:"",totalPrice:0}):o&&(o.seatSelected={containerKey:t.containerKey,seat:n,row:t.row,col:t.col,seatKey:t.seatKey,totalPrice:t.totalPrice}),this.segmentSelected=Object.assign({},this.segmentSelected),this.isContinueSegment=this.segmentSelected.passengers.every(s=>s.seatSelected.seat),this.hasSeatSelected=this.segmentSelected.passengers.every(s=>s.seatSelected.seat)}onTabChangeIndex(t){this.currentLeg=t,this.dataSeatInput.forEach((n,o)=>{this.dataSeatInput[o].active=o===t}),this.segmentSelected=this.dataSeatInput[this.currentLeg]}onAddSeat(t){if(this.isCompleteSeatSelected()){this.mode="confirm";const n=this.dataSeatInput.filter(s=>s.available).map(s=>({seatSelected:s.passengers.map(r=>({leg:s.leg,airlineLogo:s.airlineLogo,journeyKey:s.journeyKey,departDate:s.departDate,flight:`${s.startCode} - ${s.endCode}`,serviceKey:r.seatSelected.seatKey,serviceName:r.seatSelected.seat,serviceNumber:r.seatSelected.seat,passengerName:r.passengerName,passengerKey:r.passengerKey,segmentKey:s.segmentKey,containerKey:s.seatSegment.containerKey,unitPrice:r.seatSelected.totalPrice,startTime:"",addSeatFee:r.addSeatFee}))})).flatMap(s=>s.seatSelected).filter(s=>s.serviceName),o=n.reduce((s,r)=>s+r.unitPrice,0),a=n.reduce((s,r)=>s+r.addSeatFee,0);if("seat_addon"===this.type&&"VJ"==this.bookingInfo.airline&&"ISSUED"==this.bookingInfo.bookingStatus){const s={addSeats:n.map(r=>({seatInfo:{seatKey:r.serviceKey,seatNumber:r.serviceNumber},journey:{key:r.journeyKey},passenger:{key:r.passengerKey},price:r.unitPrice,segment:{key:r.segmentKey}})),provider:this.bookingInfo.provider,airline:this.bookingInfo.airline,bookingCode:this.bookingInfo.bookingCode};this.isLoading=!0,this._manageBookingService.quotationAddOnSeat(s).pipe((0,R.x)(()=>this.isLoading=!1)).subscribe({next:r=>{var p,g,c,_,v,m;if("OK"===r.status){if(this.serviceSelected={services:n,serviceCharge:a,totalPrice:o,refund:r.data.refund.total,totalRefund:(null===(p=r.data.totalRefund)||void 0===p?void 0:p.total)||0,remainingCredit:null!==(g=r.data.totalRefund)&&void 0!==g&&g.total?(null===(c=r.data.totalRefund)||void 0===c?void 0:c.total)-((null===(_=r.data.refund)||void 0===_?void 0:_.total)||0):0,totalAmount:r.data.totalCharge},this.mode="confirm",this._mobileDetectService.isMobile()){const y=this._bottomSheetService.open(t,{headerTitle:"X\xe1c nh\u1eadn ch\u1ed7 ng\u1ed3i",containerFullHeigh:!0,rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4"});y.containerInstance._leftButtonClick.subscribe(I=>{y.dismiss(),this.onReview()})}}else{const y=(null===(m=null===(v=r.objectError)||void 0===v?void 0:v.errorDescription)||void 0===m?void 0:m.vi)||"C\xf3 l\u1ed7i x\u1ea3y ra trong qu\xe1 tr\xecnh Th\xeam ch\u1ed7 ng\u1ed3i. Vui l\xf2ng th\u1eed l\u1ea1i.";this._toastService.add({severity:"error",summary:"T\xednh gi\xe1 th\u1ea5t b\u1ea1i",detail:y,sticky:!0})}},error:r=>{this.isLoading=!1,this._toastService.add({severity:"error",summary:"T\xednh gi\xe1 th\u1ea5t b\u1ea1i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra trong qu\xe1 tr\xecnh Th\xeam ch\u1ed7 ng\u1ed3i. Vui l\xf2ng th\u1eed l\u1ea1i.",sticky:!0})}})}else if(this.serviceSelected={services:n,serviceCharge:a,totalPrice:o,totalAmount:a+o},this._mobileDetectService.isMobile()){const s=this._bottomSheetService.open(t,{headerTitle:"X\xe1c nh\u1eadn ch\u1ed7 ng\u1ed3i",containerFullHeigh:!0,rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4"});s.containerInstance._leftButtonClick.subscribe(r=>{s.dismiss(),this.onReview()})}}else this.ref.close("seat_addon"!==this.type&&this.dataSeatInput)}onReview(){this.mode="addon",this._mobileDetectService.isMobile()&&this._bottomSheetService.dismiss()}onNextSegment(){let t=this.currentLeg+1;t>this.dataSeatInput.length-1&&(t=0),this.onTabChangeIndex(t)}onConfirm(){if("seat_addon"===this.type){const t={addSeats:this.serviceSelected.services.map(n=>({journey:{key:n.journeyKey},passenger:{key:n.passengerKey},price:n.unitPrice,seatInfo:{seatKey:n.serviceKey,seatNumber:n.serviceNumber},segment:{key:n.segmentKey},sessionKey:n.containerKey||""})),airline:this.bookingInfo.airline,bookingCode:this.bookingInfo.bookingCode,payNow:this.bookingInfo.payNow,confirmPrice:this.serviceSelected.totalAmount,provider:this.bookingInfo.provider,supplier:this.bookingInfo.supplier};this.isLoading=!0,this._manageBookingService.addonSeats(t).subscribe({next:n=>{this.isLoading=!1,this._mobileDetectService.isMobile()?(this._bottomSheetService.dismiss(),this.bottomSheetRef.dismiss(n)):this.ref.close(n)},error:n=>{this._mobileDetectService.isMobile()?(this._bottomSheetService.dismiss(),this.bottomSheetRef.dismiss()):this.ref.close(!1),this.isLoading=!1,this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"Th\xeam ch\u1ed7 ng\u1ed3i kh\xf4ng th\xe0nh c\xf4ng, vui l\xf2ng th\u1eed l\u1ea1i sau ho\u1eb7c li\xean h\u1ec7 \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3,",sticky:!0})}})}else this._toastService.add({severity:"success",summary:"Th\xeam ch\u1ed7 ng\u1ed3i th\xe0nh c\xf4ng!",detail:"\u0110\xe3 th\xeam ch\u1ed7 ng\u1ed3i th\xe0nh c\xf4ng cho chuy\u1ebfn bay \u0111\u01b0\u1ee3c ch\u1ecdn",sticky:!1}),this.dataSeatInput=this.dataSeatInput.filter(t=>t.available),this.dataSeatInputSource=this.dataSeatInput.filter(t=>t.available),this._mobileDetectService.isMobile()?(this._bottomSheetService.dismiss(),this.bottomSheetRef.dismiss(this.dataSeatInput)):this.ref.close(this.dataSeatInput)}onClearSeat(){this.dataSeatInput.forEach(t=>{t.passengers.forEach(n=>{n.seatSelected={containerKey:"",seat:"",seatKey:"",totalPrice:0}})}),this.isChangeSeat=!0,this.segmentSelected=Object.assign({},this.dataSeatInput[this.currentLeg]),this.hasSeatSelected=this.segmentSelected.passengers.every(t=>t.seatSelected.seat)}isAllCurrentSeatSelected(){var t;return null===(t=this.segmentSelected)||void 0===t?void 0:t.passengers.every(n=>n.seatSelected.seat)}isCompleteSeatSelected(){let t=!0,n=!1;return this.dataSeatInput.forEach(o=>{o.passengers.every(a=>!a.seatSelected.containerKey)||(n=!0,t=t&&o.passengers.every(a=>!!a.seatSelected.containerKey))}),t&&n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(W.gb,8),e.Y36(C.Rr,8),e.Y36(C.Zu,8),e.Y36(T.KNP),e.Y36(he.h),e.Y36(_e.G),e.Y36(ie.Fj),e.Y36(ue.fB),e.Y36(Re.h),e.Y36(j.BX),e.Y36(oe.L),e.Y36(C.a2))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-on-seat-modal"]],standalone:!0,features:[e.jDz],decls:6,vars:3,consts:[["class","w-[950px] h-[90vh] overflow-hidden rounded-lg bg-neutral-white flex flex-col md:w-screen md:h-full",3,"ngClass",4,"ngIf"],[4,"ngIf"],["class","w-[900px] h-[600px] overflow-hidden rounded-lg bg-neutral-white flex flex-col ",3,"ngClass",4,"ngIf"],["mobileConfirm",""],[1,"w-[950px]","h-[90vh]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:h-full",3,"ngClass"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"p-6","w-full","h-full","overflow-auto","md:p-4","md:pr-0"],[1,"flex-auto","gap-y-6","flex","flex-col","h-[580px]","w-full"],["class","w-full",4,"ngIf"],["class","flex-auto",4,"ngIf"],[1,"p-6","flex","justify-between","gap-x-4","md:p-4"],["cf-button","","size","medium","type","secondary",1,"flex","items-center","gap-x-2","md:hidden",3,"ngClass","click"],["icon","delete","size","small"],[1,"flex","gap-x-2","md:w-full"],["cf-button","","size","medium","type","secondary",1,"md:hidden",3,"click"],["cf-button","","size","medium","type","secondary","class","md:w-full justify-center",3,"ngClass","click",4,"ngIf"],["cf-button","","size","medium","color","primary-1",1,"md:w-full","justify-center",3,"ngClass","click"],["icon","circle_check","size","small",1,"mr-2.5"],[1,"w-full"],[1,"h-[60px]","md:overflow-x-auto","md:h-auto",3,"selectedIndexChange"],["class","w-1/4 grow-0 md:w-auto",3,"ngClass","active","title",4,"ngFor","ngForOf"],[1,"w-1/4","grow-0","md:w-auto",3,"ngClass","active","title"],["titleTemplate",""],[1,"flex","gap-x-4","items-center"],[1,"flex","justify-center","items-center","w-8","h-8","rounded-full","bg-neutral-gray-1","text-neutral-gray-4","text-heading-sm"],[1,"flex","flex-col"],[1,"text-heading-sm","whitespace-pre"],[1,"text-body-sm","whitespace-pre"],[1,"flex-auto"],[3,"segmentSelected","seatValueChange",4,"ngIf"],["class","h-full flex flex-col justify-center items-center",4,"ngIf"],[3,"segmentSelected","seatValueChange"],[1,"h-full","flex","flex-col","justify-center","items-center"],["width","134","height","115","viewBox","0 0 134 115","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M66.4672 102.041C94.5888 102.041 117.387 79.2428 117.387 51.0207C117.387 22.7986 94.4884 0 66.4672 0C38.3455 0 15.5469 22.7986 15.5469 51.0207C15.5469 79.2428 38.3455 102.041 66.4672 102.041Z","fill","#BEBFC1"],["d","M17.8551 17.576C19.4082 17.576 20.6673 16.3169 20.6673 14.7638C20.6673 13.2107 19.4082 11.9517 17.8551 11.9517C16.302 11.9517 15.043 13.2107 15.043 14.7638C15.043 16.3169 16.302 17.576 17.8551 17.576Z","fill","#F1F3F9"],["filter","url(#filter0_dd_1211_19630)"],["d","M121.111 16.8693V85.2206C121.111 88.2132 118.687 90.6671 115.694 90.6671H17.4466C14.4539 90.6671 12 88.2431 12 85.2206V16.8693C12 13.8767 14.424 11.4527 17.4466 11.4527H115.694C118.687 11.4527 121.111 13.8767 121.111 16.8693Z","fill","white"],["d","M121.111 16.8693V22.5254H12V16.8693C12 13.8767 14.424 11.4527 17.4466 11.4527H115.694C118.687 11.4527 121.111 13.8767 121.111 16.8693Z","fill","url(#paint0_linear_1211_19630)"],["d","M17.8947 18.4553C18.7211 18.4553 19.391 17.7854 19.391 16.959C19.391 16.1326 18.7211 15.4627 17.8947 15.4627C17.0684 15.4627 16.3984 16.1326 16.3984 16.959C16.3984 17.7854 17.0684 18.4553 17.8947 18.4553Z","fill","#BEBFC1"],["d","M22.383 18.4553C23.2094 18.4553 23.8793 17.7854 23.8793 16.959C23.8793 16.1326 23.2094 15.4627 22.383 15.4627C21.5566 15.4627 20.8867 16.1326 20.8867 16.959C20.8867 17.7854 21.5566 18.4553 22.383 18.4553Z","fill","#BEBFC1"],["d","M26.844 18.4553C27.6703 18.4553 28.3403 17.7854 28.3403 16.959C28.3403 16.1326 27.6703 15.4627 26.844 15.4627C26.0176 15.4627 25.3477 16.1326 25.3477 16.959C25.3477 17.7854 26.0176 18.4553 26.844 18.4553Z","fill","#BEBFC1"],["d","M51.1126 31.3237H21.6055V60.4965H51.1126V31.3237Z","fill","#DFDFE0"],["d","M91.5312 31.1768H111.892","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M59.7188 31.1768H82.6241","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M59.7188 40.7207H111.892","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M80.7148 50.2647H111.892","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M59.7188 50.2647H73.0802","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M59.7188 59.8085H88.3505","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M82.625 69.3524H111.893","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M21.543 69.3524H73.7163","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M50.8125 78.8963H88.9881","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M21.543 78.8963H41.9033","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["id","filter0_dd_1211_19630","x","0","y","11.4527","width","133.109","height","103.214","filterUnits","userSpaceOnUse","color-interpolation-filters","sRGB"],["flood-opacity","0","result","BackgroundImageFix"],["in","SourceAlpha","type","matrix","values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0","result","hardAlpha"],["radius","2","operator","erode","in","SourceAlpha","result","effect1_dropShadow_1211_19630"],["dy","4"],["stdDeviation","3"],["type","matrix","values","0 0 0 0 0.0627451 0 0 0 0 0.0941176 0 0 0 0 0.156863 0 0 0 0.05 0"],["mode","normal","in2","BackgroundImageFix","result","effect1_dropShadow_1211_19630"],["radius","4","operator","erode","in","SourceAlpha","result","effect2_dropShadow_1211_19630"],["dy","12"],["stdDeviation","8"],["type","matrix","values","0 0 0 0 0.0627451 0 0 0 0 0.0941176 0 0 0 0 0.156863 0 0 0 0.1 0"],["mode","normal","in2","effect1_dropShadow_1211_19630","result","effect2_dropShadow_1211_19630"],["mode","normal","in","SourceGraphic","in2","effect2_dropShadow_1211_19630","result","shape"],["id","paint0_linear_1211_19630","x1","11.9986","y1","16.9888","x2","121.112","y2","16.9888","gradientUnits","userSpaceOnUse"],["stop-color","#DFDFE0"],["offset","1","stop-color","white"],[1,"text-heading-md","text-neutral-black","mb-4"],["cf-button","","size","medium","type","secondary",1,"md:w-full","justify-center",3,"ngClass","click"],["icon","chevron_right","size","small"],[1,"w-[900px]","h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col",3,"ngClass"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-neutral-gray-1"],["size","small","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"p-6","w-full","h-full","overflow-auto","flex-1"],[3,"serviceSelected"],[1,"p-6","flex","justify-end","gap-x-4"],["cf-button","","size","medium","type","secondary",3,"disabled","click"],["class","ml-2.5 animate-spin","icon","rotate_left","size","small",4,"ngIf"],["cf-button","","size","medium","color","primary-1",3,"disabled","click"],["icon","rotate_left","size","small",1,"ml-2.5","animate-spin"],[1,"flex","flex-col","w-full","justify-between","bg-neutral-gray-2"],[1,"p-4","overflow-y-auto"],[1,"flex","justify-end","gap-x-2","md:bg-neutral-white","p-4"],["cf-button","","size","medium","type","secondary",1,"md:w-full","justify-center",3,"disabled","click"],["cf-button","","size","medium","color","primary-1",1,"md:w-full","justify-center",3,"disabled","click"]],template:function(t,n){1&t&&(e.YNc(0,We,23,13,"div",0),e._UZ(1,"cf-toast"),e.YNc(2,et,1,0,"cf-spinner",1),e.YNc(3,it,16,8,"div",2),e.YNc(4,rt,11,5,"ng-template",null,3,e.W1O)),2&t&&(e.Q6J("ngIf","addon"===n.mode),e.xp6(2),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf","addon"!==n.mode))},dependencies:[h.ez,h.mk,h.sg,h.O5,T.AxE,T.Sm8,S.N8,S.Xq,pe.Q,pe.F,N.j7,N.Mk,Y.IA,j.hj,N.OR,C.DW],encapsulation:2}),i})(),st=(()=>{class i{transform(t,n,o){return t&&t.replaceAll(n,o)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"replace",type:i,pure:!0,standalone:!0}),i})();var ct=f(13138),lt=f(3193),dt=f(4520),ut=f(28490),gt=f(85522),pt=f(82761),ht=f(2225),_t=f(77492),ft=f(9497),mt=f(78533),vt=f(86938),Ct=f(70800);const yt=["parentSelectInfant"],xt=["adultElement"],bt=["childElement"],It=["infantElement"],Tt=["controlElement"];function Pt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",51)(1,"input",58,59),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onFilesSelected(o))}),e.qZA(),e.TgZ(3,"button",60),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(2);return e.KtG(o.click())}),e._uU(4," Upload th\xf4ng tin t\u1ea5t c\u1ea3 kh\xe1ch "),e.qZA()()}}function Et(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",61)(1,"input",58,59),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onFilesSelected(o))}),e.qZA(),e.TgZ(3,"button",62),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(2);return e.KtG(o.click())}),e._uU(4," Upload th\xf4ng tin t\u1ea5t c\u1ea3 kh\xe1ch "),e.qZA()()}}function At(i,l){if(1&i&&(e.TgZ(0,"div",71),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).index;e.xp6(1),e.hij(" Ng\u01b0\u1eddi l\u1edbn ",t+1," ")}}function St(i,l){if(1&i&&(e.TgZ(0,"div",71),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.controls.lastName.value.toUpperCase()+" "+t.controls.firstName.value.toUpperCase()," ")}}function kt(i,l){if(1&i&&(e.YNc(0,At,2,1,"div",70),e.YNc(1,St,2,1,"div",70)),2&i){const t=e.oxw().$implicit;e.Q6J("ngIf",!(t.controls.firstName.valid&&t.controls.lastName.valid)),e.xp6(1),e.Q6J("ngIf",t.controls.firstName.valid&&t.controls.lastName.valid)}}function Dt(i,l){if(1&i&&(e.TgZ(0,"div",91),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).index;e.xp6(1),e.hij(" Ng\u01b0\u1eddi l\u1edbn ",t+1," ")}}function Nt(i,l){if(1&i&&(e.TgZ(0,"div",91),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.controls.lastName.value.toUpperCase()+" "+t.controls.firstName.value.toUpperCase()," ")}}function Zt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"input",92,93),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.onFilesSelected(o,a))}),e.qZA(),e.TgZ(3,"button",94),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(2);return e.KtG(o.click())}),e._uU(4," Upload th\xf4ng tin kh\xe1ch n\xe0y "),e.qZA()()}}function Ft(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.gender)}}function Bt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.lastName)}}function Jt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.firstName)}}function wt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.DoBAdult)}}function Mt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.cccdNumber)}}function qt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.minlengthCccdNumber)}}function Qt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.maxlengthCccdNumber)}}function Ut(i,l){if(1&i&&(e.TgZ(0,"div")(1,"cf-input-group",37),e._UZ(2,"input",104),e.YNc(3,Mt,1,1,"cf-input-hint",32),e.YNc(4,qt,1,1,"cf-input-hint",32),e.YNc(5,Qt,1,1,"cf-input-hint",32),e.qZA()()),2&i){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(1),e.Q6J("status",t.controls.cccdNumber.invalid&&(t.controls.cccdNumber.dirty||t.controls.cccdNumber.touched)?"error":"default"),e.xp6(1),e.Q6J("formControl",n.getFormControlInArray(t,"cccdNumber")),e.xp6(1),e.Q6J("ngIf",t.controls.cccdNumber.hasError("required")&&(t.controls.cccdNumber.touched||t.controls.cccdNumber.dirty)),e.xp6(1),e.Q6J("ngIf",t.controls.cccdNumber.hasError("minlength")&&(t.controls.cccdNumber.touched||t.controls.cccdNumber.dirty)),e.xp6(1),e.Q6J("ngIf",t.controls.cccdNumber.hasError("maxlength")&&(t.controls.cccdNumber.touched||t.controls.cccdNumber.dirty))}}function Ot(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.maxlengthPassportNumber)}}function Yt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.passportNumber)}}function Rt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.nationality)}}function Gt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.issuanceCountry)}}function Vt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.issuanceDate)}}function Kt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.issuanceDateInvalid)}}function Ht(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.expiryDate)}}function jt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",105)(1,"cf-input-group",37)(2,"label",78),e._uU(3," S\u1ed1 h\u1ed9 chi\u1ebfu "),e.qZA(),e._UZ(4,"input",106),e.YNc(5,Ot,1,1,"cf-input-hint",32),e.YNc(6,Yt,1,1,"cf-input-hint",32),e.qZA(),e.TgZ(7,"cf-select",107)(8,"label",78),e._uU(9," Qu\u1ed1c t\u1ecbch "),e.qZA(),e.YNc(10,Rt,1,1,"cf-input-hint",32),e.qZA(),e.TgZ(11,"cf-select",108)(12,"label",78),e._uU(13," Qu\u1ed1c gia c\u1ea5p h\u1ed9 chi\u1ebfu "),e.qZA(),e.YNc(14,Gt,1,1,"cf-input-hint",32),e.qZA(),e.TgZ(15,"div")(16,"cf-input-group",37),e._UZ(17,"cf-icon",81),e.TgZ(18,"label",78),e._uU(19," Ng\xe0y c\u1ea5p "),e.qZA(),e.TgZ(20,"input",109,110),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(21);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(21);return e.KtG(o.close())}),e.qZA(),e.YNc(22,Vt,1,1,"cf-input-hint",32),e.YNc(23,Kt,1,1,"cf-input-hint",32),e.qZA()(),e.TgZ(24,"div")(25,"cf-input-group",37),e._UZ(26,"cf-icon",81),e.TgZ(27,"label",78),e._uU(28," Ng\xe0y h\u1ebft h\u1ea1n "),e.qZA(),e.TgZ(29,"input",111,112),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(30);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(30);return e.KtG(o.close())}),e.qZA(),e.YNc(31,Ht,1,1,"cf-input-hint",32),e.qZA(),e.TgZ(32,"div",113),e._uU(33," C\xf2n h\u1ea1n tr\xean 6 th\xe1ng so v\u1edbi ng\xe0y b\u1eaft \u0111\u1ea7u h\xe0nh tr\xecnh"),e.qZA()()()}if(2&i){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(1),e.Q6J("status",t.controls.number.invalid&&(t.controls.number.dirty||t.controls.number.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",n.has1GProvider||n.hasFlyOneProvider),e.xp6(2),e.Q6J("formControl",n.getFormControlInArray(t,"number")),e.xp6(1),e.Q6J("ngIf",t.controls.number.hasError("maxlength")&&(t.controls.number.touched||t.controls.number.dirty)),e.xp6(1),e.Q6J("ngIf",t.controls.number.hasError("required")&&(t.controls.number.touched||t.controls.number.dirty)),e.xp6(1),e.Q6J("status",t.controls.nationality.invalid&&(t.controls.nationality.dirty||t.controls.nationality.touched)?"error":"default")("data",n.countryOption)("allowSearch",!0)("formControl",n.getFormControlInArray(t,"nationality")),e.xp6(1),e.Q6J("CfRequired",n.has1GProvider||n.hasFlyOneProvider),e.xp6(2),e.Q6J("ngIf",t.controls.nationality.hasError("required")&&(t.controls.nationality.touched||t.controls.nationality.dirty)),e.xp6(1),e.Q6J("data",n.countryOption)("status",t.controls.issuanceCountry.invalid&&(t.controls.issuanceCountry.dirty||t.controls.issuanceCountry.touched)?"error":"default")("allowSearch",!0)("formControl",n.getFormControlInArray(t,"issuanceCountry")),e.xp6(1),e.Q6J("CfRequired",n.has1GProvider||n.hasFlyOneProvider),e.xp6(2),e.Q6J("ngIf",t.controls.issuanceCountry.hasError("required")&&(t.controls.issuanceCountry.touched||t.controls.issuanceCountry.dirty)),e.xp6(2),e.Q6J("status",t.controls.issuanceDate.invalid&&(t.controls.issuanceDate.dirty||t.controls.issuanceDate.touched)?"error":"default"),e.xp6(2),e.Q6J("CfRequired",n.has1GProvider||n.hasFlyOneProvider),e.xp6(2),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("maxDate",n.currentDate)("formControl",n.getFormControlInArray(t,"issuanceDate")),e.xp6(2),e.Q6J("ngIf",t.controls.issuanceDate.hasError("required")&&(t.controls.issuanceDate.touched||t.controls.issuanceDate.dirty)),e.xp6(1),e.Q6J("ngIf",t.controls.issuanceDate.hasError("issuanceDateInvalid")&&(t.controls.issuanceDate.touched||t.controls.issuanceDate.dirty)),e.xp6(2),e.Q6J("status",t.controls.expiryDate.invalid&&(t.controls.expiryDate.dirty||t.controls.expiryDate.touched)?"error":"default"),e.xp6(2),e.Q6J("CfRequired",n.has1GProvider||n.hasFlyOneProvider),e.xp6(2),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",n.currentDate)("formControl",n.getFormControlInArray(t,"expiryDate")),e.xp6(2),e.Q6J("ngIf",t.controls.expiryDate.hasError("required")&&(t.controls.expiryDate.touched||t.controls.expiryDate.dirty))}}function Lt(i,l){1&i&&(e.TgZ(0,"div",114),e._uU(1," Khuy\u1ebfn ngh\u1ecb nh\u1eadp CCCD/H\u1ed9 chi\u1ebfu kh\xe1ch h\xe0ng, n\u1ebfu kh\xf4ng h\xe3ng s\u1ebd kh\xf4ng h\u1ed7 tr\u1ee3 khi g\u1eb7p s\u1ef1 c\u1ed1 "),e.qZA())}function $t(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",96)(1,"div",97)(2,"label",98),e._uU(3," Gi\u1ea5y t\u1edd t\xf9y th\xe2n "),e.qZA(),e.TgZ(4,"div")(5,"div",75)(6,"cf-radio-group",99),e.NdJ("checkChange",function(o){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.onIdentityChange(o,a))}),e.TgZ(7,"cf-radio",100),e._uU(8," CCCD "),e.qZA(),e.TgZ(9,"cf-radio",101),e._uU(10," H\u1ed9 chi\u1ebfu "),e.qZA(),e.TgZ(11,"cf-radio",100),e._uU(12,"Kh\xf4ng c\xf3"),e.qZA()(),e.YNc(13,Ut,6,5,"div",57),e.YNc(14,jt,34,32,"div",102),e.YNc(15,Lt,2,0,"div",103),e.qZA()()()()}if(2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(4),e.Q6J("formControl",n.getFormControlInArray(t,"documentType")),e.xp6(1),e.Q6J("disabled",n.hasAirportInternational)("value",n.CF_IDENTIFY_TYPE.CCCD),e.xp6(2),e.Q6J("value",n.CF_IDENTIFY_TYPE.PASSPORT),e.xp6(2),e.Q6J("disabled",n.has1GProvider||n.hasFlyOneProvider||n.hasVJAirline&&n.hasRouteGroupRequire||n.hasBZTProvider||n.hasSTProvider||n.hasHGProvider)("value",n.CF_IDENTIFY_TYPE.NON_IDENTIFY),e.xp6(2),e.Q6J("ngIf",t.value.documentType===n.CF_IDENTIFY_TYPE.CCCD),e.xp6(1),e.Q6J("ngIf",t.value.documentType===n.CF_IDENTIFY_TYPE.PASSPORT),e.xp6(1),e.Q6J("ngIf",t.value.documentType===n.CF_IDENTIFY_TYPE.NON_IDENTIFY)}}function zt(i,l){1&i&&(e.TgZ(0,"div",115),e._UZ(1,"cf-icon",116),e.TgZ(2,"span"),e._uU(3,"Th\xf4ng tin b\u1ed5 sung"),e.qZA()())}function Xt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",72)(1,"div",73),e.YNc(2,Dt,2,1,"div",74),e.YNc(3,Nt,2,1,"div",74),e.qZA(),e.YNc(4,Zt,5,0,"div",57),e.qZA(),e.TgZ(5,"div",75)(6,"div",76)(7,"div",73)(8,"cf-select",77)(9,"label",78),e._uU(10,"Gi\u1edbi t\xednh"),e.qZA(),e.YNc(11,Ft,1,1,"cf-input-hint",32),e.qZA()(),e.TgZ(12,"div",73)(13,"cf-input-group",37)(14,"label",30)(15,"span",31),e._uU(16,"H\u1ecd"),e.qZA()(),e.TgZ(17,"input",79),e.NdJ("blur",function(o){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw();return e.KtG(s.onBlurInput(o,a,"lastName"))}),e.qZA(),e.YNc(18,Bt,1,1,"cf-input-hint",32),e.qZA()(),e.TgZ(19,"div",73)(20,"cf-input-group",37)(21,"label",30)(22,"span",31),e._uU(23,"T\xean \u0111\u1ec7m v\xe0 T\xean"),e.qZA()(),e.TgZ(24,"input",80),e.NdJ("blur",function(o){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw();return e.KtG(s.onBlurInput(o,a,"firstName"))}),e.qZA(),e.YNc(25,Jt,1,1,"cf-input-hint",32),e.qZA()(),e.TgZ(26,"div",73)(27,"cf-input-group",37),e._UZ(28,"cf-icon",81),e.TgZ(29,"label",30)(30,"span"),e._uU(31,"Ng\xe0y sinh"),e.qZA(),e._uU(32,"\xa0 "),e.TgZ(33,"span",82),e._uU(34," (L\u1edbn h\u01a1n 12 tu\u1ed5i) "),e.qZA()(),e.TgZ(35,"input",83,84),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(36);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(36);return e.KtG(o.close())}),e.qZA(),e.YNc(37,wt,1,1,"cf-input-hint",32),e.qZA()()(),e.YNc(38,$t,16,10,"div",85),e.TgZ(39,"cf-collapse",86)(40,"cf-collapse-panel",87),e.YNc(41,zt,4,0,"ng-template",null,66,e.W1O),e.TgZ(43,"div",88)(44,"cf-input-group",89)(45,"label",30),e._uU(46," Bamboo Airways (QH) "),e.qZA(),e._UZ(47,"input",90),e.qZA(),e.TgZ(48,"cf-input-group",89)(49,"label",30),e._uU(50," Vietnam Airlines (VNA) "),e.qZA(),e._UZ(51,"input",90),e.qZA()()()()()}if(2&i){const t=e.MAs(42),n=e.oxw().$implicit,o=e.oxw();e.xp6(2),e.Q6J("ngIf",!(n.controls.firstName.valid&&n.controls.lastName.valid)),e.xp6(1),e.Q6J("ngIf",n.controls.firstName.valid&&n.controls.lastName.valid),e.xp6(1),e.Q6J("ngIf",o.canExtractImageToDocument),e.xp6(4),e.Q6J("status",n.controls.gender.invalid&&(n.controls.gender.dirty||n.controls.gender.touched)?"error":"default")("data",o.optionsGender)("allowSearch",!1)("formControl",o.getFormControlInArray(n,"gender")),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",n.controls.gender.hasError("required")&&(n.controls.gender.touched||n.controls.gender.dirty)),e.xp6(2),e.Q6J("status",n.controls.lastName.invalid&&(n.controls.lastName.dirty||n.controls.lastName.touched)?"error":"default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",o.getFormControlInArray(n,"lastName")),e.xp6(1),e.Q6J("ngIf",n.controls.lastName.hasError("required")&&(n.controls.lastName.touched||n.controls.lastName.dirty)),e.xp6(2),e.Q6J("status",n.controls.firstName.invalid&&(n.controls.firstName.dirty||n.controls.firstName.touched)?"error":"default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",o.getFormControlInArray(n,"firstName")),e.xp6(1),e.Q6J("ngIf",n.controls.firstName.hasError("required")&&(n.controls.firstName.touched||n.controls.firstName.dirty)),e.xp6(2),e.Q6J("status",n.controls.birthday.invalid&&(n.controls.birthday.dirty||n.controls.birthday.touched)?"error":"default")("status","default"),e.xp6(8),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("formControl",o.getFormControlInArray(n,"birthday")),e.xp6(2),e.Q6J("ngIf",n.controls.birthday.hasError("DoBAdult")&&n.controls.birthday.touched),e.xp6(1),e.Q6J("ngIf",o.hasAirportInternational||o.hasVJAirline),e.xp6(2),e.Q6J("title",t)("active",!1),e.xp6(7),e.Q6J("formControl",o.getFormControlInArray(n,"membershipQH")),e.xp6(4),e.Q6J("formControl",o.getFormControlInArray(n,"membershipVN"))}}function Wt(i,l){if(1&i&&(e.TgZ(0,"div",null,63)(2,"cf-collapse",64)(3,"cf-collapse-panel",65),e.YNc(4,kt,2,2,"ng-template",null,66,e.W1O),e.GkF(6,67),e.qZA()(),e.TgZ(7,"div",68),e.GkF(8,67),e.YNc(9,Xt,52,28,"ng-template",null,69,e.W1O),e.qZA()()),2&i){const t=e.MAs(5),n=e.MAs(10);e.xp6(3),e.Q6J("title",t)("active",!0),e.xp6(3),e.Q6J("ngTemplateOutlet",n),e.xp6(2),e.Q6J("ngTemplateOutlet",n)}}function en(i,l){if(1&i&&(e.TgZ(0,"div",71),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).index;e.xp6(1),e.hij(" Tr\u1ebb em ",t+1," ")}}function tn(i,l){if(1&i&&(e.TgZ(0,"div",71),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.controls.lastName.value.toUpperCase()+" "+t.controls.firstName.value.toUpperCase()," ")}}function nn(i,l){if(1&i&&(e.YNc(0,en,2,1,"div",70),e.YNc(1,tn,2,1,"div",70)),2&i){const t=e.oxw().$implicit;e.Q6J("ngIf",!(t.controls.firstName.valid&&t.controls.lastName.valid)),e.xp6(1),e.Q6J("ngIf",t.controls.firstName.valid&&t.controls.lastName.valid)}}function on(i,l){if(1&i&&(e.TgZ(0,"div",122),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).index;e.xp6(1),e.hij(" Tr\u1ebb em ",t+1," ")}}function an(i,l){if(1&i&&(e.TgZ(0,"div",122),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.controls.lastName.value.toUpperCase()+" "+t.controls.firstName.value.toUpperCase()," ")}}function rn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"input",92,93),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.onFilesSelected(o,a))}),e.qZA(),e.TgZ(3,"button",60),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(2);return e.KtG(o.click())}),e._uU(4," Upload th\xf4ng tin kh\xe1ch n\xe0y "),e.qZA()()}}function sn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.gender)}}function cn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.lastName)}}function ln(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.firstName)}}function dn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.birthday)}}function un(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.DoBChild)}}function gn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.DoBChildUnder)}}function pn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.DoBChildUpper)}}function hn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.cccdNumber)}}function _n(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.minlengthCccdNumber)}}function fn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.maxlengthCccdNumber)}}function mn(i,l){if(1&i&&(e.TgZ(0,"div")(1,"cf-input-group",37),e._UZ(2,"input",104),e.YNc(3,hn,1,1,"cf-input-hint",32),e.YNc(4,_n,1,1,"cf-input-hint",32),e.YNc(5,fn,1,1,"cf-input-hint",32),e.qZA()()),2&i){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(1),e.Q6J("status",t.controls.cccdNumber.invalid&&(t.controls.cccdNumber.dirty||t.controls.cccdNumber.touched)?"error":"default"),e.xp6(1),e.Q6J("formControl",n.getFormControlInArray(t,"cccdNumber")),e.xp6(1),e.Q6J("ngIf",t.controls.cccdNumber.hasError("required")&&(t.controls.cccdNumber.touched||t.controls.cccdNumber.dirty)),e.xp6(1),e.Q6J("ngIf",t.controls.cccdNumber.hasError("minlength")&&(t.controls.cccdNumber.touched||t.controls.cccdNumber.dirty)),e.xp6(1),e.Q6J("ngIf",t.controls.cccdNumber.hasError("maxlength")&&(t.controls.cccdNumber.touched||t.controls.cccdNumber.dirty))}}function vn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.maxlengthPassportNumber)}}function Cn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.passportNumber)}}function yn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.nationality)}}function xn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.issuanceCountry)}}function bn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.issuanceDate)}}function In(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.issuanceDateInvalid)}}function Tn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.expiryDate)}}function Pn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",105)(1,"cf-input-group",37)(2,"label",78),e._uU(3," S\u1ed1 h\u1ed9 chi\u1ebfu "),e.qZA(),e._UZ(4,"input",106),e.YNc(5,vn,1,1,"cf-input-hint",32),e.YNc(6,Cn,1,1,"cf-input-hint",32),e.qZA(),e.TgZ(7,"cf-select",107)(8,"label",78),e._uU(9," Qu\u1ed1c t\u1ecbch "),e.qZA(),e.YNc(10,yn,1,1,"cf-input-hint",32),e.qZA(),e.TgZ(11,"cf-select",108)(12,"label",78),e._uU(13," Qu\u1ed1c gia c\u1ea5p h\u1ed9 chi\u1ebfu "),e.qZA(),e.YNc(14,xn,1,1,"cf-input-hint",32),e.qZA(),e.TgZ(15,"div")(16,"cf-input-group",37),e._UZ(17,"cf-icon",81),e.TgZ(18,"label",78),e._uU(19," Ng\xe0y c\u1ea5p "),e.qZA(),e.TgZ(20,"input",109,110),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(21);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(21);return e.KtG(o.close())}),e.qZA(),e.YNc(22,bn,1,1,"cf-input-hint",32),e.YNc(23,In,1,1,"cf-input-hint",32),e.qZA()(),e.TgZ(24,"div")(25,"cf-input-group",37),e._UZ(26,"cf-icon",81),e.TgZ(27,"label",78),e._uU(28," Ng\xe0y h\u1ebft h\u1ea1n "),e.qZA(),e.TgZ(29,"input",111,112),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(30);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(30);return e.KtG(o.close())}),e.qZA(),e.YNc(31,Tn,1,1,"cf-input-hint",32),e.qZA(),e.TgZ(32,"div",113),e._uU(33," C\xf2n h\u1ea1n tr\xean 6 th\xe1ng so v\u1edbi ng\xe0y b\u1eaft \u0111\u1ea7u h\xe0nh tr\xecnh"),e.qZA()()()}if(2&i){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(1),e.Q6J("status",t.controls.number.invalid&&(t.controls.number.dirty||t.controls.number.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",n.has1GProvider||n.hasFlyOneProvider),e.xp6(2),e.Q6J("formControl",n.getFormControlInArray(t,"number")),e.xp6(1),e.Q6J("ngIf",t.controls.number.hasError("maxlength")&&(t.controls.number.touched||t.controls.number.dirty)),e.xp6(1),e.Q6J("ngIf",t.controls.number.hasError("required")&&(t.controls.number.touched||t.controls.number.dirty)),e.xp6(1),e.Q6J("status",t.controls.nationality.invalid&&(t.controls.nationality.dirty||t.controls.nationality.touched)?"error":"default")("data",n.countryOption)("allowSearch",!0)("formControl",n.getFormControlInArray(t,"nationality")),e.xp6(1),e.Q6J("CfRequired",n.has1GProvider||n.hasFlyOneProvider),e.xp6(2),e.Q6J("ngIf",t.controls.nationality.hasError("required")&&(t.controls.nationality.touched||t.controls.nationality.dirty)),e.xp6(1),e.Q6J("data",n.countryOption)("status",t.controls.issuanceCountry.invalid&&(t.controls.issuanceCountry.dirty||t.controls.issuanceCountry.touched)?"error":"default")("allowSearch",!0)("formControl",n.getFormControlInArray(t,"issuanceCountry")),e.xp6(1),e.Q6J("CfRequired",n.has1GProvider||n.hasFlyOneProvider),e.xp6(2),e.Q6J("ngIf",t.controls.issuanceCountry.hasError("required")&&(t.controls.issuanceCountry.touched||t.controls.issuanceCountry.dirty)),e.xp6(2),e.Q6J("status",t.controls.issuanceDate.invalid&&(t.controls.issuanceDate.dirty||t.controls.issuanceDate.touched)?"error":"default"),e.xp6(2),e.Q6J("CfRequired",n.has1GProvider||n.hasFlyOneProvider),e.xp6(2),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("maxDate",n.currentDate)("formControl",n.getFormControlInArray(t,"issuanceDate")),e.xp6(2),e.Q6J("ngIf",t.controls.issuanceDate.hasError("required")&&(t.controls.issuanceDate.touched||t.controls.issuanceDate.dirty)),e.xp6(1),e.Q6J("ngIf",t.controls.issuanceDate.hasError("issuanceDateInvalid")&&(t.controls.issuanceDate.touched||t.controls.issuanceDate.dirty)),e.xp6(2),e.Q6J("status",t.controls.expiryDate.invalid&&(t.controls.expiryDate.dirty||t.controls.expiryDate.touched)?"error":"default"),e.xp6(2),e.Q6J("CfRequired",n.has1GProvider||n.hasFlyOneProvider),e.xp6(2),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",n.currentDate)("formControl",n.getFormControlInArray(t,"expiryDate")),e.xp6(2),e.Q6J("ngIf",t.controls.expiryDate.hasError("required")&&(t.controls.expiryDate.touched||t.controls.expiryDate.dirty))}}function En(i,l){1&i&&(e.TgZ(0,"div",114),e._uU(1," Khuy\u1ebfn ngh\u1ecb nh\u1eadp CCCD/H\u1ed9 chi\u1ebfu kh\xe1ch h\xe0ng, n\u1ebfu kh\xf4ng h\xe3ng s\u1ebd kh\xf4ng h\u1ed7 tr\u1ee3 khi g\u1eb7p s\u1ef1 c\u1ed1 "),e.qZA())}function An(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",96)(1,"div",97)(2,"label",98),e._uU(3," Gi\u1ea5y t\u1edd t\xf9y th\xe2n "),e.qZA(),e.TgZ(4,"div")(5,"div",75)(6,"cf-radio-group",99),e.NdJ("checkChange",function(o){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.onIdentityChange(o,a))}),e.TgZ(7,"cf-radio",100),e._uU(8," CCCD "),e.qZA(),e.TgZ(9,"cf-radio",101),e._uU(10," H\u1ed9 chi\u1ebfu "),e.qZA(),e.TgZ(11,"cf-radio",100),e._uU(12,"Kh\xf4ng c\xf3"),e.qZA()(),e.YNc(13,mn,6,5,"div",57),e.YNc(14,Pn,34,32,"div",102),e.YNc(15,En,2,0,"div",103),e.qZA()()()()}if(2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(4),e.Q6J("formControl",n.getFormControlInArray(t,"documentType")),e.xp6(1),e.Q6J("disabled",n.hasAirportInternational)("value",n.CF_IDENTIFY_TYPE.CCCD),e.xp6(2),e.Q6J("value",n.CF_IDENTIFY_TYPE.PASSPORT),e.xp6(2),e.Q6J("disabled",n.has1GProvider||n.hasFlyOneProvider||n.hasVJAirline&&n.hasRouteGroupRequire)("value",n.CF_IDENTIFY_TYPE.NON_IDENTIFY),e.xp6(2),e.Q6J("ngIf",t.value.documentType===n.CF_IDENTIFY_TYPE.CCCD),e.xp6(1),e.Q6J("ngIf",t.value.documentType===n.CF_IDENTIFY_TYPE.PASSPORT),e.xp6(1),e.Q6J("ngIf",t.value.documentType===n.CF_IDENTIFY_TYPE.NON_IDENTIFY)}}function Sn(i,l){1&i&&(e.TgZ(0,"div",115),e._UZ(1,"cf-icon",116),e.TgZ(2,"span"),e._uU(3,"Th\xf4ng tin b\u1ed5 sung"),e.qZA()())}function kn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",72)(1,"div"),e.YNc(2,on,2,1,"div",119),e.YNc(3,an,2,1,"div",119),e.qZA(),e.YNc(4,rn,5,0,"div",57),e.qZA(),e.TgZ(5,"div",75)(6,"div",76)(7,"div",73)(8,"cf-select",77)(9,"label",78),e._uU(10,"Gi\u1edbi t\xednh"),e.qZA(),e.YNc(11,sn,1,1,"cf-input-hint",32),e.qZA()(),e.TgZ(12,"div",73)(13,"cf-input-group",37)(14,"label",30)(15,"span",31),e._uU(16,"H\u1ecd"),e.qZA()(),e.TgZ(17,"input",120),e.NdJ("blur",function(o){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw();return e.KtG(s.onBlurInput(o,a,"lastName"))}),e.qZA(),e.YNc(18,cn,1,1,"cf-input-hint",32),e.qZA()(),e.TgZ(19,"div",73)(20,"cf-input-group",37)(21,"label",30)(22,"span",31),e._uU(23,"T\xean \u0111\u1ec7m v\xe0 T\xean"),e.qZA()(),e.TgZ(24,"input",80),e.NdJ("blur",function(o){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw();return e.KtG(s.onBlurInput(o,a,"firstName"))}),e.qZA(),e.YNc(25,ln,1,1,"cf-input-hint",32),e.qZA()(),e.TgZ(26,"div",73)(27,"cf-input-group",37),e._UZ(28,"cf-icon",81),e.TgZ(29,"label",30)(30,"span",31),e._uU(31,"Ng\xe0y sinh"),e.qZA(),e._uU(32,"\xa0 "),e.TgZ(33,"span",82),e._uU(34," (Tu\u1ed5i 2 - 12) "),e.qZA()(),e.TgZ(35,"input",83,84),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(36);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(36);return e.KtG(o.close())}),e.qZA(),e.YNc(37,dn,1,1,"cf-input-hint",32),e.YNc(38,un,1,1,"cf-input-hint",32),e.YNc(39,gn,1,1,"cf-input-hint",32),e.YNc(40,pn,1,1,"cf-input-hint",32),e.qZA()()(),e.YNc(41,An,16,10,"div",85),e.TgZ(42,"cf-collapse",86)(43,"cf-collapse-panel",87),e.YNc(44,Sn,4,0,"ng-template",null,66,e.W1O),e.TgZ(46,"div",88)(47,"cf-input-group",89)(48,"label",30),e._uU(49," Bamboo Airways (QH) "),e.qZA(),e._UZ(50,"input",121),e.qZA(),e.TgZ(51,"cf-input-group",89)(52,"label",30),e._uU(53," Vietnam Airlines (VNA) "),e.qZA(),e._UZ(54,"input",121),e.qZA()()()()()}if(2&i){const t=e.MAs(45),n=e.oxw().$implicit,o=e.oxw();e.xp6(2),e.Q6J("ngIf",!(n.controls.firstName.valid&&n.controls.lastName.valid)),e.xp6(1),e.Q6J("ngIf",n.controls.firstName.valid&&n.controls.lastName.valid),e.xp6(1),e.Q6J("ngIf",o.canExtractImageToDocument),e.xp6(4),e.Q6J("status",n.controls.gender.invalid&&(n.controls.gender.dirty||n.controls.gender.touched)?"error":"default")("data",o.optionsGender)("allowSearch",!1)("formControl",o.getFormControlInArray(n,"gender")),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",n.controls.gender.hasError("required")&&(n.controls.gender.touched||n.controls.gender.dirty)),e.xp6(2),e.Q6J("status",n.controls.lastName.invalid&&(n.controls.lastName.dirty||n.controls.lastName.touched)?"error":"default")("status","default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",o.getFormControlInArray(n,"lastName")),e.xp6(1),e.Q6J("ngIf",n.controls.lastName.hasError("required")&&(n.controls.lastName.touched||n.controls.lastName.dirty)),e.xp6(2),e.Q6J("status",n.controls.firstName.invalid&&(n.controls.firstName.dirty||n.controls.firstName.touched)?"error":"default")("status","default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",o.getFormControlInArray(n,"firstName")),e.xp6(1),e.Q6J("ngIf",n.controls.firstName.hasError("required")&&(n.controls.firstName.touched||n.controls.firstName.dirty)),e.xp6(2),e.Q6J("status",n.controls.birthday.invalid&&(n.controls.birthday.dirty||n.controls.birthday.touched)?"error":"default")("status","default"),e.xp6(3),e.Q6J("CfRequired",!0),e.xp6(5),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("formControl",o.getFormControlInArray(n,"birthday")),e.xp6(2),e.Q6J("ngIf",n.controls.birthday.hasError("required")&&(n.controls.birthday.touched||n.controls.birthday.dirty)),e.xp6(1),e.Q6J("ngIf",n.controls.birthday.hasError("DoBChild")&&n.controls.birthday.touched),e.xp6(1),e.Q6J("ngIf",n.controls.birthday.hasError("DoBChildUnder")&&n.controls.birthday.touched),e.xp6(1),e.Q6J("ngIf",n.controls.birthday.hasError("DoBChildUpper")&&n.controls.birthday.touched),e.xp6(1),e.Q6J("ngIf",o.hasAirportInternational),e.xp6(2),e.Q6J("title",t)("active",!1),e.xp6(7),e.Q6J("formControl",o.getFormControlInArray(n,"membershipQH")),e.xp6(4),e.Q6J("formControl",o.getFormControlInArray(n,"membershipVN"))}}function Dn(i,l){if(1&i&&(e.ynx(0,null,117),e.TgZ(2,"cf-collapse",64)(3,"cf-collapse-panel",65),e.YNc(4,nn,2,2,"ng-template",null,66,e.W1O),e.GkF(6,67),e.qZA()(),e.TgZ(7,"div",68),e.GkF(8,67),e.YNc(9,kn,55,34,"ng-template",null,118,e.W1O),e.qZA(),e.BQk()),2&i){const t=e.MAs(5),n=e.MAs(10);e.xp6(3),e.Q6J("title",t)("active",!0),e.xp6(3),e.Q6J("ngTemplateOutlet",n),e.xp6(2),e.Q6J("ngTemplateOutlet",n)}}function Nn(i,l){if(1&i&&(e.TgZ(0,"div",71),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).index;e.xp6(1),e.hij(" Em b\xe9 ",t+1," ")}}function Zn(i,l){if(1&i&&(e.TgZ(0,"div",71),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.controls.lastName.value.toUpperCase()+" "+t.controls.firstName.value.toUpperCase()," ")}}function Fn(i,l){if(1&i&&(e.YNc(0,Nn,2,1,"div",70),e.YNc(1,Zn,2,1,"div",70)),2&i){const t=e.oxw().$implicit;e.Q6J("ngIf",!(t.controls.firstName.valid&&t.controls.lastName.valid)),e.xp6(1),e.Q6J("ngIf",t.controls.firstName.valid&&t.controls.lastName.valid)}}function Bn(i,l){if(1&i&&(e.TgZ(0,"div",122),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).index;e.xp6(1),e.hij(" Em b\xe9 ",t+1,"")}}function Jn(i,l){if(1&i&&(e.TgZ(0,"div",122),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.controls.lastName.value.toUpperCase()+" "+t.controls.firstName.value.toUpperCase()," ")}}function wn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"input",92,93),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.onFilesSelected(o,a))}),e.qZA(),e.TgZ(3,"button",60),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(2);return e.KtG(o.click())}),e._uU(4," Upload th\xf4ng tin kh\xe1ch n\xe0y "),e.qZA()()}}function Mn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.gender)}}function qn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.lastName)}}function Qn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.firstName)}}function Un(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.birthday)}}function On(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.DoBInfant)}}function Yn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.parentIndex)}}function Rn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.ParentInfantDupplicate)}}function Gn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.cccdNumber)}}function Vn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.minlengthCccdNumber)}}function Kn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.maxlengthCccdNumber)}}function Hn(i,l){if(1&i&&(e.TgZ(0,"div")(1,"cf-input-group",37),e._UZ(2,"input",104),e.YNc(3,Gn,1,1,"cf-input-hint",32),e.YNc(4,Vn,1,1,"cf-input-hint",32),e.YNc(5,Kn,1,1,"cf-input-hint",32),e.qZA()()),2&i){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(1),e.Q6J("status",t.controls.cccdNumber.invalid&&(t.controls.cccdNumber.dirty||t.controls.cccdNumber.touched)?"error":"default"),e.xp6(1),e.Q6J("formControl",n.getFormControlInArray(t,"cccdNumber")),e.xp6(1),e.Q6J("ngIf",t.controls.cccdNumber.hasError("required")&&(t.controls.cccdNumber.touched||t.controls.cccdNumber.dirty)),e.xp6(1),e.Q6J("ngIf",t.controls.cccdNumber.hasError("minlength")&&(t.controls.cccdNumber.touched||t.controls.cccdNumber.dirty)),e.xp6(1),e.Q6J("ngIf",t.controls.cccdNumber.hasError("maxlength")&&(t.controls.cccdNumber.touched||t.controls.cccdNumber.dirty))}}function jn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.maxlengthPassportNumber)}}function Ln(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.passportNumber)}}function $n(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.nationality)}}function zn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.issuanceCountry)}}function Xn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.issuanceDate)}}function Wn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.issuanceDateInvalid)}}function ei(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(5);e.Q6J("hint",t.errorMessage.expiryDate)}}function ti(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",105)(1,"cf-input-group",37)(2,"label",78),e._uU(3," S\u1ed1 h\u1ed9 chi\u1ebfu "),e.qZA(),e._UZ(4,"input",106),e.YNc(5,jn,1,1,"cf-input-hint",32),e.YNc(6,Ln,1,1,"cf-input-hint",32),e.qZA(),e.TgZ(7,"cf-select",107)(8,"label",78),e._uU(9," Qu\u1ed1c t\u1ecbch "),e.qZA(),e.YNc(10,$n,1,1,"cf-input-hint",32),e.qZA(),e.TgZ(11,"cf-select",108)(12,"label",78),e._uU(13," Qu\u1ed1c gia c\u1ea5p h\u1ed9 chi\u1ebfu "),e.qZA(),e.YNc(14,zn,1,1,"cf-input-hint",32),e.qZA(),e.TgZ(15,"div")(16,"cf-input-group",37),e._UZ(17,"cf-icon",81),e.TgZ(18,"label",78),e._uU(19," Ng\xe0y c\u1ea5p "),e.qZA(),e.TgZ(20,"input",109,110),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(21);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(21);return e.KtG(o.close())}),e.qZA(),e.YNc(22,Xn,1,1,"cf-input-hint",32),e.YNc(23,Wn,1,1,"cf-input-hint",32),e.qZA()(),e.TgZ(24,"div")(25,"cf-input-group",37),e._UZ(26,"cf-icon",81),e.TgZ(27,"label",78),e._uU(28," Ng\xe0y h\u1ebft h\u1ea1n "),e.qZA(),e.TgZ(29,"input",111,112),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(30);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(30);return e.KtG(o.close())}),e.qZA(),e.YNc(31,ei,1,1,"cf-input-hint",32),e.qZA(),e.TgZ(32,"div",113),e._uU(33," C\xf2n h\u1ea1n tr\xean 6 th\xe1ng so v\u1edbi ng\xe0y b\u1eaft \u0111\u1ea7u h\xe0nh tr\xecnh"),e.qZA()()()}if(2&i){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(1),e.Q6J("status",t.controls.number.invalid&&(t.controls.number.dirty||t.controls.number.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",n.has1GProvider||n.hasFlyOneProvider),e.xp6(2),e.Q6J("formControl",n.getFormControlInArray(t,"number")),e.xp6(1),e.Q6J("ngIf",t.controls.number.hasError("maxlength")&&(t.controls.number.touched||t.controls.number.dirty)),e.xp6(1),e.Q6J("ngIf",t.controls.number.hasError("required")&&(t.controls.number.touched||t.controls.number.dirty)),e.xp6(1),e.Q6J("status",t.controls.nationality.invalid&&(t.controls.nationality.dirty||t.controls.nationality.touched)?"error":"default")("data",n.countryOption)("allowSearch",!0)("formControl",n.getFormControlInArray(t,"nationality")),e.xp6(1),e.Q6J("CfRequired",n.has1GProvider||n.hasFlyOneProvider),e.xp6(2),e.Q6J("ngIf",t.controls.nationality.hasError("required")&&(t.controls.nationality.touched||t.controls.nationality.dirty)),e.xp6(1),e.Q6J("data",n.countryOption)("status",t.controls.issuanceCountry.invalid&&(t.controls.issuanceCountry.dirty||t.controls.issuanceCountry.touched)?"error":"default")("allowSearch",!0)("formControl",n.getFormControlInArray(t,"issuanceCountry")),e.xp6(1),e.Q6J("CfRequired",n.has1GProvider||n.hasFlyOneProvider),e.xp6(2),e.Q6J("ngIf",t.controls.issuanceCountry.hasError("required")&&(t.controls.issuanceCountry.touched||t.controls.issuanceCountry.dirty)),e.xp6(2),e.Q6J("status",t.controls.issuanceDate.invalid&&(t.controls.issuanceDate.dirty||t.controls.issuanceDate.touched)?"error":"default"),e.xp6(2),e.Q6J("CfRequired",n.has1GProvider||n.hasFlyOneProvider),e.xp6(2),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("maxDate",n.currentDate)("formControl",n.getFormControlInArray(t,"issuanceDate")),e.xp6(2),e.Q6J("ngIf",t.controls.issuanceDate.hasError("required")&&(t.controls.issuanceDate.touched||t.controls.issuanceDate.dirty)),e.xp6(1),e.Q6J("ngIf",t.controls.issuanceDate.hasError("issuanceDateInvalid")&&(t.controls.issuanceDate.touched||t.controls.issuanceDate.dirty)),e.xp6(2),e.Q6J("status",t.controls.expiryDate.invalid&&(t.controls.expiryDate.dirty||t.controls.expiryDate.touched)?"error":"default"),e.xp6(2),e.Q6J("CfRequired",n.has1GProvider||n.hasFlyOneProvider),e.xp6(2),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",n.currentDate)("formControl",n.getFormControlInArray(t,"expiryDate")),e.xp6(2),e.Q6J("ngIf",t.controls.expiryDate.hasError("required")&&(t.controls.expiryDate.touched||t.controls.expiryDate.dirty))}}function ni(i,l){1&i&&(e.TgZ(0,"div",114),e._uU(1," Khuy\u1ebfn ngh\u1ecb nh\u1eadp CCCD/H\u1ed9 chi\u1ebfu kh\xe1ch h\xe0ng, n\u1ebfu kh\xf4ng h\xe3ng s\u1ebd kh\xf4ng h\u1ed7 tr\u1ee3 khi g\u1eb7p s\u1ef1 c\u1ed1 "),e.qZA())}function ii(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",96)(1,"div",97)(2,"label",98),e._uU(3," Gi\u1ea5y t\u1edd t\xf9y th\xe2n "),e.qZA(),e.TgZ(4,"div")(5,"div",75)(6,"cf-radio-group",99),e.NdJ("checkChange",function(o){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.onIdentityChange(o,a))}),e.TgZ(7,"cf-radio",100),e._uU(8," CCCD "),e.qZA(),e.TgZ(9,"cf-radio",101),e._uU(10," H\u1ed9 chi\u1ebfu "),e.qZA(),e.TgZ(11,"cf-radio",100),e._uU(12,"Kh\xf4ng c\xf3"),e.qZA()(),e.YNc(13,Hn,6,5,"div",57),e.YNc(14,ti,34,32,"div",102),e.YNc(15,ni,2,0,"div",103),e.qZA()()()()}if(2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(4),e.Q6J("formControl",n.getFormControlInArray(t,"documentType")),e.xp6(1),e.Q6J("disabled",n.hasAirportInternational)("value",n.CF_IDENTIFY_TYPE.CCCD),e.xp6(2),e.Q6J("value",n.CF_IDENTIFY_TYPE.PASSPORT),e.xp6(2),e.Q6J("disabled",n.has1GProvider||n.hasFlyOneProvider)("value",n.CF_IDENTIFY_TYPE.NON_IDENTIFY),e.xp6(2),e.Q6J("ngIf",t.value.documentType===n.CF_IDENTIFY_TYPE.CCCD),e.xp6(1),e.Q6J("ngIf",t.value.documentType===n.CF_IDENTIFY_TYPE.PASSPORT),e.xp6(1),e.Q6J("ngIf",t.value.documentType===n.CF_IDENTIFY_TYPE.NON_IDENTIFY)}}function oi(i,l){1&i&&(e.TgZ(0,"div",115),e._UZ(1,"cf-icon",116),e.TgZ(2,"span"),e._uU(3,"Th\xf4ng tin b\u1ed5 sung"),e.qZA()())}function ai(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",72)(1,"div"),e.YNc(2,Bn,2,1,"div",119),e.YNc(3,Jn,2,1,"div",119),e.qZA(),e.YNc(4,wn,5,0,"div",57),e.qZA(),e.TgZ(5,"div",75)(6,"div",76)(7,"div",73)(8,"cf-select",77)(9,"label",30)(10,"span",31),e._uU(11,"Gi\u1edbi t\xednh"),e.qZA()(),e.YNc(12,Mn,1,1,"cf-input-hint",32),e.qZA()(),e.TgZ(13,"div",73)(14,"cf-input-group",37)(15,"label",30)(16,"span",31),e._uU(17,"H\u1ecd"),e.qZA()(),e.TgZ(18,"input",120),e.NdJ("blur",function(o){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw();return e.KtG(s.onBlurInput(o,a,"lastName"))}),e.qZA(),e.YNc(19,qn,1,1,"cf-input-hint",32),e.qZA()(),e.TgZ(20,"div",73)(21,"cf-input-group",37)(22,"label",30)(23,"span",31),e._uU(24,"T\xean \u0111\u1ec7m v\xe0 T\xean"),e.qZA()(),e.TgZ(25,"input",80),e.NdJ("blur",function(o){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw();return e.KtG(s.onBlurInput(o,a,"firstName"))}),e.qZA(),e.YNc(26,Qn,1,1,"cf-input-hint",32),e.qZA()(),e.TgZ(27,"div",73)(28,"div")(29,"cf-input-group",37),e._UZ(30,"cf-icon",81),e.TgZ(31,"label",30)(32,"span",31),e._uU(33,"Ng\xe0y sinh"),e.qZA(),e._uU(34,"\xa0 "),e.TgZ(35,"span",82),e._uU(36," (Nh\u1ecf h\u01a1n 2 tu\u1ed5i) "),e.qZA()(),e.TgZ(37,"input",125,84),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(38);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(38);return e.KtG(o.close())}),e.qZA(),e.YNc(39,Un,1,1,"cf-input-hint",32),e.YNc(40,On,1,1,"cf-input-hint",32),e.qZA()()(),e.TgZ(41,"div",73)(42,"cf-select",126,127)(44,"label",30)(45,"span",31),e._uU(46,"Thu\u1ed9c h\xe0nh kh\xe1ch ng\u01b0\u1eddi l\u1edbn"),e.qZA()(),e.YNc(47,Yn,1,1,"cf-input-hint",32),e.YNc(48,Rn,1,1,"cf-input-hint",32),e.qZA()()(),e.YNc(49,ii,16,10,"div",85),e.TgZ(50,"cf-collapse",86)(51,"cf-collapse-panel",87),e.YNc(52,oi,4,0,"ng-template",null,66,e.W1O),e.TgZ(54,"div",88)(55,"cf-input-group",89)(56,"label",30),e._uU(57," Bamboo Airways (QH) "),e.qZA(),e._UZ(58,"input",90),e.qZA(),e.TgZ(59,"cf-input-group",89)(60,"label",30),e._uU(61," Vietnam Airlines (VNA) "),e.qZA(),e._UZ(62,"input",90),e.qZA()()()()()}if(2&i){const t=e.MAs(53),n=e.oxw().$implicit,o=e.oxw();e.xp6(2),e.Q6J("ngIf",!(n.controls.firstName.valid&&n.controls.lastName.valid)),e.xp6(1),e.Q6J("ngIf",n.controls.firstName.valid&&n.controls.lastName.valid),e.xp6(1),e.Q6J("ngIf",o.canExtractImageToDocument),e.xp6(4),e.Q6J("status",n.controls.gender.invalid&&(n.controls.gender.dirty||n.controls.gender.touched)?"error":"default")("data",o.optionsGender)("allowSearch",!1)("formControl",o.getFormControlInArray(n,"gender")),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",n.controls.gender.hasError("required")&&(n.controls.gender.touched||n.controls.gender.dirty)),e.xp6(2),e.Q6J("status",n.controls.lastName.invalid&&(n.controls.lastName.dirty||n.controls.lastName.touched)?"error":"default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",o.getFormControlInArray(n,"lastName")),e.xp6(1),e.Q6J("ngIf",n.controls.lastName.hasError("required")&&(n.controls.lastName.touched||n.controls.lastName.dirty)),e.xp6(2),e.Q6J("status",n.controls.firstName.invalid&&(n.controls.firstName.dirty||n.controls.firstName.touched)?"error":"default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",o.getFormControlInArray(n,"firstName")),e.xp6(1),e.Q6J("ngIf",n.controls.firstName.hasError("required")&&(n.controls.firstName.touched||n.controls.firstName.dirty)),e.xp6(3),e.Q6J("status",n.controls.birthday.invalid&&(n.controls.birthday.dirty||n.controls.birthday.touched)?"error":"default"),e.xp6(3),e.Q6J("CfRequired",!0),e.xp6(5),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("maxDate",o.currentDate)("formControl",o.getFormControlInArray(n,"birthday")),e.xp6(2),e.Q6J("ngIf",n.controls.birthday.hasError("required")&&(n.controls.birthday.touched||n.controls.birthday.dirty)),e.xp6(1),e.Q6J("ngIf",n.controls.birthday.hasError("DoBInfant")&&n.controls.birthday.touched),e.xp6(2),e.Q6J("status",n.controls.parentIndex.invalid&&(n.controls.parentIndex.dirty||n.controls.parentIndex.touched)?"error":"default")("data",o.optionsAdultPassenger)("allowSearch",!1)("formControl",n.controls.parentIndex),e.xp6(3),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",n.controls.parentIndex.hasError("required")&&(n.controls.parentIndex.touched||n.controls.parentIndex.dirty)),e.xp6(1),e.Q6J("ngIf",n.controls.parentIndex.hasError("ParentInfantDupplicate")&&(n.controls.parentIndex.touched||n.controls.parentIndex.dirty)),e.xp6(1),e.Q6J("ngIf",o.hasAirportInternational),e.xp6(2),e.Q6J("title",t)("active",!1),e.xp6(7),e.Q6J("formControl",o.getFormControlInArray(n,"membershipQH")),e.xp6(4),e.Q6J("formControl",o.getFormControlInArray(n,"membershipVN"))}}function ri(i,l){if(1&i&&(e.ynx(0,null,123),e.TgZ(2,"cf-collapse",64)(3,"cf-collapse-panel",65),e.YNc(4,Fn,2,2,"ng-template",null,66,e.W1O),e.GkF(6,67),e.qZA()(),e.TgZ(7,"div",68),e.GkF(8,67),e.YNc(9,ai,63,37,"ng-template",null,124,e.W1O),e.qZA(),e.BQk()),2&i){const t=e.MAs(5),n=e.MAs(10);e.xp6(3),e.Q6J("title",t)("active",!0),e.xp6(3),e.Q6J("ngTemplateOutlet",n),e.xp6(2),e.Q6J("ngTemplateOutlet",n)}}function si(i,l){1&i&&(e.TgZ(0,"div",140),e._uU(1," Ch\u01b0a th\xeam h\xe0nh l\xfd k\xed g\u1eedi "),e.qZA())}function ci(i,l){1&i&&(e.TgZ(0,"div",141),e._uU(1," \u0110\xe3 th\xeam h\xe0nh l\xfd "),e.qZA())}function li(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",142),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onClearBaggage())}),e._UZ(1,"cf-icon",143),e.TgZ(2,"div",51),e._uU(3,"H\u1ee7y"),e.qZA()()}}function di(i,l){1&i&&e._UZ(0,"cf-icon",146)}function ui(i,l){1&i&&(e.TgZ(0,"span",51),e._uU(1,"Th\xeam"),e.qZA())}function gi(i,l){1&i&&e._UZ(0,"cf-icon",147)}function pi(i,l){1&i&&(e.TgZ(0,"span",51),e._uU(1,"Thay \u0111\u1ed5i"),e.qZA())}function hi(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",142),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onAddBaggage())}),e.YNc(1,di,1,0,"cf-icon",144),e.YNc(2,ui,2,0,"span",12),e.YNc(3,gi,1,0,"cf-icon",145),e.YNc(4,pi,2,0,"span",12),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.hasBaggageSelected),e.xp6(1),e.Q6J("ngIf",!t.hasBaggageSelected),e.xp6(1),e.Q6J("ngIf",t.hasBaggageSelected),e.xp6(1),e.Q6J("ngIf",t.hasBaggageSelected)}}function _i(i,l){1&i&&(e.TgZ(0,"div",140),e._uU(1," Ch\u01b0a mua th\xeam ch\u1ed7 ng\u1ed3i "),e.qZA())}function fi(i,l){1&i&&(e.TgZ(0,"div",141),e._uU(1," \u0110\xe3 th\xeam ch\u1ed7 ng\u1ed3i "),e.qZA())}function mi(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",142),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.onClearSeat())}),e._UZ(1,"cf-icon",143),e.TgZ(2,"div",51),e._uU(3,"H\u1ee7y"),e.qZA()()}}function vi(i,l){1&i&&e._UZ(0,"cf-icon",146)}function Ci(i,l){1&i&&(e.TgZ(0,"span",51),e._uU(1,"Th\xeam"),e.qZA())}function yi(i,l){1&i&&e._UZ(0,"cf-icon",147)}function xi(i,l){1&i&&(e.TgZ(0,"span",51),e._uU(1,"Thay \u0111\u1ed5i"),e.qZA())}function bi(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",142),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.onAddOnSeat())}),e.YNc(1,vi,1,0,"cf-icon",144),e.YNc(2,Ci,2,0,"span",12),e.YNc(3,yi,1,0,"cf-icon",145),e.YNc(4,xi,2,0,"span",12),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.hasSeatSelected),e.xp6(1),e.Q6J("ngIf",!t.hasSeatSelected),e.xp6(1),e.Q6J("ngIf",t.hasSeatSelected),e.xp6(1),e.Q6J("ngIf",t.hasSeatSelected)}}function Ii(i,l){if(1&i&&(e.TgZ(0,"div",129)(1,"div",130)(2,"div",148),e._UZ(3,"cf-icon",149),e.qZA(),e.TgZ(4,"div",133)(5,"div",134),e._uU(6,"Ch\u1ed7 ng\u1ed3i"),e.qZA(),e.YNc(7,_i,2,0,"div",135),e.YNc(8,fi,2,0,"div",136),e.qZA()(),e.TgZ(9,"div",137),e.YNc(10,mi,4,0,"button",138),e.YNc(11,bi,5,4,"button",138),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(7),e.Q6J("ngIf",!t.hasSeatSelected),e.xp6(1),e.Q6J("ngIf",t.hasSeatSelected),e.xp6(2),e.Q6J("ngIf",t.hasSeatSelected),e.xp6(1),e.Q6J("ngIf",t.isAddOn)}}function Ti(i,l){if(1&i&&(e.TgZ(0,"div",6)(1,"div",7)(2,"div",8),e._UZ(3,"div",9),e.TgZ(4,"div",10),e._uU(5,"D\u1ecbch v\u1ee5 c\u1ed9ng th\xeam"),e.qZA()()(),e.TgZ(6,"div",128)(7,"div",129)(8,"div",130)(9,"div"),e.O4$(),e.TgZ(10,"svg",131),e._UZ(11,"path",132),e.qZA()(),e.kcU(),e.TgZ(12,"div",133)(13,"div",134),e._uU(14,"H\xe0nh l\xfd k\xed g\u1eedi"),e.qZA(),e.YNc(15,si,2,0,"div",135),e.YNc(16,ci,2,0,"div",136),e.qZA()(),e.TgZ(17,"div",137),e.YNc(18,li,4,0,"button",138),e.YNc(19,hi,5,4,"button",138),e.qZA()(),e.YNc(20,Ii,12,4,"div",139),e.qZA()()),2&i){const t=e.oxw();e.xp6(15),e.Q6J("ngIf",!t.hasBaggageSelected),e.xp6(1),e.Q6J("ngIf",t.hasBaggageSelected),e.xp6(2),e.Q6J("ngIf",t.hasBaggageSelected),e.xp6(1),e.Q6J("ngIf",t.isAddOn),e.xp6(1),e.Q6J("ngIf",t.isAddonSeat)}}function Pi(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw(2);e.Q6J("hint",t.errorMessage.agentId)}}function Ei(i,l){1&i&&e._UZ(0,"cf-icon",154)}function Ai(i,l){1&i&&(e.TgZ(0,"div",157),e._uU(1," Remark c\xf4ng khai"),e.qZA())}function Si(i,l){1&i&&(e.TgZ(0,"div",157),e._uU(1," Remark"),e.qZA())}function ki(i,l){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ai,2,0,"div",155),e.YNc(2,Si,2,0,"div",155),e.TgZ(3,"div"),e._UZ(4,"textarea",156),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.canPublicRemark&&t.canPrivateRemark),e.xp6(1),e.Q6J("ngIf",t.canPublicRemark&&!t.canPrivateRemark),e.xp6(2),e.Q6J("formControl",t.getFormControlInArray(t.formGroup,"publicRemark"))}}function Di(i,l){if(1&i&&(e.TgZ(0,"div")(1,"div",157),e._uU(2,"Remark b\xed m\u1eadt"),e.qZA(),e.TgZ(3,"div"),e._UZ(4,"textarea",156),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("formControl",t.getFormControlInArray(t.formGroup,"secretRemark"))}}const Ni=function(i){return{"opacity-50 pointer-events-none cursor-default":i}};function Zi(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",150)(1,"div",7)(2,"div",8),e._UZ(3,"div",9),e.TgZ(4,"div",10),e._uU(5,"Ch\u1ecdn \u0111\u1ea1i l\xfd s\u1edf h\u1eefu"),e.qZA()()(),e.TgZ(6,"div",151)(7,"div",11)(8,"cf-select",152),e.NdJ("selectedChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onSelectAgent(o))}),e.TgZ(9,"label",30)(10,"span",31),e._uU(11,"Thu\u1ed9c \u0111\u1ea1i l\xfd"),e.qZA()(),e.YNc(12,Pi,1,1,"cf-input-hint",32),e.qZA(),e.YNc(13,Ei,1,0,"cf-icon",153),e.qZA(),e.YNc(14,ki,5,3,"div",57),e.YNc(15,Di,5,1,"div",57),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(8),e.Q6J("ngClass",e.VKq(11,Ni,t.isDisableAgentOption))("status",t.formGroup.controls.agentId.invalid&&(t.formGroup.controls.agentId.dirty||t.formGroup.controls.agentId.touched)?"error":"default")("data",t.agentOption)("ngModel",t.agentSelected)("allowSearch",!0)("formControl",t.getFormControlInArray(t.formGroup,"agentId")),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",t.formGroup.controls.agentId.hasError("required")&&(t.formGroup.controls.agentId.touched||t.formGroup.controls.agentId.dirty)),e.xp6(1),e.Q6J("ngIf",t.isDisableAgentOption),e.xp6(1),e.Q6J("ngIf",t.canPublicRemark),e.xp6(1),e.Q6J("ngIf",t.canPrivateRemark)}}function Fi(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw();e.Q6J("hint",t.errorMessage.areaCode)}}function Bi(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw();e.Q6J("hint",t.errorMessage.phone)}}function Ji(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw();e.Q6J("hint",t.errorMessage.minlengthPhone)}}function wi(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw();e.Q6J("hint",t.errorMessage.maxlengthPhone)}}function Mi(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw();e.Q6J("hint",t.errorMessage.phoneBlacklisted)}}function qi(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw();e.Q6J("hint",t.errorMessage.email)}}function Qi(i,l){if(1&i&&e._UZ(0,"cf-input-hint",95),2&i){const t=e.oxw();e.Q6J("hint",t.errorMessage.emailFormat)}}function Ui(i,l){if(1&i&&(e.TgZ(0,"div",160),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.Dn7(2,1,e.lcZ(3,5,t.totalDiscountFareCharge),",",".")," \u0111")}}function Oi(i,l){if(1&i&&(e.TgZ(0,"div",160),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.Dn7(2,1,e.lcZ(3,5,t.totalPriceCombo),",",".")," \u0111")}}function Yi(i,l){if(1&i&&(e.TgZ(0,"div",160),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij("",e.Dn7(2,1,e.lcZ(3,5,t.totalPrice),",",".")," \u0111")}}function Ri(i,l){if(1&i&&(e.YNc(0,Oi,4,7,"div",161),e.YNc(1,Yi,4,7,"div",161)),2&i){const t=e.oxw(2);e.Q6J("ngIf",t.totalPriceCombo),e.xp6(1),e.Q6J("ngIf",!t.totalPriceCombo)}}function Gi(i,l){if(1&i&&(e.TgZ(0,"div",46)(1,"div",47),e._uU(2,"T\u1ed5ng chi ph\xed:"),e.qZA(),e.YNc(3,Ui,4,7,"div",158),e.YNc(4,Ri,2,2,"ng-template",null,159,e.W1O),e.qZA()),2&i){const t=e.MAs(5),n=e.oxw();e.xp6(3),e.Q6J("ngIf",n.totalDiscountFareCharge)("ngIfElse",t)}}function Vi(i,l){if(1&i&&(e.TgZ(0,"div",162),e._UZ(1,"cf-select",163),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("data",t.agentOption)("ngModel",t.agentSelected)("allowSearch",!1)("formControl",t.getFormControlInArray(t.formGroup,"agentId"))}}function Ki(i,l){if(1&i&&(e.TgZ(0,"div",160),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.Dn7(2,1,e.lcZ(3,5,t.totalDiscountFareCharge),",",".")," \u0111")}}function Hi(i,l){if(1&i&&(e.TgZ(0,"div",160),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij("",e.Dn7(2,1,e.lcZ(3,5,t.totalPriceCombo),",",".")," \u0111")}}function ji(i,l){if(1&i&&(e.TgZ(0,"div",160),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij("",e.Dn7(2,1,e.lcZ(3,5,t.totalPrice),",",".")," \u0111")}}function Li(i,l){if(1&i&&(e.YNc(0,Hi,4,7,"div",161),e.YNc(1,ji,4,7,"div",161)),2&i){const t=e.oxw(2);e.Q6J("ngIf",t.totalPriceCombo),e.xp6(1),e.Q6J("ngIf",!t.totalPriceCombo)}}function $i(i,l){if(1&i&&(e.TgZ(0,"div",46)(1,"div",47),e._uU(2,"T\u1ed5ng chi ph\xed:"),e.qZA(),e.YNc(3,Ki,4,7,"div",158),e.YNc(4,Li,2,2,"ng-template",null,159,e.W1O),e.qZA()),2&i){const t=e.MAs(5),n=e.oxw();e.xp6(3),e.Q6J("ngIf",n.totalDiscountFareCharge)("ngIfElse",t)}}function zi(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",164),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onBookFlight(!0))}),e._UZ(1,"cf-icon",165),e._uU(2," Xu\u1ea5t v\xe9 "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.loading)}}function Xi(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",166),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onBookFlight(!1))}),e._UZ(1,"cf-icon",167),e._uU(2," Gi\u1eef ch\u1ed7 "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.loading)}}function Wi(i,l){1&i&&e._UZ(0,"cf-spinner")}function eo(i,l){1&i&&(e.TgZ(0,"cf-spinner")(1,"div",168),e._uU(2,"Flychills cam k\u1ebft kh\xf4ng l\u01b0u tr\u1eef files ho\u1eb7c s\u1eed d\u1ee5ng cho b\u1ea5t k\xec m\u1ee5c \u0111\xedch kh\xe1c."),e.qZA()())}let to=(()=>{class i{constructor(t,n,o,a,s,r,p,g,c,_,v,m,y,I,k,F,P,A,J,w,M,q,G,ee){var L;this.fb=t,this._dataProvider=n,this._locationDataService=o,this._bookFlightService=a,this._ticketSelectedDataProvider=s,this._router=r,this.calendar=p,this._bookingResultDataProvider=g,this._bookingRequestDataProvider=c,this._iconRegister=_,this._modal=v,this._flightDataService=m,this._phoneDataService=y,this._cd=I,this._userService=k,this._permissionService=F,this._eventLogService=P,this._toastService=A,this._detectMobileService=J,this._bottomSheetService=w,this._systemService=M,this._sockerService=q,this._aiService=G,this._ticketLowFareService=ee,this.destroy$=new be.x,this.totalPrice=0,this.totalDiscountFareCharge=0,this.totalPriceCombo=0,this.totalPriceSource=0,this.optionsGender=[{name:"Nam",code:"male"},{name:"N\u1eef",code:"female"}],this.optionsAdultPassenger=[],this.optionsAreaCode=this._phoneDataService.optionsAreaCode,this.agentOption=[],this.agentInfo=[],this.phoneAreaDefault=u.$T,this.agentSelected="",this.errorMessage={lastName:"H\u1ecd kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",firstName:"T\xean \u0111\u1ec7m v\xe0 T\xean kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",birthday:"Ng\xe0y sinh kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",DoBChild:"Ng\xe0y sinh kh\xf4ng h\u1ee3p l\u1ec7",DoBChildUnder:"Ng\xe0y sinh ph\u1ea3i t\u1eeb ng\xe0y {0} tr\u1edf v\u1ec1 tr\u01b0\u1edbc",DoBChildUpper:"Ng\xe0y sinh ph\u1ea3i t\u1eeb ng\xe0y {0} tr\u1edf v\u1ec1 sau",DoBInfant:"Ng\xe0y sinh ph\u1ea3i t\u1eeb ng\xe0y {0}",gender:"Gi\u1edbi t\xednh kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",email:"Email kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",emailFormat:"\u0110\u1ecbnh d\u1ea1ng kh\xf4ng h\u1ee3p l\u1ec7",phone:"Sdt kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",phoneBlacklisted:"Vui l\xf2ng nh\u1eadp sdt kh\xe1ch h\xe0ng, kh\xf4ng nh\u1eadp sdt c\u1ee7a \u0111\u1ea1i l\xfd",parentIndex:"Ng\u01b0\u1eddi l\u1edbn \u0111i k\xe8m kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",areaCode:"M\xe3 v\xf9ng kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",minlengthPhone:"\u0110i\u1ec7n tho\u1ea1i di \u0111\u1ed9ng t\u1ed1i thi\u1ec3u 7 s\u1ed1",maxlengthPhone:"\u0110i\u1ec7n tho\u1ea1i di \u0111\u1ed9ng t\u1ed1i \u0111a 11 s\u1ed1",agentId:"\u0110\u1ea1i l\xfd kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",ParentInfantDupplicate:"M\u1ed7i ng\u01b0\u1eddi l\u1edbn ch\u1ec9 c\xf3 t\u1ed1i \u0111a 1 em b\xe9 ph\u1ee5 thu\u1ed9c",DoBAdult:"Ng\u01b0\u1eddi l\u1edbn ph\u1ea3i l\u1edbn h\u01a1n 12 tu\u1ed5i",maxlengthPassportNumber:"S\u1ed1 h\u1ed9 chi\u1ebfu t\u1ed1i \u0111a 9 k\xfd t\u1ef1",maxlengthCccdNumber:"S\u1ed1 CCCD t\u1ed1i \u0111a 12 k\xfd t\u1ef1",minlengthCccdNumber:"S\u1ed1 CCCD t\u1ed1i thi\u1ec3u 9 k\xfd t\u1ef1",passportNumber:"S\u1ed1 h\u1ed9 chi\u1ebfu kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",cccdNumber:"S\u1ed1 CCCD kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",nationality:"Qu\u1ed1c t\u1ecbch kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",issuanceCountry:"Qu\u1ed1c gia kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",expiryDate:"Ng\xe0y h\u1ebft h\u1ea1n kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",issuanceDate:"Ng\xe0y c\u1ea5p kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",issuanceDateInvalid:"Ng\xe0y c\u1ea5p h\u1ed9 chi\u1ebfu ph\u1ea3i tr\u01b0\u1edbc ng\xe0y h\u1ebft h\u1ea1n"},this.numberOfPaxUpload=0,this.listTicketSelected=[],this.loading=!1,this.isExtractingDocument=!1,this.isAddOn=!1,this.isHiddenFeature=!1,this.isHiddenAddonSeat=!1,this.isAddonSeat=!1,this.hasVNAirline=!1,this.hasVUAirline=!1,this.hasVJAirline=!1,this.checkPhoneRequired=this._systemService.isFeatureEnabled(u.Ke.Web_Features_RulePhoneNumber_RulePhoneNumberVJ_Enable),this.has1GProvider=!1,this.hasFlyOneProvider=!1,this.hasBZTProvider=!1,this.hasSTProvider=!1,this.hasHGProvider=!1,this.hasIVSProvider=!1,this.hasRouteGroupRequire=!1,this.lccFare=!1,this.hasBaggageSelected=!1,this.hasSeatSelected=!1,this.isDisableAgentOption=!0,this.dataBaggageInput=[],this.dataSeatInput=[],this.passengerText="",this.isShowBooking=this._permissionService.hasPermission(V.or.CanBookingFlightTicket),this.isShowIssued=this._permissionService.hasPermission(V.or.CanIssuedFlightTicket),this.canEditHeader=this._permissionService.hasPermission(V.or.EditShareFlightSelectedHeader),this.canPrivateRemark=this._permissionService.hasPermission(V.or.CreateFlightPrivateRemark),this.canPublicRemark=this._permissionService.hasPermission(V.or.CreateFlightPublicRemark),this.canExtractImageToDocument=this._permissionService.hasPermission(V.or.CanExtractImageToDocument),this.isShowForBooker=!this._permissionService.isVNAccount(),this.isHiddenTotalCharge=!1,this.defaultBirthdayAdt=u.H_,this.hasInternationalFlight=!1,this.identityType=u.FV.NON_IDENTIFY,this.CF_IDENTIFY_TYPE=u.FV,this.hasAirportInternational=!1,this.showMoreTerm=!1,this.ROUTE_GROUP_REQUIRE=u.nl,this.isProcessingTimeout=!1,_.registerIcons([T.IIV,T.Xlt,T.ILM,T.D7,T.rks,T._tC,T.okA,T.Rcu,T.Lxr,T.Hge,T.uQp,T.gW0,T.$S]),this.currentDate=p.getToday(),this.currentUserStorage=JSON.parse(null!==(L=localStorage.getItem("currentUser"))&&void 0!==L?L:"").data,this.listTicketSelected=this._ticketSelectedDataProvider.ticketSelectedData.map(x=>Object.assign(Object.assign({},x),{showSurchargeFare:!1,surcharge:0,bagCharge:0,seatCharge:0})),this.hasInternationalFlight=this.listTicketSelected.some(x=>["GDS","BSP","AIR_1G","FLY_ONE"].includes(x.provider.toUpperCase())),this.listTicketSelected.forEach(x=>{(this._locationDataService.checkAirportInternational(x.startCode)||this._locationDataService.checkAirportInternational(x.endCode))&&(this.hasAirportInternational=!0)}),this.identityType=this.hasAirportInternational?u.FV.PASSPORT:u.FV.NON_IDENTIFY,this.isHiddenFeature=this.listTicketSelected.every(x=>["VU","GDS","BSP","AIR_1G","FLY_ONE","BZT","ST","HG"].includes(x.provider.toUpperCase())),this.isAddonSeat=this.listTicketSelected.every(x=>{var B;return"vn".includes(null===(B=x.provider)||void 0===B?void 0:B.toLowerCase())})?u.kp.vn:this.listTicketSelected.every(x=>{var B;return"qh".includes(null===(B=x.provider)||void 0===B?void 0:B.toLowerCase())})?u.kp.qh:this.listTicketSelected.every(x=>{var B;return"vj".includes(null===(B=x.provider)||void 0===B?void 0:B.toLowerCase())})?u.kp.vj:!this.listTicketSelected.every(x=>{var B;return"gds".includes(null===(B=x.provider)||void 0===B?void 0:B.toLowerCase())})||u.kp.gds,this.hasVNAirline=this.listTicketSelected.some(x=>["VN","vn","GDS","gds"].includes(x.provider)),this.hasVUAirline=this.listTicketSelected.some(x=>"VU"===x.provider.toUpperCase()),this.hasVJAirline=this.listTicketSelected.some(x=>"VJ"===x.provider.toUpperCase()||"VJ"===x.airline.toUpperCase()),this.has1GProvider=this.listTicketSelected.some(x=>x.provider.toUpperCase()===u.QK.AIR_1G),this.hasBZTProvider=this.listTicketSelected.some(x=>x.provider.toUpperCase()===u.QK.BZT),this.hasSTProvider=this.listTicketSelected.some(x=>x.provider.toUpperCase()===u.QK.ST),this.hasHGProvider=this.listTicketSelected.some(x=>x.provider.toUpperCase()===u.QK.HG),this.hasFlyOneProvider=this.listTicketSelected.some(x=>x.provider.toUpperCase()===u.QK.FLY_ONE),this.hasIVSProvider=this.listTicketSelected.some(x=>x.provider.toUpperCase()===u.QK.IVS),this.lccFare=this.listTicketSelected.some(x=>x.lccFare),this.isShowIssued=this.isShowIssued&&!this.listTicketSelected.some(x=>["BSP","AIR_1G","BZT","ST","FLY_ONE","HG"].includes(x.provider.toUpperCase()));const te=this._ticketSelectedDataProvider.ticketSelectedData[0].startTime;this.departureTime=E(te).toDate().getTime(),this.earliestDoBChild=(0,ne.Z)(this.departureTime,-2),this.earliestDoBChild.setHours(0,0,0,0),this.earliestDoBInfant=E(te).toDate(),this.lastestDoBChild=(0,ne.Z)(this.departureTime,-11),this.lastestDoBInfant=(0,ne.Z)(this.departureTime,-2),this.lastestDoBInfant=(0,xe.Z)(this.lastestDoBInfant,1),this.errorMessage.DoBChildUnder=this.errorMessage.DoBChildUnder.replace("{0}",(0,h.p6)(this.earliestDoBChild,"dd/MM/yyyy","vi-VN")),this.errorMessage.DoBChildUpper=this.errorMessage.DoBChildUpper.replace("{0}",(0,h.p6)(this.lastestDoBChild,"dd/MM/yyyy","vi-VN")),this.errorMessage.DoBInfant=this.errorMessage.DoBInfant.replace("{0}",(0,h.p6)(this.lastestDoBInfant,"dd/MM/yyyy","vi-VN")),this.hasRouteGroupRequire=this.listTicketSelected.some(x=>this.ROUTE_GROUP_REQUIRE.has(`${x.startCode}-${x.endCode}`))}ngOnInit(){this.initFormGroup(),this.loadTicketSelectedData(),this.getNumberOfPassenger(),this.initAdultFormGroup(),this.initChildFormGroup(),this.initInfantFormGroup(),this.initAgentData(),this.patchValueForm(),this.checkAddOn(),this.showTotalCharge(),this.timeoutExpire(),this.handleSocketTimoutEvent(),this.countryOption=this._locationDataService.getAllCountryOption()}get getFormValue(){return this.formGroup.value}handleSocketTimoutEvent(){const n=this._permissionService.getCurrentUser().userId;this._sockerService.timeoutEvent$.subscribe({next:o=>{if(this.refTimoutModal&&this.refTimoutModal.close(),this.refTimoutBts&&this.refTimoutBts.dismiss(),o.receiverId===n){const a=`/admin/booking-detail/${o.airline}/${o.pnr}`;this._toastService.add({severity:"success",summary:"Xu\u1ea5t v\xe9 th\xe0nh c\xf4ng",detail:"M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 \u0111\u01b0\u1ee3c xu\u1ea5t v\xe9 th\xe0nh c\xf4ng!",sticky:!1}),this._router.navigate([a])}}})}initAgentData(){this._userService.getAllAgentUserForBooking().pipe((0,R.x)(()=>this.isDisableAgentOption=!1)).subscribe({next:t=>{var n,o;if(this.agentInfo=t.data.map(a=>({id:a.userId,userName:a.userName,displayName:a.displayName,phone:a.phone,email:a.email})),this.agentOption=t.data.map(a=>({name:`${a.userName} - ${a.displayName}`,code:a.userId})),1===this.agentOption.length)this.agentSelected=this.agentOption[0].code,(!this.hasVJAirline||this.hasVJAirline&&!this.checkPhoneRequired)&&(null===(n=this.formGroup.get("phone"))||void 0===n||n.setValue(t.data[0].phone)),null===(o=this.formGroup.get("email"))||void 0===o||o.setValue(t.data[0].email);else if(this._permissionService.isAgent2()){const a=this.agentOption.find(s=>s.code===this._permissionService.getCurrentUser().userId);a&&(this.agentSelected=a.code)}}})}getNumberOfPassenger(){const t=this._dataProvider.searchInputData;this.numberOfPassenger={adult:t.adult,child:t.child,infant:t.infant},this.numberOfPaxUpload=t.adult+t.child+t.infant,this.initAdultPassengerOptions()}initAdultPassengerOptions(){for(let t=0;t<this.numberOfPassenger.adult;t++)this.optionsAdultPassenger.push({code:t+"",name:`Ng\u01b0\u1eddi l\u1edbn ${t+1}`})}initFormGroup(){this.formGroup=this.fb.group({email:[null,[d.kI.required,d.kI.email]],phone:[null,[d.kI.required,d.kI.minLength(7),d.kI.maxLength(11)]],areaCode:[this.phoneAreaDefault,d.kI.required],agentId:[null,d.kI.required],secretRemark:[null],publicRemark:[null],adultPassenger:this.fb.array([]),childPassenger:this.fb.array([]),infantPassenger:this.fb.array([])},{validator:(0,Q.aV)()}),this.formGroup.valueChanges.subscribe(()=>{this.getAdultPassenger()})}patchValueForm(){var t,n;const o={email:(null===(t=this.currentUserStorage)||void 0===t?void 0:t.email)||"giacmobayre@gmail.com",phone:!this.hasVJAirline||this.hasVJAirline&&!this.checkPhoneRequired?null===(n=this.currentUserStorage)||void 0===n?void 0:n.phone:"",areaCode:this.phoneAreaDefault};this.formGroup.patchValue(o)}initAdultFormGroup(){var t,n,o,a,s,r,p,g,c,_;for(let v=0;v<this.numberOfPassenger.adult;v++){const m=this.fb.group({birthday:[null],firstName:[null,[d.kI.required]],lastName:[null,[d.kI.required]],gender:["male",[d.kI.required]],membershipQH:[null],membershipVN:[null],issuanceDate:[null],expiryDate:[null],issuanceCountry:[null],nationality:[null],number:[null],cccdNumber:[null],documentType:[this.identityType],type:["ADT"]},{validators:[(0,Q.fJ)("birthday",this.departureTime),(0,Q.i4)("issuanceDate","expiryDate")]});(this.has1GProvider||this.hasFlyOneProvider||this.hasBZTProvider||this.hasSTProvider||this.hasHGProvider||this.hasVJAirline&&(this.hasAirportInternational||this.hasRouteGroupRequire))&&(null===(t=m.get("issuanceDate"))||void 0===t||t.setValidators([d.kI.required]),null===(n=m.get("issuanceDate"))||void 0===n||n.updateValueAndValidity(),null===(o=m.get("expiryDate"))||void 0===o||o.setValidators([d.kI.required]),null===(a=m.get("expiryDate"))||void 0===a||a.updateValueAndValidity(),null===(s=m.get("issuanceCountry"))||void 0===s||s.setValidators([d.kI.required]),null===(r=m.get("issuanceCountry"))||void 0===r||r.updateValueAndValidity(),null===(p=m.get("nationality"))||void 0===p||p.setValidators([d.kI.required]),null===(g=m.get("nationality"))||void 0===g||g.updateValueAndValidity(),null===(c=m.get("number"))||void 0===c||c.setValidators([d.kI.required,d.kI.maxLength(9)]),null===(_=m.get("number"))||void 0===_||_.updateValueAndValidity()),this.getFormArray("adultPassenger").push(m)}}initChildFormGroup(){var t,n,o,a,s,r,p,g,c,_;for(let v=0;v<this.numberOfPassenger.child;v++){const m=this.fb.group({birthday:[null,[d.kI.required]],firstName:[null,[d.kI.required]],lastName:[null,[d.kI.required]],gender:["male",[d.kI.required]],membershipQH:[null],membershipVN:[null],issuanceDate:[null],expiryDate:[null],issuanceCountry:[null],nationality:[null],number:[null],cccdNumber:[null],documentType:[this.hasVJAirline?this.hasRouteGroupRequire?u.FV.PASSPORT:u.FV.NON_IDENTIFY:this.identityType],type:["CHD"]},{validators:[(0,Q.$K)("birthday",this.departureTime),(0,Q.i4)("issuanceDate","expiryDate")]});(this.has1GProvider||this.hasFlyOneProvider||this.hasBZTProvider||this.hasSTProvider||this.hasHGProvider||this.hasVJAirline&&this.hasRouteGroupRequire)&&(null===(t=m.get("issuanceDate"))||void 0===t||t.setValidators([d.kI.required]),null===(n=m.get("issuanceDate"))||void 0===n||n.updateValueAndValidity(),null===(o=m.get("expiryDate"))||void 0===o||o.setValidators([d.kI.required]),null===(a=m.get("expiryDate"))||void 0===a||a.updateValueAndValidity(),null===(s=m.get("issuanceCountry"))||void 0===s||s.setValidators([d.kI.required]),null===(r=m.get("issuanceCountry"))||void 0===r||r.updateValueAndValidity(),null===(p=m.get("nationality"))||void 0===p||p.setValidators([d.kI.required]),null===(g=m.get("nationality"))||void 0===g||g.updateValueAndValidity(),null===(c=m.get("number"))||void 0===c||c.setValidators([d.kI.required,d.kI.maxLength(9)]),null===(_=m.get("number"))||void 0===_||_.updateValueAndValidity()),this.getFormArray("childPassenger").push(m)}}initInfantFormGroup(){var t,n,o,a,s,r,p,g,c,_;for(let v=0;v<this.numberOfPassenger.infant;v++){const m=this.fb.group({birthday:[null,[d.kI.required]],firstName:[null,[d.kI.required]],lastName:[null,[d.kI.required]],gender:["male",[d.kI.required]],parentIndex:[v+"",[d.kI.required]],membershipQH:[null],membershipVN:[null],issuanceDate:[null],expiryDate:[null],issuanceCountry:[null],nationality:[null],number:[null],cccdNumber:[null],documentType:[this.hasVJAirline?u.FV.NON_IDENTIFY:this.identityType],type:["INF"]},{validators:[(0,Q.DW)("birthday",this.departureTime),(0,Q.i4)("issuanceDate","expiryDate")]});(this.has1GProvider||this.hasFlyOneProvider||this.hasBZTProvider||this.hasSTProvider||this.hasHGProvider)&&(null===(t=m.get("issuanceDate"))||void 0===t||t.setValidators([d.kI.required]),null===(n=m.get("issuanceDate"))||void 0===n||n.updateValueAndValidity(),null===(o=m.get("expiryDate"))||void 0===o||o.setValidators([d.kI.required]),null===(a=m.get("expiryDate"))||void 0===a||a.updateValueAndValidity(),null===(s=m.get("issuanceCountry"))||void 0===s||s.setValidators([d.kI.required]),null===(r=m.get("issuanceCountry"))||void 0===r||r.updateValueAndValidity(),null===(p=m.get("nationality"))||void 0===p||p.setValidators([d.kI.required]),null===(g=m.get("nationality"))||void 0===g||g.updateValueAndValidity(),null===(c=m.get("number"))||void 0===c||c.setValidators([d.kI.required,d.kI.maxLength(9)]),null===(_=m.get("number"))||void 0===_||_.updateValueAndValidity()),this.getFormArray("infantPassenger").push(m)}}getFormArray(t){return this.formGroup.controls[t]}controlForm(t,n){return(0,Q.bz)(t,n)}getFormControlInArray(t,n){return t.controls[n]}getAdultPassenger(){this.getFormArray("adultPassenger").value.forEach((t,n)=>{var o;this.optionsAdultPassenger[n].name=t.lastName&&t.firstName?t.lastName+" "+t.firstName:`Ng\u01b0\u1eddi l\u1edbn ${n+1}`,null===(o=this.parentSelectInfants)||void 0===o||o.forEach(a=>{a.data=this.optionsAdultPassenger,this.optionsAdultPassenger.forEach(s=>{a.selectedText&&s.code===a.selectedText.code&&a.writeValue(a.selectedText.code)})})})}proccessingPassengerInfo(t=!0){const n=Object.assign({},this.getFormValue);return[...n.adultPassenger.map((r,p)=>{var g,c,_,v,m,y,I,k;const F=[];r.membershipQH&&F.push({airline:"QH",membershipID:r.membershipQH}),r.membershipVN&&F.push({airline:"VN",membershipID:r.membershipVN});const P={bookingBaggages:this.getBaggageBook("ADT",p),bookingSeats:this.getSeatBook("ADT",p),bookingServices:[],info:{birthday:r.birthday?E(r.birthday).format("YYYY-MM-DD"):E(new Date(this.defaultBirthdayAdt)).format("YYYY-MM-DD"),documentInfo:r.documentType!==u.FV.NON_IDENTIFY?[{documentType:r.documentType,issuanceDate:r.issuanceDate?E(r.issuanceDate).format("YYYY-MM-DD"):"",expiryDate:r.expiryDate?E(r.expiryDate).format("YYYY-MM-DD"):"",issuanceCountry:(null===(g=r.issuanceCountry)||void 0===g?void 0:g.trim())||"",nationality:(null===(c=r.nationality)||void 0===c?void 0:c.trim())||"",number:r.documentType===u.FV.CCCD?(null===(_=r.cccdNumber)||void 0===_?void 0:_.trim())||"":(null===(v=r.number)||void 0===v?void 0:v.trim())||""}]:[],email:"",firstName:null===(m=r.firstName)||void 0===m?void 0:m.trim(),gender:(null===(y=r.gender)||void 0===y?void 0:y.toUpperCase())||"",lastName:null===(I=r.lastName)||void 0===I?void 0:I.trim(),parentIndex:0,type:"ADT",index:p,loyalInfo:F,setDefaultDocument:r.documentType===u.FV.NON_IDENTIFY,defaultDocumentType:r.documentType===u.FV.NON_IDENTIFY?this.identityType!==u.FV.NON_IDENTIFY?this.identityType:u.FV.CCCD:null}};if(!t){const A=!(null===(k=n.infantPassenger)||void 0===k||!k.find(J=>J.parentIndex==p));P.info.includeInfant=A}return P}),...n.childPassenger.map((r,p)=>{var g,c,_,v,m,y,I;const k=p+n.adultPassenger.length,F=[];return r.membershipQH&&F.push({airline:"QH",membershipID:r.membershipQH}),r.membershipVN&&F.push({airline:"VN",membershipID:r.membershipVN}),{bookingBaggages:this.getBaggageBook("CHD",k),bookingSeats:this.getSeatBook("CHD",k),bookingServices:[],info:{birthday:E(r.birthday).format("YYYY-MM-DD"),documentInfo:r.documentType!==u.FV.NON_IDENTIFY?[{documentType:r.documentType,issuanceDate:r.issuanceDate?E(r.issuanceDate).format("YYYY-MM-DD"):"",expiryDate:r.expiryDate?E(r.expiryDate).format("YYYY-MM-DD"):"",issuanceCountry:(null===(g=r.issuanceCountry)||void 0===g?void 0:g.trim())||"",nationality:(null===(c=r.nationality)||void 0===c?void 0:c.trim())||"",number:r.documentType===u.FV.CCCD?(null===(_=r.cccdNumber)||void 0===_?void 0:_.trim())||"":(null===(v=r.number)||void 0===v?void 0:v.trim())||""}]:[],email:"",firstName:null===(m=r.firstName)||void 0===m?void 0:m.trim(),gender:(null===(y=r.gender)||void 0===y?void 0:y.toUpperCase())||"",lastName:null===(I=r.lastName)||void 0===I?void 0:I.trim(),parentIndex:0,type:"CHD",index:k,loyalInfo:F,setDefaultDocument:r.documentType===u.FV.NON_IDENTIFY,defaultDocumentType:r.documentType===u.FV.NON_IDENTIFY?this.identityType:null}}}),...t?n.infantPassenger.map((r,p)=>{var g,c,_,v,m,y,I;const k=[];return r.membershipQH&&k.push({airline:"QH",membershipID:r.membershipQH}),r.membershipVN&&k.push({airline:"VN",membershipID:r.membershipVN}),{bookingBaggages:[],bookingSeats:[],bookingServices:[],info:{birthday:E(r.birthday).format("YYYY-MM-DD"),documentInfo:r.documentType!==u.FV.NON_IDENTIFY?[{documentType:r.documentType,issuanceDate:r.issuanceDate?E(r.issuanceDate).format("YYYY-MM-DD"):"",expiryDate:r.expiryDate?E(r.expiryDate).format("YYYY-MM-DD"):"",issuanceCountry:(null===(g=r.issuanceCountry)||void 0===g?void 0:g.trim())||"",nationality:(null===(c=r.nationality)||void 0===c?void 0:c.trim())||"",number:r.documentType===u.FV.CCCD?(null===(_=r.cccdNumber)||void 0===_?void 0:_.trim())||"":(null===(v=r.number)||void 0===v?void 0:v.trim())||""}]:[],email:"",firstName:null===(m=r.firstName)||void 0===m?void 0:m.trim(),gender:(null===(y=r.gender)||void 0===y?void 0:y.toUpperCase())||"",lastName:null===(I=r.lastName)||void 0===I?void 0:I.trim(),parentIndex:+r.parentIndex,type:"INF",index:0,loyalInfo:k,setDefaultDocument:r.documentType===u.FV.NON_IDENTIFY,defaultDocumentType:r.documentType===u.FV.NON_IDENTIFY?this.identityType:null}}}):[]]}handleBookFlightData(){var t,n,o;const a=Object.assign({},this.getFormValue),s=this.proccessingPassengerInfo(),r=(null===(t=null==s?void 0:s.find(g=>"ADT"===g.info.type))||void 0===t?void 0:t.info.firstName)||"",p={data:{payNow:!1,bookingContact:{email:a.email,name:r.replace(/[^a-zA-Z]/g,"")||"",phone:a.phone,phonePrefix:a.areaCode},bookingPassengers:s,bookingFlights:{mode:"options",bookingOptions:this.listTicketSelected.filter(g=>"IVS"!==g.provider).map((g,c)=>{var _;return{airline:g.airline,airlineName:g.airlineName,provider:g.provider,bookingFlightInfo:{optionSelect:{fareOptionKey:g.fareOptionKey,segmentSelect:g.segments.map(v=>({fareClass:v.fareClass,segmentKey:v.segmentKey}))},type:"b2b"===g.bookingType?g.bookingType:"b2c"},id:g.airline+"_"+c,journeyKey:g.journeyKey,leg:c,startPoint:g.startCode,endPoint:g.endCode,startTime:E(g.startTime).format("YYYY-MM-DD"),departureLocalTime:E(g.startTime).format("YYYY-MM-DDTHH:mm:ss"),fareClass:(null===(_=g.journeyFareClass)||void 0===_?void 0:_.toUpperCase())||"",route:g.startCode+g.endCode,flightNumber:g.segments[0].flightNumber||"",sessionId:g.sessionId}})}},extraInfo:{agentId:a.agentId,notes:[],uuidAction:(null===(n=this.currentUserStorage)||void 0===n?void 0:n.userId)||""},securityCheck:!0,voucherCode:(null===(o=this._dataProvider.searchInputData.agentPromotion)||void 0===o?void 0:o.code)||""};return a.publicRemark&&p.extraInfo.notes.push({note:a.publicRemark,type:"public"}),a.secretRemark&&p.extraInfo.notes.push({note:a.secretRemark,type:"private"}),p}onPhoneChange(t){var n;let o=null===(n=t.target)||void 0===n?void 0:n.value;o=o.replace(" ",""),this.getFormControlInArray(this.formGroup,"phone").setValue(o),this.checkValidWhitelist()}checkValidWhitelist(){this.hasVJAirline&&this.checkPhoneRequired&&this.formGroup.controls.areaCode.valid&&this.formGroup.controls.phone.valid&&this._bookFlightService.checkValidWhitelist({phone:this.formGroup.value.phone,phoneArea:this.formGroup.value.areaCode||this.phoneAreaDefault}).pipe((0,Ie.b)(1e3)).subscribe({next:n=>{"OK"===n.status&&!n.data.phoneValid&&this.formGroup.get("phone").setErrors({blacklisted:!0})}})}onChangeAreaCode(t){this.formGroup.controls.phone.hasError("blacklisted")&&this.formGroup.get("phone").setErrors(null),this.checkValidWhitelist()}checkValid(t){Object.values(t.controls).forEach(n=>{n.invalid&&(n.markAsDirty(),n.updateValueAndValidity({onlySelf:!0}))})}onBookFlight(t=!1){var n,o;if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return this.checkScrollElement(),void((this.has1GProvider||this.hasFlyOneProvider||this.hasBZTProvider||this.hasSTProvider||this.hasHGProvider)&&this.checkPassportInvalid());if(t){const s={bookingCode:"",passengers:[...null===(n=this.getFormValue.adultPassenger)||void 0===n?void 0:n.map((r,p)=>{var g;const c=null===(g=this.getFormValue.infantPassenger)||void 0===g?void 0:g.find(_=>_.parentIndex==p);return{firstName:r.firstName,lastName:r.lastName,type:"ADT",child:c?{firstName:c.firstName,lastName:c.lastName,type:"INF"}:null}}),...null===(o=this.getFormValue.childPassenger)||void 0===o?void 0:o.map(r=>({firstName:r.firstName,lastName:r.lastName,type:"CHD"}))],segments:this.listTicketSelected.flatMap(r=>r.segments).map(r=>({flightNumber:`${r.airline}${r.flightNumber}`,startCode:r.startCode,endCode:r.endCode,route:`${r.startCode}${r.endCode}`,departDate:(0,h.p6)(new Date(r.departDate),"dMMM","en-US"),startTime:(0,h.p6)(new Date(r.departDate),"HH:mm","vi-VN"),endTime:(0,h.p6)(new Date(r.arrivalDate),"HH:mm","vi-VN")})),totalCharge:this.totalPriceCombo?this.totalPriceCombo:this.totalPrice};if(this._detectMobileService.isMobile()){const r=this._bottomSheetService.open(N._3,{headerTitle:"X\xe1c nh\u1eadn xu\u1ea5t v\xe9",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{issueDataConfirm:s}});r.containerInstance._rightButtonClick.subscribe(()=>{r.dismiss()}),r.afterDismissed().subscribe(p=>{p&&this.bookIssue(t)})}else this._modal.open(N._3,{issueDataConfirm:s}).afterClosed$.subscribe({next:p=>{p.data&&this.bookIssue(t)}})}else this.bookIssue(t)}bookIssue(t){if(this.bookFlightRequest=this.handleBookFlightData(),this.bookFlightRequest.data.payNow=t,this.bookFlightRequest.securityCheck=!t,this._bookingRequestDataProvider.bookingRequestData=this.bookFlightRequest,this.hasIVSProvider){const o={airlineTicket:this.listTicketSelected.some(a=>"IVS"!==a.provider)?this.bookFlightRequest:null,channel:X.h.B2B_GMBR,inventoryTicket:{bookingContact:{agentName:this.bookFlightRequest.data.bookingContact.name,email:this.bookFlightRequest.data.bookingContact.email,phone:this.bookFlightRequest.data.bookingContact.phone,phonePrefix:this.bookFlightRequest.data.bookingContact.phonePrefix},channel:X.h.B2B_GMBR,journeyPaymentRequest:this.listTicketSelected.filter(a=>"IVS"===a.provider).map(a=>({airline:a.airline,departureDate:E(a.startTime).format("YYYY-MM-DD"),departFullTime:E(a.startTime).format("YYYY-MM-DDTHH:mm:ss"),distributionFee:{adtFee:0,channel:X.h.B2B_GMBR,chdFee:0,infFee:0},endPoint:a.endCode,fareClass:a.journeyFareClass||"ECO",flightNumber:a.segments[0].flightNumber,startPoint:a.startCode,totalJourneyPayment:a.totalPrice})),ownerId:this.bookFlightRequest.extraInfo.agentId,passengerPaymentRequest:{adtCount:this.numberOfPassenger.adult,chdCount:this.numberOfPassenger.child,infCount:this.numberOfPassenger.infant,paxes:this.bookFlightRequest.data.bookingPassengers.map(a=>({birthday:a.info.birthday,defaultDocumentType:a.info.defaultDocumentType,documentInfo:a.info.documentInfo.map(s=>Object.assign(Object.assign({},s),{issuanceDate:s.expiryDate})),email:a.info.email,firstName:a.info.firstName,gender:a.info.gender,index:a.info.index,lastName:a.info.lastName,loyalInfo:a.info.loyalInfo,parentIndex:a.info.parentIndex,setDefaultDocument:a.info.setDefaultDocument,type:a.info.type}))}},totalPayment:this.totalPrice};return console.log(o),this.loading=!0,void this._ticketLowFareService.checkoutPaymentOrder(o).pipe((0,R.x)(()=>this.loading=!1)).subscribe({next:a=>{var s,r;if(console.log(a),"OK"===a.status&&a.data)this._router.navigate(["/admin/booking-success"]),this._bookingResultDataProvider.bookingResultData={data:a.data.journeyPaymentDetail.map(p=>({bookingResult:p.bookingDetail,error:null,status:"OK"})),paymentCode:a.data.paymentCode,objectError:null,status:"OK",success:!0},this._bookingResultDataProvider.hasIVSProvider=!0,this._toastService.add({severity:"warning",summary:"\u0110ang x\u1eed l\xfd",detail:"\u0110ang x\u1eed l\xfd \u0111\u1eb7t ch\u1ed7, vui l\xf2ng \u0111\u1ee3i trong gi\xe2y l\xe1t",sticky:!1});else{const p=((null===(r=null===(s=a.objectError)||void 0===s?void 0:s.errorDescription)||void 0===r?void 0:r.vi)||"C\xf3 l\u1ed7i x\u1ea3y ra")+", Vui l\xf2ng li\xean h\u1ec7 Booker \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3.";this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:p,sticky:!0})}},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra",sticky:!0})}})}this.onHandleBookFlight(t)}onHandleBookFlight(t){this.loading=!0,this.isProcessingTimeout=!1;const n=this._bookFlightService.bookFlight(this.bookFlightRequest).pipe((0,ce.b)(a=>this.handleBookingResult(a,t)),(0,Te.K)(a=>(a instanceof le.W?this.hanldeTimeoutIssue(t):this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra",sticky:!0}),Pe.E)),(0,R.x)(()=>{this.loading=!1,this.isProcessingTimeout=!1,this.refTimoutBts&&this.refTimoutBts.dismiss(),this.refTimoutModal&&this.refTimoutModal.close()}),(0,Ee.d)(1)),o=(0,Ae.H)(u.eW).pipe((0,de.R)(n),(0,ce.b)(()=>{this.loading=!1,this.isProcessingTimeout=!0,this.hanldeTimeoutIssue(t)}));(0,Se.T)(o,n).pipe((0,de.R)(this.destroy$)).subscribe()}rebookPriceChange(t,n){this.loading=!0,this._bookFlightService.reBookFlight(t).pipe((0,R.x)(()=>this.loading=!1)).subscribe({next:o=>{this.handleBookingResult(o,n)},error:o=>{o instanceof le.W?this.hanldeTimeoutIssue(n):this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra",sticky:!0})}})}handleBookingResult(t,n){var o,a,s,r,p,g;if("OK"===t.status){t.data=t.data.sort((P,A)=>P.bookingResult.journeys[0].leg-A.bookingResult.journeys[0].leg),this._bookingResultDataProvider.bookingResultData&&this._bookingResultDataProvider.bookingResultData.length?this._bookingResultDataProvider.bookingResultData.data.forEach(P=>{const A=t.data.find(J=>J.bookingResult.airline===P.bookingResult.airline);A&&(P=A)}):this._bookingResultDataProvider.bookingResultData=t,this._bookingResultDataProvider.firstBookingResult=!0;let c=!0;const _=[],v=[],m=[],y=[];let I=[],k=!1;t.data.forEach((P,A)=>{var J,w,M;const q=this._ticketSelectedDataProvider.ticketSelectedData[A];if("ERROR"===P.status)if(c=!1,_.push(q.flight),"DS-EL002"===P.error.errorCode){const G=P.error.errorData,ee={airline:G.airline,bookId:G.bookId,bookingCode:"",errorCode:(null===(J=P.error)||void 0===J?void 0:J.errorCode)||"",status:"ERROR",statusText:"Gi\xe1 thay \u0111\u1ed5i",startCode:q.startCode,startPoint:q.startPoint,endCode:q.endCode,endPoint:q.endPoint,priceInfo:{newPrice:G.priceInfo.newPrice,oldPrice:G.priceInfo.oldPrice},rebook:{sessionKey:G.rebook.sessionKey||""}};m.push(ee),y.push(ee),I=(null===(w=P.error.errorData.fareRules)||void 0===w?void 0:w.map((L,te)=>Object.assign(Object.assign({},L),{index:te})))||[]}else k=!0;else{const G={airline:P.bookingResult.airline,bookId:"",bookingCode:P.bookingResult.bookingCode,errorCode:(null===(M=P.error)||void 0===M?void 0:M.errorCode)||"",status:P.bookingResult.state,statusText:P.bookingResult.getStatusText(),startCode:q.startCode,startPoint:q.startPoint,endCode:q.endCode,endPoint:q.endPoint,priceInfo:null,rebook:null};y.push(G),v.push(q.flight)}});const F=t.data.some(P=>{var A;return(null===(A=P.error)||void 0===A?void 0:A.canRetry)||!1});if(F)this._modal.open(Z.xG,{isSuccess:!1,body:(null===(a=null===(o=t.objectError)||void 0===o?void 0:o.errorDescription)||void 0===a?void 0:a.vi)||"Vui l\xf2ng th\u1eed l\u1ea1i ho\u1eb7c li\xean h\u1ec7 booker \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3!",canRetry:F,okText:"Th\u1eed l\u1ea1i",cancelText:"\u0110\xf3ng"}).afterClosed$.subscribe({next:A=>{A.data?this.onBookFlight():this._router.navigate(["/admin/booking-success"])}});else if(!k&&t.data.some(P=>{var A;return"DS-EL002"===(null===(A=P.error)||void 0===A?void 0:A.errorCode)}))if(this._detectMobileService.isMobile()){const P=this._bottomSheetService.open(Z.IX,{headerTitle:"Th\xf4ng b\xe1o",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{listBookingResult:y,fareRulesChange:I,isPay:n}});P.containerInstance._rightButtonClick.subscribe(A=>P.dismiss()),P.afterDismissed().subscribe(A=>{if(A){const J={request:m.map(w=>{var M;return{airline:w.airline,bookId:w.bookId,rebook:{sessionKey:(null===(M=w.rebook)||void 0===M?void 0:M.sessionKey)||""}}})};this.rebookPriceChange(J,n)}})}else this._modal.open(Z.IX,{listBookingResult:y,fareRulesChange:I,isPay:n}).afterClosed$.subscribe({next:A=>{if(A.data){const J={request:m.map(w=>{var M;return{airline:w.airline,bookId:w.bookId,rebook:{sessionKey:(null===(M=w.rebook)||void 0===M?void 0:M.sessionKey)||""}}})};this.rebookPriceChange(J,n)}}});else this._modal.open(Z.xG,{isSuccess:c,title:n?"Xu\u1ea5t v\xe9 th\xe0nh c\xf4ng":"\u0110\u1eb7t ch\u1ed7 th\xe0nh c\xf4ng",body:n?"B\u1ea1n \u0111\xe3 xu\u1ea5t v\xe9 th\xe0nh c\xf4ng":"B\u1ea1n \u0111\xe3 \u0111\u1eb7t ch\u1ed7 th\xe0nh c\xf4ng",listFlight:c?v:_}).afterClosed$.subscribe({next:()=>{this._router.navigate(["/admin/booking-success"])}})}else"DS-EH001"===t.objectError.errorCode?this.hanldeTimeoutIssue(n):["SC-B001","SC-B002"].includes(t.objectError.errorCode)?this.securityCheck(t.objectError):["BE_EV104"].includes(t.objectError.errorCode)?this._modal.open(Z.xG,{isSuccess:!1,titleErrorCustom:"Xu\u1ea5t v\xe9 kh\u1ee9 h\u1ed3i s\xe1t gi\u1edd bay",body:(null===(r=null===(s=t.objectError)||void 0===s?void 0:s.errorDescription)||void 0===r?void 0:r.vi)||"Vui l\xf2ng th\u1eed l\u1ea1i ho\u1eb7c li\xean h\u1ec7 booker \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3!",cancelText:"\u0110\xf3ng"}):this._modal.open(Z.xG,{isSuccess:!1,body:(null===(g=null===(p=t.objectError)||void 0===p?void 0:p.errorDescription)||void 0===g?void 0:g.vi)||"Vui l\xf2ng th\u1eed l\u1ea1i ho\u1eb7c li\xean h\u1ec7 booker \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3!"})}onReselect(){this._router.navigate(["/admin/search-flight-result"])}loadTicketSelectedData(){this.listTicketSelected=this._ticketSelectedDataProvider.ticketSelectedData.map(t=>Object.assign(Object.assign({},t),{showSurchargeFare:!1,surcharge:0,bagCharge:0,seatCharge:0})),this.caculateTotalPrice()}caculateTotalPrice(){var t,n;this.totalPrice=this.listTicketSelected.map(o=>o.totalPrice).reduce((o,a)=>o+a),this.totalDiscountFareCharge=this.listTicketSelected.map(o=>o.totalDiscountFarePrice).reduce((o,a)=>o+a),this.totalPriceSource=this.totalPrice,this.totalPriceCombo=(null===(n=null===(t=this.listTicketSelected[0].comboRefs)||void 0===t?void 0:t.find(o=>o.key===this.listTicketSelected[1].fareOptionKey))||void 0===n?void 0:n.totalAllPaxPriceCombo)||0}onBlurInput(t,n,o){var a;const s=this.unicodeAndUppercase(t.target.value);null===(a=n.get(o))||void 0===a||a.setValue(s)}unicodeAndUppercase(t){return t=t.replace(/ +(?= )/g,""),(0,ye.E)(t.trim()).toUpperCase()}onAddBaggage(){var t;const n=this.getListPassengerAddOn(),o=this.listTicketSelected.filter(r=>!["VU","vu"].includes(r.airline));if(this.hasBaggageSelected)for(let r=0;r<n.length;r++)this.dataBaggageInput[r].passengerName=n[r].name;else this.dataBaggageInput=n.map((r,p)=>({passengerKey:p+"",passengerType:r.type,passengerName:r.name,addBaggageFee:0,journeys:o.map(g=>{const c=(0,h.p6)(g.startTime,"EEEE, dd/MM/yyyy","vi-VN"),_=E(g.startTime).toDate();return{airlineName:g.airline,flight:g.flight,flightNumber:"",airlineLogo:g.airlineLogo,journeyKey:g.journeyKey,journeyName:`D\u1ecbch v\u1ee5 b\u1ed5 sung ${g.startCode}-${g.endCode}, ${(0,h.p6)(_,"EEEE, ","vi-VN")} ${_.getDate()} th\xe1ng ${_.getMonth()+1}, ${_.getFullYear()}`,leg:g.leg,fareOptionKey:g.fareOptionKey,startCode:g.startCode,endCode:g.endCode,startTime:c,baggageOptions:[],baggageSelected:{baggageName:"",baggageKey:"",containerKey:"",totalCharge:0}}})}));const a={baggageRequest:null===(t=this.dataBaggageInput[0])||void 0===t?void 0:t.journeys.map(r=>({airline:r.airlineName,journeyKey:r.journeyKey,fareOptionKey:r.fareOptionKey}))},s=this.dataBaggageInput.map(r=>Object.assign(Object.assign({},r),{journeys:r.journeys.map(p=>Object.assign(Object.assign({},p),{baggageSelected:Object.assign({},p.baggageSelected)}))}));if(this._detectMobileService.isMobile()){const r=this._bottomSheetService.open(ae,{headerTitle:"Th\xeam h\xe0nh l\xfd",leftButtonIcon:"arrow_left",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",containerFullHeigh:!0,data:{dataBaggageInput:this.dataBaggageInput,addonBaggageReq:a,type:"get_baggage"}});r.containerInstance._leftButtonClick.subscribe(p=>r.dismiss()),r.afterDismissed().subscribe(p=>{var g;p?(this.dataBaggageInput=p,this.hasBaggageSelected=null===(g=this.dataBaggageInput)||void 0===g?void 0:g.some(c=>c.journeys.some(_=>_.baggageSelected.baggageKey)),this.calculationAddonBag()):this.dataBaggageInput=s})}else this._modal.open(ae,{dataBaggageInput:this.dataBaggageInput,addonBaggageReq:a,type:"get_baggage"}).afterClosed$.subscribe({next:p=>{var g;p.data?(this.dataBaggageInput=p.data,this.hasBaggageSelected=null===(g=this.dataBaggageInput)||void 0===g?void 0:g.some(c=>c.journeys.some(_=>_.baggageSelected.baggageKey)),this.calculationAddonBag()):this.dataBaggageInput=s}})}calculationAddonBag(){var t,n;const o=new Map;null===(n=null===(t=this.dataBaggageInput)||void 0===t?void 0:t.map(s=>s.journeys).flatMap(s=>s))||void 0===n||n.forEach(s=>{o.has(s.journeyKey)?o.get(s.journeyKey).push(s.baggageSelected.totalCharge):o.set(s.journeyKey,[s.baggageSelected.totalCharge])});for(const[s,r]of o.entries()){const p=r.reduce((c,_)=>c+_,0),g=this.listTicketSelected.find(c=>c.journeyKey===s);g&&(g.bagCharge=p)}const a=this.listTicketSelected.reduce((s,r)=>s+r.bagCharge+r.seatCharge,0);this.totalPrice=this.totalPriceSource+a}getListPassengerAddOn(){return this.proccessingPassengerInfo(!1).filter(n=>"infant"!==n.info.type).map(n=>{const o=n.info;return{name:`${o.lastName} ${o.firstName}`,key:o.index,type:o.type,includeInfant:o.includeInfant}})}checkAddOn(){var t,n;const o=this.getFormArray("adultPassenger"),a=this.getFormArray("childPassenger"),s=()=>o.controls.every(r=>r.controls.firstName.valid&&r.controls.lastName.valid)&&a.controls.every(r=>r.controls.firstName.valid&&r.controls.lastName.valid);null===(t=this.formGroup.get("adultPassenger"))||void 0===t||t.valueChanges.subscribe(()=>{this.isAddOn=s(),this.getAdultPassenger()}),null===(n=this.formGroup.get("childPassenger"))||void 0===n||n.valueChanges.subscribe(()=>{this.isAddOn=s()})}onAddOnSeat(){const t=this.getListPassengerAddOn(),n=this.listTicketSelected.filter(a=>{var s,r,p,g;return"vn".includes(null===(s=a.provider)||void 0===s?void 0:s.toLowerCase())?u.kp.vn:"vj".includes(null===(r=a.provider)||void 0===r?void 0:r.toLowerCase())?u.kp.vj:"qh".includes(null===(p=a.provider)||void 0===p?void 0:p.toLowerCase())?u.kp.qh:!"gds".includes(null===(g=a.provider)||void 0===g?void 0:g.toLowerCase())||u.kp.gds}).map(a=>({segments:a.segments.map(s=>Object.assign(Object.assign({},s),{journeyKey:a.journeyKey,leg:a.leg}))})).flatMap(a=>a.segments);this.hasSeatSelected?this.dataSeatInput.forEach((a,s)=>{a.active=0===s,a.passengers.forEach((r,p)=>{r.passengerName=t[p].name})}):this.dataSeatInput=n.map((a,s)=>{const r=E(a.departDate).toDate(),p=(0,h.p6)(r,"EEEE, dd/MM/yyyy","vi-VN"),g=`${(0,h.p6)(r,"EEEE, ","vi-VN")} ${r.getDate()} th\xe1ng ${r.getMonth()+1}, ${r.getFullYear()}`;return{airline:a.airline,flightNumber:a.flightNumber,modelAirplaneName:a.modelAirplaneName,bookingCode:a.modelAirplaneName,serviceName:`Th\xeam ch\u1ed7 ng\u1ed3i tr\xean chuy\u1ebfn bay ${a.startCode}-${a.endCode}, ${g}`,mobileServiceName:`${a.startCode}-${a.endCode}, ${g}`,airlineLogo:this._flightDataService.getAirlineLogoByCode(a.airline),jetCode:a.jetCode,startCode:a.startCode,endCode:a.endCode,departDate:p,active:0===s,passengers:t.map(c=>({passengerName:c.name,passengerType:c.type,passengerKey:c.key.toString(),includeInfant:c.includeInfant,addSeatFee:0,seatSelected:{containerKey:"",seat:"",seatKey:"",row:-1,col:"",totalPrice:0}})),segmentKey:a.segmentKey,segmentIndex:s,journeyKey:a.journeyKey,leg:a.leg,seatSegment:{rows:[],cols:[],containerKey:"",seatMaps:[]},available:!0}});const o={seatRequest:this.listTicketSelected.map(a=>({airline:a.airline,fareOptionKey:a.fareOptionKey,journeyKey:a.journeyKey}))};if(this._detectMobileService.isMobile()){const a=this._bottomSheetService.open(se,{headerTitle:"Th\xeam ch\u1ed7 ng\u1ed3i",leftButtonIcon:"arrow_left",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",containerFullHeigh:!0,data:{dataSeatInput:this.dataSeatInput,addonSeatReq:o,type:"get_seat"}});a.containerInstance._leftButtonClick.subscribe(s=>a.dismiss()),a.afterDismissed().subscribe(s=>{s&&(this.dataSeatInput=s,this.calculationAddonSeat())})}else this._modal.open(se,{dataSeatInput:this.dataSeatInput,addonSeatReq:o,type:"get_seat"}).afterClosed$.subscribe({next:s=>{s.data&&(this.dataSeatInput=s.data,this.calculationAddonSeat())}})}calculationAddonSeat(){const t=this.dataSeatInput.map(a=>({seatSelected:a.passengers.map(s=>s.seatSelected)})).flatMap(a=>a.seatSelected);this.hasSeatSelected=t.some(a=>a.seatKey);const n=new Map;this.dataSeatInput.forEach(a=>{const s=a.passengers.reduce((r,p)=>r+p.seatSelected.totalPrice,0);if(n.has(a.journeyKey)){const r=n.get(a.journeyKey);n.set(a.journeyKey,r+s)}else n.set(a.journeyKey,s)});for(const[a,s]of n.entries()){const r=this.listTicketSelected.find(p=>p.journeyKey===a);r&&(r.seatCharge=s)}const o=this.listTicketSelected.reduce((a,s)=>a+s.bagCharge+s.seatCharge,0);this.totalPrice=this.totalPriceSource+o}getBaggageBook(t,n){return this.dataBaggageInput.filter(o=>o.passengerType===t&&o.passengerKey===n+"").map(o=>({baggageSelected:o.journeys.map(a=>({baggageContainerKey:a.baggageSelected.containerKey,baggageKey:a.baggageSelected.baggageKey,journeyKey:a.journeyKey,leg:a.leg}))})).flatMap(o=>o.baggageSelected).filter(o=>o.baggageKey)}getSeatBook(t,n){return this.dataSeatInput.map(o=>({seatSelected:o.passengers.filter(a=>a.passengerType===t&&a.passengerKey===n+"").map(a=>({journeyKey:o.journeyKey,leg:o.leg,seatContainerKey:a.seatSelected.containerKey,seatKey:a.seatSelected.seatKey,segmentIndex:o.segmentIndex,segmentKey:o.segmentKey}))})).flatMap(o=>o.seatSelected).filter(o=>o.seatKey)}onKeydown(t){t.preventDefault(),t.stopPropagation()}quickParseInfo(){if(this._detectMobileService.isMobile()){const t=this._bottomSheetService.open(Z.i7,{headerTitle:"Nh\u1eadp nhanh th\xf4ng tin h\xe0nh kh\xe1ch",containerFullHeigh:!0,leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",data:{passengerText:this.passengerText,departureTime:this.departureTime,numberOfPassenger:this.numberOfPassenger}});t.containerInstance._leftButtonClick.subscribe(n=>t.dismiss()),t.afterDismissed().subscribe(n=>{n?this.processQuickParse(n.text,n.passengers,n.passengerInputRows):this._eventLogService.captureFastPaxInput({action:"cancel"})})}else this._modal.open(Z.i7,{passengerText:this.passengerText,departureTime:this.departureTime,numberOfPassenger:this.numberOfPassenger}).afterClosed$.subscribe({next:n=>{n.data?this.processQuickParse(n.data.text,n.data.passengers,n.data.passengerInputRows):this._eventLogService.captureFastPaxInput({action:"cancel"})}})}processQuickParse(t,n,o){this.passengerText=t;const a=n;a.forEach(c=>{c.firstName&&(c.firstName=this.unicodeAndUppercase(c.firstName)),c.lastName&&(c.lastName=this.unicodeAndUppercase(c.lastName)),c.parentName&&(c.parentName=this.unicodeAndUppercase(c.parentName))});const s=a.filter(c=>"ADULT"===c.type),r=a.filter(c=>"CHILD"===c.type),p=a.filter(c=>"INFANT"===c.type);this._eventLogService.captureFastPaxInput({action:"ok",numInput:o,numPass:a.length,numAdt:s.length,numChd:r.length,numInf:p.length});for(let c=0;c<this.formGroup.controls.adultPassenger.controls.length&&c<s.length;c++)this.formGroup.controls.adultPassenger.at(c).controls.lastName.setValue(s[c].lastName),this.formGroup.controls.adultPassenger.at(c).controls.firstName.setValue(s[c].firstName),this.formGroup.controls.adultPassenger.at(c).controls.gender.setValue(s[c].gender),this.formGroup.controls.adultPassenger.at(c).controls.birthday.setValue(s[c].birthday),(s[c].documentNumber&&!this.hasAirportInternational||this.hasAirportInternational&&s[c].documentType!==this.CF_IDENTIFY_TYPE.CCCD)&&this.formGroup.controls.adultPassenger.at(c).controls.documentType.setValue(s[c].documentType),s[c].documentType===this.CF_IDENTIFY_TYPE.CCCD?this.formGroup.controls.adultPassenger.at(c).controls.cccdNumber.setValue(s[c].documentNumber):s[c].documentType===this.CF_IDENTIFY_TYPE.PASSPORT?this.formGroup.controls.adultPassenger.at(c).controls.number.setValue(s[c].documentNumber):(this.formGroup.controls.adultPassenger.at(c).controls.cccdNumber.setValue(null),this.formGroup.controls.adultPassenger.at(c).controls.number.setValue(null)),this.formGroup.controls.adultPassenger.at(c).markAllAsTouched();this.getAdultPassenger();for(let c=0;c<this.formGroup.controls.childPassenger.controls.length&&c<r.length;c++)this.formGroup.controls.childPassenger.at(c).controls.lastName.setValue(r[c].lastName),this.formGroup.controls.childPassenger.at(c).controls.firstName.setValue(r[c].firstName),this.formGroup.controls.childPassenger.at(c).controls.gender.setValue(r[c].gender),this.formGroup.controls.childPassenger.at(c).controls.birthday.setValue(r[c].birthday),(r[c].documentNumber&&!this.hasAirportInternational||this.hasAirportInternational&&s[c].documentType!==this.CF_IDENTIFY_TYPE.CCCD)&&this.formGroup.controls.childPassenger.at(c).controls.documentType.setValue(r[c].documentType),r[c].documentType===this.CF_IDENTIFY_TYPE.CCCD?this.formGroup.controls.childPassenger.at(c).controls.cccdNumber.setValue(r[c].documentNumber):r[c].documentType===this.CF_IDENTIFY_TYPE.PASSPORT&&this.formGroup.controls.childPassenger.at(c).controls.number.setValue(r[c].documentNumber),this.formGroup.controls.childPassenger.at(c).markAllAsTouched();const g=[];for(let c=0;c<this.formGroup.controls.infantPassenger.controls.length&&c<p.length;c++){if(this.formGroup.controls.infantPassenger.at(c).controls.lastName.setValue(p[c].lastName),this.formGroup.controls.infantPassenger.at(c).controls.firstName.setValue(p[c].firstName),this.formGroup.controls.infantPassenger.at(c).controls.gender.setValue(p[c].gender),this.formGroup.controls.infantPassenger.at(c).controls.birthday.setValue(p[c].birthday),(p[c].documentNumber&&!this.hasAirportInternational||this.hasAirportInternational&&s[c].documentType!==this.CF_IDENTIFY_TYPE.CCCD)&&this.formGroup.controls.infantPassenger.at(c).controls.documentType.setValue(p[c].documentType),p[c].documentType===this.CF_IDENTIFY_TYPE.CCCD?this.formGroup.controls.infantPassenger.at(c).controls.cccdNumber.setValue(p[c].documentNumber):p[c].documentType===this.CF_IDENTIFY_TYPE.PASSPORT?this.formGroup.controls.infantPassenger.at(c).controls.number.setValue(p[c].documentNumber):(this.formGroup.controls.infantPassenger.at(c).controls.cccdNumber.setValue(null),this.formGroup.controls.infantPassenger.at(c).controls.number.setValue(null)),void 0!==p[c].parentName){const _=this.getParentIndex(p[c].parentName,g);void 0!==_&&(g.push(_),this.formGroup.controls.infantPassenger.at(c).controls.parentIndex.setValue(String(_)))}this.formGroup.controls.infantPassenger.at(c).markAllAsTouched()}for(let c=0;c<this.formGroup.controls.infantPassenger.controls.length;c++)if(!this.formGroup.controls.infantPassenger.at(c).controls.parentIndex.value)for(let _=0;_<this.formGroup.controls.adultPassenger.controls.length;_++)if(!g.includes(_)){this.formGroup.controls.infantPassenger.at(c).controls.parentIndex.setValue(String(_)),g.push(_);break}}getParentIndex(t,n){for(let o=0;o<this.formGroup.controls.adultPassenger.controls.length;o++)if(!n.includes(o)&&t===this.formGroup.controls.adultPassenger.at(o).controls.lastName.value+"/"+this.formGroup.controls.adultPassenger.at(o).controls.firstName.value)return o}onShowDetailInfo(t){const n=this.listTicketSelected[t],o={airline:n.airline,airlineName:n.airlineName,airlineLogo:n.airlineLogo,flightNumber:n.flight,journeyName:`Chuy\u1ebfn bay: ${n.startPoint} - ${n.endPoint}`,numOfStop:n.numOfStop,departureDate:E(n.startTime).format("HH:mm DD/MM/YYYY"),startPoint:n.startCode,startPointName:n.startPoint,endPoint:n.endCode,endPointName:n.endPoint,startTerminal:n.startTerminal,endTerminal:n.endTerminal,price:n.totalPrice,handBag:"Kh\xf4ng",segments:n.segments.map(a=>({airline:a.airline,airlineSystem:a.airline,airlineName:a.airlineName,airlineLogo:a.airlineLogo,mobileAirlineLogo:a.mobileAirlineLogo,flightNumber:a.airline+a.flightNumber,startTime:E(a.departDate).format("HH:mm"),startDate:E(a.departDate).format("DD/MM/YYYY"),startPoint:a.startCode,startPointName:a.startPoint,endTime:E(a.arrivalDate).format("HH:mm"),endDate:E(a.arrivalDate).format("DD/MM/YYYY"),endPoint:a.endCode,endPointName:a.endPoint,startTerminal:a.startTerminal,endTerminal:a.endTerminal,operating:a.operating,operatingName:a.operatingName,rules:[{name:"Th\u1eddi gian bay",value:a.duration},{name:"Lo\u1ea1i m\xe1y bay",value:a.modelAirplane},{name:"H\u1ea1ng ch\u1ed7",value:(a.fareType||"")+(a.fareClass?`(${a.fareClass})`:"N/A")},{name:"H\xe0nh l\xfd k\xfd g\u1eedi",value:a.checkedBag||n.checkedBag||"N/A"},{name:"H\xe0nh l\xfd x\xe1ch tay",value:a.handBag||n.handBag||"N/A"}],stopPoint:a.stopPoint})),ticketPrice:n.ticketPrice};if(this._detectMobileService.isMobile()){const a=this._bottomSheetService.open(Y._8,{headerTitle:"Th\xf4ng tin chuy\u1ebfn bay",containerFullHeigh:!0,rightButtonIconClass:"text-neutral-gray-4",data:{flightInfos:[o],isDisableFareRule:!0,hasDiscountFare:n.hasDiscountFare,showDiscountFare:n.showDiscountFare,hasAirportInternational:this.hasAirportInternational}});a.containerInstance._rightButtonClick.subscribe(s=>a.dismiss())}else this._modal.open(Y.Zk,{flightInfo:o,hasDiscountFare:n.hasDiscountFare})}onClearBaggage(){this._modal.open(N.V0,{title:"X\xe1c nh\u1eadn h\u1ee7y d\u1ecbch v\u1ee5 h\xe0nh l\xfd",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y d\u1ecbch v\u1ee5 h\xe0nh l\xfd k\xed g\u1eedi \u0111\xe3 th\xeam?",okText:"C\xf3, h\u1ee7y d\u1ecbch v\u1ee5",cancelText:"Kh\xf4ng"}).afterClosed$.subscribe({next:n=>{n.data&&(this.dataBaggageInput.forEach(o=>{o.journeys.forEach(a=>{a.baggageSelected={baggageName:"",baggageKey:"",containerKey:"",totalCharge:0}})}),this.hasBaggageSelected=!1,this.calculationAddonBag())}})}onClearSeat(){this._modal.open(N.V0,{title:"X\xe1c nh\u1eadn h\u1ee7y d\u1ecbch v\u1ee5 ch\u1ed7 ng\u1ed3i",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y d\u1ecbch v\u1ee5 ch\u1ed7 ng\u1ed3i \u0111\xe3 th\xeam?",okText:"C\xf3, h\u1ee7y d\u1ecbch v\u1ee5",cancelText:"Kh\xf4ng, v\u1eabn gi\u1eef"}).afterClosed$.subscribe({next:n=>{n.data&&(this.dataSeatInput.forEach(o=>{o.passengers.forEach(a=>{a.seatSelected={containerKey:"",seat:"",seatKey:"",totalPrice:0}})}),this.calculationAddonSeat())}})}showTotalCharge(){this.isHiddenTotalCharge=this.listTicketSelected.some(t=>t.isHiddenTotalCharge)}onShare(){const t=this.listTicketSelected.filter(n=>n.journeyKey);this._modal.open(Y.eP,{ticketsSelected:t,totalPrice:this.totalPrice,canEditHeader:this.canEditHeader,totalPriceCombo:this.totalPriceCombo,addonServiceCharge:t.reduce((n,o)=>n+(o.bagCharge+o.seatCharge),0),isHiddenTotalCharge:this.isHiddenTotalCharge})}onSelectAgent(t){var n,o;const a=this.agentInfo.find(s=>s.id===t.code);a&&((!this.hasVJAirline||this.hasVJAirline&&!this.checkPhoneRequired)&&(null===(n=this.formGroup.get("phone"))||void 0===n||n.setValue(a.phone)),null===(o=this.formGroup.get("email"))||void 0===o||o.setValue(a.email))}timeoutExpire(){const t=this._ticketSelectedDataProvider.ticketSelectedData.map(n=>n.expireTime).reduce((n,o)=>n<=o?n:o,Number.POSITIVE_INFINITY);t&&this._systemService.getCurrentTimeEpoch().subscribe({next:n=>{"OK"===n.status&&(this.expireTimer=setTimeout(()=>{this._modal.open(N.V0,{title:"C\xf3 l\u1ed7i x\u1ea3y ra",body:"Chuy\u1ebfn \u0111i b\u1ea1n \u0111\xe3 ch\u1ecdn c\xf3 th\u1ec3 kh\xf4ng c\xf2n n\u1eefa. B\u1eaft \u0111\u1ea7u m\u1ed9t t\xecm ki\u1ebfm m\u1edbi \u0111\u1ec3 l\u1ef1a ch\u1ecdn chuy\u1ebfn bay ph\xf9 h\u1ee3p h\u01a1n.",hasCancel:!1}).afterClosed$.subscribe({next:()=>{var a,s;this.onReselect(),null===(a=this._modal)||void 0===a||a.closeAllModals(),null===(s=this._bottomSheetService)||void 0===s||s.closeAll()}})},1e3*(t-n.data.timeStamp)))}})}checkScrollElement(){let t=!1;this.adultElements.forEach((n,o)=>{t||this.getFormArray("adultPassenger").at(o).invalid&&(t=!0,n.nativeElement.scrollIntoView({behavior:"smooth"}))}),!t&&(this.childElements.forEach((n,o)=>{t||this.getFormArray("childPassenger").at(o).invalid&&(t=!0,n.nativeElement.scrollIntoView({behavior:"smooth"}))}),!t&&(this.infantElements.forEach((n,o)=>{t||this.getFormArray("infantPassenger").at(o).invalid&&(t=!0,n.nativeElement.scrollIntoView({behavior:"smooth"}))}),!t&&this.controlElements.forEach(n=>{t||this.formGroup.get(n.nativeElement.dataset.id).invalid&&(t=!0,n.nativeElement.scrollIntoView({behavior:"smooth"}))})))}checkPassportInvalid(){let t=!1;const n=()=>{this._toastService.add({severity:"error",summary:"Th\xf4ng b\xe1o",detail:"C\u1ea7n nh\u1eadp h\u1ed9 chi\u1ebfu khi \u0111\u1eb7t v\xe9 GDS, 1G, LCC. L\u01b0u \xfd nh\u1eadp ch\xednh x\xe1c \u0111\u1ec3 tr\xe1nh s\u1ef1 c\u1ed1 khi bay!",sticky:!0,life:5e3})};this.adultElements.forEach((o,a)=>{if(!t){const s=this.getFormArray("adultPassenger").at(a);(s.controls.number.invalid||s.controls.nationality.invalid||s.controls.issuanceCountry.invalid||s.controls.expiryDate.invalid)&&(t=!0,o.nativeElement.scrollIntoView({behavior:"smooth"}))}}),t?n():(this.childElements.forEach((o,a)=>{if(!t){const s=this.getFormArray("childPassenger").at(a);(s.controls.number.invalid||s.controls.nationality.invalid||s.controls.issuanceCountry.invalid||s.controls.expiryDate.invalid)&&(t=!0,o.nativeElement.scrollIntoView({behavior:"smooth"}))}}),t?n():(this.infantElements.forEach((o,a)=>{if(!t){const s=this.getFormArray("infantPassenger").at(a);(s.controls.number.invalid||s.controls.nationality.invalid||s.controls.issuanceCountry.invalid||s.controls.expiryDate.invalid)&&(t=!0,o.nativeElement.scrollIntoView({behavior:"smooth"}))}}),t&&n()))}hanldeTimeoutIssue(t){this._detectMobileService.isMobile()?(this.refTimoutBts=this._bottomSheetService.open(N.NK,{headerTitle:"",leftButtonIcon:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",containerFullHeigh:!1,data:{title:t?"\u0110ang x\u1eed l\xfd xu\u1ea5t v\xe9":"\u0110ang x\u1eed l\xfd \u0111\u1eb7t ch\u1ed7",body:"Qu\xfd \u0111\u1ea1i l\xfd vui l\xf2ng \u0111\u1ee3i trong gi\xe2y l\xe1t ho\u1eb7c ch\u1ee7 \u0111\u1ed9ng theo d\xf5i tr\u1ea1ng th\xe1i v\xe9 \u1edf m\u1ee5c Qu\u1ea3n l\xfd \u0111\u1eb7t ch\u1ed7",cancelText:"\u0110\xf3ng",okText:"M\u1edf qu\u1ea3n l\xfd \u0111\u1eb7t ch\u1ed7"}}),this.refTimoutBts.containerInstance._leftButtonClick.subscribe(n=>this.refTimoutBts.dismiss()),this.refTimoutBts.afterDismissed().subscribe({next:n=>{n&&this._router.navigate(["admin/manage-booking"])}})):(this.refTimoutModal=this._modal.open(N.NK,{title:t?"\u0110ang x\u1eed l\xfd xu\u1ea5t v\xe9":"\u0110ang x\u1eed l\xfd \u0111\u1eb7t ch\u1ed7",body:"Qu\xfd \u0111\u1ea1i l\xfd vui l\xf2ng \u0111\u1ee3i trong gi\xe2y l\xe1t ho\u1eb7c ch\u1ee7 \u0111\u1ed9ng theo d\xf5i tr\u1ea1ng th\xe1i v\xe9 \u1edf m\u1ee5c Qu\u1ea3n l\xfd \u0111\u1eb7t ch\u1ed7",cancelText:"\u0110\xf3ng",okText:"M\u1edf qu\u1ea3n l\xfd \u0111\u1eb7t ch\u1ed7"}),this.refTimoutModal.afterClosed$.subscribe({next:n=>{n.data&&this._router.navigate(["admin/manage-booking"])}}))}securityCheck(t){var n,o;let a=[];switch(t.errorCode){case"SC-B001":if(a=t.errorData.map(s=>s.passenger),t.securityCheck)if(this._detectMobileService.isMobile()){const s=this._bottomSheetService.open(Z.sR,{headerTitle:"Th\xf4ng b\xe1o",leftButtonIcon:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"",body:`Kh\xf4ng \u0111\u01b0\u1ee3c gi\u1eef ch\u1ed7 c\xf9ng l\xfac nh\u1eefng kh\xe1ch sau qu\xe1 ${(null===(n=t.errorData[0])||void 0===n?void 0:n.rebookCount)||"x"} l\u1ea7n tr\xean chuy\u1ebfn bay n\xe0y. Vui l\xf2ng xu\u1ea5t v\xe9 ho\u1eb7c ch\u1ecdn chuy\u1ebfn bay kh\xe1c:`,listPax:a,okText:"Xem quy \u0111\u1ecbnh",cancelText:"\u0110\xf3ng"}});s.containerInstance._rightButtonClick.subscribe(r=>s.dismiss()),s.afterDismissed().subscribe(r=>{r&&window.open(u.iw)})}else this._modal.open(Z.sR,{title:"Th\xf4ng b\xe1o",body:`Kh\xf4ng \u0111\u01b0\u1ee3c gi\u1eef ch\u1ed7 c\xf9ng l\xfac nh\u1eefng kh\xe1ch sau qu\xe1 ${(null===(o=t.errorData[0])||void 0===o?void 0:o.rebookCount)||"x"} l\u1ea7n tr\xean chuy\u1ebfn bay n\xe0y. Vui l\xf2ng xu\u1ea5t v\xe9 ho\u1eb7c ch\u1ecdn chuy\u1ebfn bay kh\xe1c:`,listPax:a,okText:"Xem quy \u0111\u1ecbnh",cancelText:"\u0110\xf3ng"}).afterClosed$.subscribe({next:r=>{r.data&&window.open(u.iw)}});else if(this._detectMobileService.isMobile()){const s=this._bottomSheetService.open(Z.sR,{headerTitle:"Th\xf4ng b\xe1o",leftButtonIcon:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"",body:"N\u1ebfu ti\u1ebfp t\u1ee5c s\u1ebd vi ph\u1ea1m rule Gi\u1eef ch\u1ed7 tr\xf9ng t\xean nhi\u1ec1u l\u1ea7n c\xe1c kh\xe1ch sau:",listPax:a,okText:"Ti\u1ebfp t\u1ee5c",cancelText:"\u0110\xf3ng"}});s.containerInstance._rightButtonClick.subscribe(r=>s.dismiss()),s.afterDismissed().subscribe(r=>{r&&(this.bookFlightRequest.securityCheck=!1,this.onHandleBookFlight(this.bookFlightRequest.data.payNow))})}else this._modal.open(Z.sR,{title:"Th\xf4ng b\xe1o",body:"N\u1ebfu ti\u1ebfp t\u1ee5c s\u1ebd vi ph\u1ea1m rule Gi\u1eef ch\u1ed7 tr\xf9ng t\xean nhi\u1ec1u l\u1ea7n c\xe1c kh\xe1ch sau:",listPax:a,okText:"Ti\u1ebfp t\u1ee5c",cancelText:"\u0110\xf3ng"}).afterClosed$.subscribe({next:r=>{r.data&&(this.bookFlightRequest.securityCheck=!1,this.onHandleBookFlight(this.bookFlightRequest.data.payNow))}});break;case"SC-B002":if(a=t.errorData.listPassenger,t.securityCheck)if(this._detectMobileService.isMobile()){const s=this._bottomSheetService.open(Z.sR,{headerTitle:"Th\xf4ng b\xe1o",leftButtonIcon:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"",body:`Kh\xf4ng th\u1ec3 \u0111\u1eb7t l\u1ea1i c\xe1c v\xe9 \u0111\xe3 h\u1ebft h\u1ea1n gi\u1eef ch\u1ed7 cho c\xe1c kh\xe1ch sau qu\xe1 ${t.errorData.rebookCount} l\u1ea7n tr\xean chuy\u1ebfn bay n\xe0y. Vui l\xf2ng ch\u1ecdn chuy\u1ebfn bay kh\xe1c:`,listPax:a,okText:"Xem quy \u0111\u1ecbnh",cancelText:"\u0110\xf3ng"}});s.containerInstance._rightButtonClick.subscribe(r=>s.dismiss()),s.afterDismissed().subscribe(r=>{r&&window.open(u.iw)})}else this._modal.open(Z.sR,{title:"Th\xf4ng b\xe1o",body:`Kh\xf4ng th\u1ec3 \u0111\u1eb7t l\u1ea1i c\xe1c v\xe9 \u0111\xe3 h\u1ebft h\u1ea1n gi\u1eef ch\u1ed7 cho c\xe1c kh\xe1ch sau qu\xe1 ${t.errorData.rebookCount} l\u1ea7n tr\xean chuy\u1ebfn bay n\xe0y. Vui l\xf2ng ch\u1ecdn chuy\u1ebfn bay kh\xe1c:`,listPax:a,okText:"Xem quy \u0111\u1ecbnh",cancelText:"\u0110\xf3ng"}).afterClosed$.subscribe({next:r=>{r.data&&window.open(u.iw)}});else if(this._detectMobileService.isMobile()){const s=this._bottomSheetService.open(Z.sR,{headerTitle:"Th\xf4ng b\xe1o",leftButtonIcon:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"",body:"N\u1ebfu ti\u1ebfp t\u1ee5c s\u1ebd vi ph\u1ea1m rule Rebooking nh\u1eefng kh\xe1ch sau:",listPax:a,okText:"Ti\u1ebfp t\u1ee5c",cancelText:"\u0110\xf3ng"}});s.containerInstance._rightButtonClick.subscribe(r=>s.dismiss()),s.afterDismissed().subscribe(r=>{r&&(this.bookFlightRequest.securityCheck=!1,this.onHandleBookFlight(this.bookFlightRequest.data.payNow))})}else this._modal.open(Z.sR,{title:"Th\xf4ng b\xe1o",body:"N\u1ebfu ti\u1ebfp t\u1ee5c s\u1ebd vi ph\u1ea1m rule Rebooking nh\u1eefng kh\xe1ch sau:",listPax:a,okText:"Ti\u1ebfp t\u1ee5c",cancelText:"\u0110\xf3ng"}).afterClosed$.subscribe({next:r=>{r.data&&(this.bookFlightRequest.securityCheck=!1,this.onHandleBookFlight(this.bookFlightRequest.data.payNow))}})}}onIdentityChange(t,n){t===u.FV.PASSPORT?(["issuanceDate","expiryDate","issuanceCountry","nationality","number"].forEach(o=>{var a,s,r,p;"number"===o?(null===(a=n.get(o))||void 0===a||a.setValidators([d.kI.required,d.kI.maxLength(9)]),null===(s=n.get(o))||void 0===s||s.updateValueAndValidity()):(null===(r=n.get(o))||void 0===r||r.setValidators([d.kI.required]),null===(p=n.get(o))||void 0===p||p.updateValueAndValidity())}),["cccdNumber"].forEach(o=>{var a,s;null===(a=n.get(o))||void 0===a||a.setValidators(null),null===(s=n.get(o))||void 0===s||s.updateValueAndValidity()})):t===u.FV.CCCD?(["cccdNumber"].forEach(o=>{var a,s;null===(a=n.get(o))||void 0===a||a.setValidators([d.kI.required,d.kI.minLength(9),d.kI.maxLength(12)]),null===(s=n.get(o))||void 0===s||s.updateValueAndValidity()}),["issuanceDate","expiryDate","issuanceCountry","nationality","number"].forEach(o=>{var a,s;null===(a=n.get(o))||void 0===a||a.setValidators(null),null===(s=n.get(o))||void 0===s||s.updateValueAndValidity()})):["issuanceDate","expiryDate","issuanceCountry","nationality","number","cccdNumber"].forEach(o=>{var a,s;null===(a=n.get(o))||void 0===a||a.setValidators(null),null===(s=n.get(o))||void 0===s||s.updateValueAndValidity()})}onFilesSelected(t,n){const o=t.target;if(o.files&&o.files.length>0){const a=o.files,s=new FormData;Array.from(a).forEach((r,p)=>{p<this.numberOfPaxUpload&&s.append("files",r)}),this.isExtractingDocument=!0,this._aiService.extractDocument(s).pipe((0,R.x)(()=>{o.value="",this.isExtractingDocument=!1})).subscribe({next:r=>{var p;try{if(n){if(this.hasAirportInternational&&(null===(p=r[0].type)||void 0===p?void 0:p.toUpperCase())===u.FV.CCCD||this.checkAgeRange(r[0].birthday,this.departureTime)!==n.value.type)throw{code:"FE-TYPEPAX",discription:"File kh\xf4ng h\u1ee3p l\u1ec7 v\u1edbi lo\u1ea1i h\xe0nh kh\xe1ch"};this.convertDocument(r[0],n)}else this.convertListDocument(r);this._toastService.add({severity:"success",summary:"Tr\xedch xu\u1ea5t th\xe0nh c\xf4ng",detail:"Th\xf4ng tin h\xe0nh kh\xe1ch v\u1eeba \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt. Vui l\xf2ng ki\u1ec3m tra v\xe0 \u0111\u1ed1i chi\u1ebfu l\u1ea1i!",sticky:!1,life:5e3})}catch(g){this._toastService.add({severity:"error",summary:"Tr\xedch xu\u1ea5t th\u1ea5t b\u1ea1i",detail:g&&"FE-TYPEPAX"===g.code?g.discription:"C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i sau!",sticky:!0})}},error:()=>{this._toastService.add({severity:"error",summary:"Tr\xedch xu\u1ea5t th\u1ea5t b\u1ea1i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i sau!",sticky:!0})}})}}convertDocument(t,n){var o,a,s,r,p,g,c,_,v,m,y;n.patchValue({firstName:t.first_name?this.unicodeAndUppercase(t.first_name):"",lastName:t.last_name?this.unicodeAndUppercase(t.last_name):"",gender:(null==t?void 0:t.sex)||"",birthday:t.birthday?new Date(t.birthday):null,issuanceDate:(null===(o=t.type)||void 0===o?void 0:o.toUpperCase())===u.FV.PASSPORT&&t.date_of_issue?new Date(t.date_of_issue):null,expiryDate:(null===(a=t.type)||void 0===a?void 0:a.toUpperCase())===u.FV.PASSPORT&&t.date_of_expiry?new Date(t.date_of_expiry):null,issuanceCountry:(null===(s=t.type)||void 0===s?void 0:s.toUpperCase())===u.FV.PASSPORT?this._locationDataService.convertCountryCodeAlpha3ToAlpha2(t.issuing_country_code):"",nationality:(null===(r=t.type)||void 0===r?void 0:r.toUpperCase())===u.FV.PASSPORT?this._locationDataService.convertCountryCodeAlpha3ToAlpha2(t.nationality_code):"",number:(null===(p=t.type)||void 0===p?void 0:p.toUpperCase())===u.FV.PASSPORT?t.no:"",cccdNumber:(null===(g=t.type)||void 0===g?void 0:g.toUpperCase())===u.FV.CCCD?t.no:"",documentType:null===(c=t.type)||void 0===c?void 0:c.toUpperCase()}),(null===(_=t.type)||void 0===_?void 0:_.toUpperCase())===u.FV.PASSPORT&&(null===(v=n.get("cccdNumber"))||void 0===v||v.setValidators(null),null===(m=n.get("cccdNumber"))||void 0===m||m.updateValueAndValidity()),(null===(y=t.type)||void 0===y?void 0:y.toUpperCase())===u.FV.CCCD&&["issuanceDate","expiryDate","issuanceCountry","nationality","number"].forEach(I=>{var k,F;null===(k=n.get(I))||void 0===k||k.setValidators(null),null===(F=n.get(I))||void 0===F||F.updateValueAndValidity()})}convertListDocument(t){var n,o,a,s,r,p;const g=[],c=[],_=[];t.filter(v=>v).forEach(v=>{var m,y;"ADT"===this.checkAgeRange(v.birthday,this.departureTime)&&g.push(v),"CHD"===this.checkAgeRange(v.birthday,this.departureTime)&&(this.hasAirportInternational&&(null===(m=v.type)||void 0===m||m.toUpperCase()),c.push(v)),"INF"===this.checkAgeRange(v.birthday,this.departureTime)&&(this.hasAirportInternational&&(null===(y=v.type)||void 0===y||y.toUpperCase()),_.push(v))}),null===(o=null===(n=this.getFormArray("adultPassenger"))||void 0===n?void 0:n.controls)||void 0===o||o.forEach((v,m)=>{const y=g[m];y&&this.convertDocument(y,v)}),null===(s=null===(a=this.getFormArray("childPassenger"))||void 0===a?void 0:a.controls)||void 0===s||s.forEach((v,m)=>{const y=c[m];y&&this.convertDocument(y,v)}),null===(p=null===(r=this.getFormArray("infantPassenger"))||void 0===r?void 0:r.controls)||void 0===p||p.forEach((v,m)=>{const y=_[m];y&&this.convertDocument(y,v)})}checkAgeRange(t,n){const o=E(t),s=E(n).diff(o,"years");return s<2?"INF":s>=2&&s<=12?"CHD":"ADT"}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),clearTimeout(this.expireTimer),this._modal.closeAllModals()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.qu),e.Y36(ct.R),e.Y36(ut._),e.Y36(ie.Fj),e.Y36(he.h),e.Y36(pt.F0),e.Y36($.jH),e.Y36(lt.m),e.Y36(dt.J),e.Y36(T.KNP),e.Y36(W.oE),e.Y36(_e.G),e.Y36(gt.l),e.Y36(e.sBO),e.Y36(ht.KD),e.Y36(V.$A),e.Y36(_t.x),e.Y36(j.BX),e.Y36(oe.L),e.Y36(C.a2),e.Y36(ft.o),e.Y36(mt.$),e.Y36(vt.Y),e.Y36(Ct.s))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-passenger-info-page"]],viewQuery:function(t,n){if(1&t&&(e.Gf(yt,5),e.Gf(xt,5),e.Gf(bt,5),e.Gf(It,5),e.Gf(Tt,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.parentSelectInfants=o),e.iGM(o=e.CRH())&&(n.adultElements=o),e.iGM(o=e.CRH())&&(n.childElements=o),e.iGM(o=e.CRH())&&(n.infantElements=o),e.iGM(o=e.CRH())&&(n.controlElements=o)}},hostAttrs:[1,"h-auto"],standalone:!0,features:[e.jDz],decls:105,vars:39,consts:[[1,"pt-4","px-4","items-center","gap-x-1.5","w-full","hidden","md:flex",3,"click"],["icon","arrow_left","size","small"],[1,"text-body-md-short"],[1,"w-full","h-full","flex","gap-x-4","justify-center","p-4"],[1,"w-[764px]"],[3,"formGroup"],[1,"mb-8","md:mb-[1px]"],[1,"flex","justify-between","items-center","mb-4","md:bg-neutral-white","md:py-4","md:pr-3","md:mb-0"],[1,"flex","gap-x-[20px]"],[1,"w-1","bg-primary-2-4"],[1,"md:text-heading-sm","md:text-neutral-gray-6"],[1,"flex","items-center","gap-x-2"],["class","md:hidden",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"bg-white","flex","gap-x-2","md:hidden",3,"click","keydown"],["icon","grouping","size","small"],[1,"items-center","gap-x-0.5","hidden","md:flex",3,"click"],[1,"text-body-md"],["class","hidden md:flex mt-4",4,"ngIf"],[1,"py-3","px-4","bg-functional-1-1","flex","gap-x-2","mb-4","rounded","md:mt-4"],["icon","info","size","small",1,"text-functional-1-3"],[1,"text-express-md"],[1,"flex","flex-col","gap-2","md:gap-[1px]"],[4,"ngFor","ngForOf"],["class","mb-8 md:mb-[1px]",4,"ngIf"],["class","mb-6 md:mb-[1px]",4,"ngIf"],[1,"p-6","bg-white","rounded","shadow-cf-md"],[1,"grid","grid-cols-3","gap-4","md:grid-cols-2"],["data-id","areaCode",1,"md:start"],["controlElement",""],["textField","name","valueField","code","placeholder","Ch\u1ecdn m\xe3 v\xf9ng",3,"status","data","allowSearch","formControl","selectedChange"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],[3,"CfRequired"],["cfHint","",3,"hint",4,"ngIf"],["data-id","phone",1,""],[1,"grow-[400]","!w-full",3,"tooltipContent","status"],["cf-input","","size","medium","autocomplete","off","placeholder","Nh\u1eadp \u0111i\u1ec7n tho\u1ea1i","formControlName","phone","CfNumberic","",3,"formControl","input"],["data-id","email",1,"md:col-span-2"],[1,"grow-[400]","!w-full",3,"status"],["cf-input","","size","medium","autocomplete","off","placeholder","Nh\u1eadp email","formControlName","email",3,"formControl"],[1,"mb-8","md:mb-[1px]","md:block","hidden"],[1,"bg-white","rounded","shadow-cf-md"],[1,"bg-neutral-white"],[3,"showReselect","ticketsSelected","showDetail"],["class","flex justify-between items-center py-3 px-4",4,"ngIf"],["class","h-[343px]",4,"ngIf"],[1,"mt-[56px]","w-[302px]","rounded","h-fit","md:hidden","sticky","top-0"],[1,"flex","justify-between","items-center","py-3","px-4"],[1,"text-espressive-sm","text-neutral-black"],["icon","share","size","small",1,"cursor-pointer",3,"click"],[1,"sticky","bottom-0","rounded","shadow-cf-md"],[1,"flex","justify-between","items-center","bg-white","px-6","py-3"],[1,"md:hidden"],["cf-button","","size","medium","type","secondary",1,"whitespace-nowrap",3,"click"],["icon","arrow_left","size","small",1,"mr-2.5"],[1,"flex","gap-x-4","md:w-full"],["cf-button","","size","medium","color","primary-1","type","secondary","class","whitespace-nowrap w-[200px] md:w-full justify-center",3,"disabled","click",4,"ngIf"],["cf-button","","size","medium","color","primary-1","class","whitespace-nowrap w-[200px] md:w-full justify-center",3,"disabled","click",4,"ngIf"],[4,"ngIf"],["type","file","multiple","","accept","image/png, image/jpeg, image/jpg",1,"hidden",3,"change"],["multifileInput",""],["cf-button","","size","medium","type","secondary",1,"bg-white","flex","gap-x-2","md:hidden",3,"click"],[1,"hidden","md:flex","mt-4"],["cf-button","","size","medium","type","secondary",1,"w-full","justify-center","bg-white","flex","gap-x-2",3,"click"],["adultElement",""],[1,"w-full","hidden","md:block"],["contentClass","bg-neutral-white p-4 pt-0",3,"title","active"],["titleTemplate",""],[3,"ngTemplateOutlet"],[1,"p-6","bg-white","rounded","shadow-cf-md","md:hidden"],["adultPax",""],["class","text-heading-xs text-neutral-gray-6",4,"ngIf"],[1,"text-heading-xs","text-neutral-gray-6"],[1,"flex","justify-between","items-center","mb-4"],[1,""],["class","text-heading-xs text-black md:hidden",4,"ngIf"],[1,"flex","flex-col","gap-y-4"],[1,"grid","grid-cols-3","gap-4","md:grid-cols-1"],["textField","name","valueField","code","placeholder","Ch\u1ecdn gi\u1edbi t\xednh",1,"md:w-full","md:max-w-none",3,"status","data","allowSearch","formControl"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5",3,"CfRequired"],["cf-input","","size","medium","autocomplete","off","placeholder","Nh\u1eadp h\u1ecd","type","text",3,"formControl","blur"],["cf-input","","size","medium","autocomplete","off","placeholder","Nh\u1eadp t\xean \u0111\u1ec7m v\xe0 t\xean",3,"formControl","blur"],["cfHeadIcon","","icon","calendar","size","small"],[1,"text-neutral-gray-4","text-espressive-sm"],["autocomplete","off","cfDatepicker","","type","text","size","medium","cf-input","","placeholder","Nh\u1eadp ng\xe0y sinh",1,"py-[7px]",3,"secondaryCalendar","displayMonths","formControl","input","dateSelect"],["dateFrom","cfDatepicker"],["class","border-t border-neutral-gray-1 mt-4",4,"ngIf"],[1,"w-full","border","border-neutral-gray-1"],[3,"title","active"],[1,"flex","gap-x-4"],[1,"grow-[400]","!w-full"],["cf-input","","size","medium","autocomplete","off","placeholder","Nh\u1eadp th\u1ebb h\xe0nh kh\xe1ch th\u01b0\u1eddng xuy\xean",3,"formControl"],[1,"text-heading-xs","text-black","md:hidden"],["type","file","accept","image/png, image/jpeg, image/jpg",1,"hidden",3,"change"],["fileInput",""],["cf-button","","size","medium","type","secondary",1,"bg-white","flex","gap-x-2",3,"click"],["cfHint","",3,"hint"],[1,"border-t","border-neutral-gray-1","mt-4"],[1,"flex","flex-col","gap-y-1.5","pt-4"],["cfLabel","",1,"text-espressive-sm","text-black",3,"CfRequired"],[1,"flex","items-center","gap-x-8",3,"formControl","checkChange"],["size","medium",3,"disabled","value"],["size","medium",3,"value"],["class","grid grid-cols-2 gap-4 md:grid-cols-1",4,"ngIf"],["class","text-body-sm",4,"ngIf"],["cf-input","","size","medium","autocomplete","off","CfNumberic","","placeholder","Nh\u1eadp s\u1ed1 c\u0103n c\u01b0\u1edbc c\xf4ng d\xe2n",3,"formControl"],[1,"grid","grid-cols-2","gap-4","md:grid-cols-1"],["cf-input","","size","medium","autocomplete","off","CfAlphanumeric","","CfRemoveAccents","","placeholder","Nh\u1eadp s\u1ed1 h\u1ed9 chi\u1ebfu","type","text",3,"formControl"],["textField","name","valueField","code","placeholder","Ch\u1ecdn qu\u1ed1c t\u1ecbch",1,"md:w-full","md:max-w-none","!max-w-full",3,"status","data","allowSearch","formControl"],["textField","name","valueField","code","placeholder","Ch\u1ecdn n\u01a1i c\u1ea5p",1,"md:w-full","md:max-w-none","!max-w-full",3,"data","status","allowSearch","formControl"],["autocomplete","off","cfDatepicker","","type","text","size","medium","cf-input","","placeholder","Nh\u1eadp ng\xe0y c\u1ea5p",1,"py-[7px]",3,"secondaryCalendar","displayMonths","maxDate","formControl","input","dateSelect"],["issuanceDatepicker","cfDatepicker"],["autocomplete","off","cfDatepicker","","type","text","size","medium","cf-input","","placeholder","Nh\u1eadp ng\xe0y h\u1ebft h\u1ea1n",1,"py-[7px]",3,"secondaryCalendar","displayMonths","minDate","formControl","input","dateSelect"],["expiryDatepicker","cfDatepicker"],[1,"text-body-sm","mt-1.5"],[1,"text-body-sm"],[1,"text-body-md","flex","gap-x-2","items-center"],["icon","document","size","small"],["childElement",""],["childPax",""],["class","mb-4 text-heading-xs text-black md:hidden",4,"ngIf"],["cf-input","","size","medium","autocomplete","off","placeholder","Nh\u1eadp h\u1ecd",3,"formControl","blur"],["autocomplete","off","cf-input","","size","medium","placeholder","Nh\u1eadp th\u1ebb h\xe0nh kh\xe1ch th\u01b0\u1eddng xuy\xean",3,"formControl"],[1,"mb-4","text-heading-xs","text-black","md:hidden"],["infantElement",""],["infantPax",""],["autocomplete","off","cfDatepicker","","type","text","size","medium","cf-input","","placeholder","Nh\u1eadp ng\xe0y sinh",1,"py-[7px]",3,"secondaryCalendar","displayMonths","maxDate","formControl","input","dateSelect"],["textField","name","valueField","code","placeholder","Ch\u1ecdn h\xe0nh kh\xe1ch",1,"md:w-full","md:max-w-none",3,"status","data","allowSearch","formControl"],["parentSelectInfant",""],[1,"flex","flex-col","gap-y-2","md:gap-0"],[1,"px-6","py-2.5","bg-white","rounded","shadow-cf-md","flex","justify-between","items-center"],[1,"flex","gap-x-3","items-center"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9.54545 14.5504H4.15508M14.4545 14.5504H19.8M14.4545 14.5504V12.6H9.54545V16.2H14.4545V14.5504ZM4.15508 14.5504H3V6.05039H14.5508M4.15508 14.5504V21H19.8V14.5504M19.8 14.5504H21V6.05039H14.5508M9.35294 6V3H14.5508V6.05039","stroke","#2C2C2C","stroke-width","1.5","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],[1,"flex-auto","w-full"],[1,"text-body-lg","text-neutral-black"],["class","text-espressive-sm text-neutral-gray-4",4,"ngIf"],["class","text-espressive-sm text-secondary-5-3",4,"ngIf"],[1,"flex","gap-x-3"],["cf-button","","size","small","type","secondary","class","!text-body-md md:p-2",3,"click",4,"ngIf"],["class","px-6 py-2.5 bg-white rounded shadow-cf-md flex justify-between items-center",4,"ngIf"],[1,"text-espressive-sm","text-neutral-gray-4"],[1,"text-espressive-sm","text-secondary-5-3"],["cf-button","","size","small","type","secondary",1,"!text-body-md","md:p-2",3,"click"],["icon","delete","size","small",1,"mr-2.5","md:m-0"],["icon","add","size","small","class","mr-2.5 md:m-0",4,"ngIf"],["icon","edit","size","small","class","mr-2.5 md:m-0",4,"ngIf"],["icon","add","size","small",1,"mr-2.5","md:m-0"],["icon","edit","size","small",1,"mr-2.5","md:m-0"],[1,"flex","justify-center","items-center"],["icon","airplane_seat","size","medium"],[1,"mb-6","md:mb-[1px]"],[1,"p-6","bg-white","rounded","shadow-cf-md","flex","flex-col","gap-4"],["data-id","agentId","textField","name","valueField","code","placeholder","Ch\u1ecdn \u0111\u1ea1i l\xfd",1,"!w-full","!max-w-none",3,"ngClass","status","data","ngModel","allowSearch","formControl","selectedChange"],["class","animate-spin mt-5 opacity-50","icon","refresh","size","small",4,"ngIf"],["icon","refresh","size","small",1,"animate-spin","mt-5","opacity-50"],["class","text-espressive-sm text-black mb-1.5",4,"ngIf"],["placeholder","Ghi ch\xfa",1,"w-full","placeholder:text-body-md","placeholder:text-neutral-gray-4","border","border-neutral-gray-2","rounded-[8px]","shadow-xs","px-[14px]","py-[10px]","max-h-80",2,"min-height","40px",3,"formControl"],[1,"text-espressive-sm","text-black","mb-1.5"],["class","text-heading-md text-neutral-black",4,"ngIf","ngIfElse"],["totalPriceTempl",""],[1,"text-heading-md","text-neutral-black"],["class","text-heading-md text-neutral-black",4,"ngIf"],[1,"h-[343px]"],["textField","name","valueField","code",1,"hidden",3,"data","ngModel","allowSearch","formControl"],["cf-button","","size","medium","color","primary-1","type","secondary",1,"whitespace-nowrap","w-[200px]","md:w-full","justify-center",3,"disabled","click"],["icon","grouping","size","small",1,"mr-2.5"],["cf-button","","size","medium","color","primary-1",1,"whitespace-nowrap","w-[200px]","md:w-full","justify-center",3,"disabled","click"],["icon","switch","size","small",1,"mr-2.5"],[1,"mt-4","text-body-md","text-black","text-center","px-4"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return n.onReselect()}),e._UZ(1,"cf-icon",1),e.TgZ(2,"div",2),e._uU(3,"Ch\u1ecdn l\u1ea1i"),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),e._UZ(10,"div",9),e.TgZ(11,"div",10),e._uU(12,"Th\xf4ng tin h\xe0nh kh\xe1ch"),e.qZA()(),e.TgZ(13,"div",11),e.YNc(14,Pt,5,0,"div",12),e.TgZ(15,"div")(16,"button",13),e.NdJ("click",function(){return n.quickParseInfo()})("keydown",function(a){return n.onKeydown(a)}),e._UZ(17,"cf-icon",14),e.TgZ(18,"span"),e._uU(19,"Nh\u1eadp nhanh th\xf4ng tin"),e.qZA()(),e.TgZ(20,"div",15),e.NdJ("click",function(){return n.quickParseInfo()}),e._UZ(21,"cf-icon",14),e.TgZ(22,"div",16),e._uU(23,"Nh\u1eadp nhanh"),e.qZA()()()()(),e.YNc(24,Et,5,0,"div",17),e.TgZ(25,"div",18),e._UZ(26,"cf-icon",19),e.TgZ(27,"div",2),e._uU(28," \u0110\u1ec3 ti\u1ec7n thao t\xe1c, h\u1ec7 th\u1ed1ng m\u1eb7c \u0111\u1ecbnh ng\xe0y sinh ADT l\xe0 "),e.TgZ(29,"span",20),e._uU(30),e.qZA(),e._uU(31,". Tuy nhi\xean, h\xe3ng c\u1ea7n ng\xe0y sinh ch\xednh x\xe1c \u0111\u1ec3 h\u1ed7 tr\u1ee3 kh\xe1ch h\xe0ng khi c\xf3 s\u1ef1 c\u1ed1. H\xe3y nh\u1eadp \u0111\xfang ng\xe0y sinh \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o h\u1ed7 tr\u1ee3 t\u1ed1t nh\u1ea5t. "),e.qZA()(),e.TgZ(32,"div",21),e.YNc(33,Wt,11,4,"div",22),e.YNc(34,Dn,11,4,"ng-container",22),e.YNc(35,ri,11,4,"ng-container",22),e.qZA()(),e.YNc(36,Ti,21,5,"div",23),e.YNc(37,Zi,16,13,"div",24),e.TgZ(38,"div",6)(39,"div",7)(40,"div",8),e._UZ(41,"div",9),e.TgZ(42,"div",10),e._uU(43,"Th\xf4ng tin li\xean h\u1ec7"),e.qZA()()(),e.TgZ(44,"div",25)(45,"div",26)(46,"div",27,28)(48,"cf-select",29),e.NdJ("selectedChange",function(a){return n.onChangeAreaCode(a)}),e.TgZ(49,"label",30)(50,"span",31),e._uU(51,"M\xe3 v\xf9ng"),e.qZA()(),e.YNc(52,Fi,1,1,"cf-input-hint",32),e.qZA()(),e.TgZ(53,"div",33,28)(55,"cf-input-group",34)(56,"label",30)(57,"span",31),e._uU(58,"\u0110i\u1ec7n tho\u1ea1i"),e.qZA()(),e.TgZ(59,"input",35),e.NdJ("input",function(a){return n.onPhoneChange(a)}),e.qZA(),e.YNc(60,Bi,1,1,"cf-input-hint",32),e.YNc(61,Ji,1,1,"cf-input-hint",32),e.YNc(62,wi,1,1,"cf-input-hint",32),e.YNc(63,Mi,1,1,"cf-input-hint",32),e.qZA()(),e.TgZ(64,"div",36,28)(66,"cf-input-group",37)(67,"label",30)(68,"span",31),e._uU(69,"Email"),e.qZA()(),e._UZ(70,"input",38),e.YNc(71,qi,1,1,"cf-input-hint",32),e.YNc(72,Qi,1,1,"cf-input-hint",32),e.qZA()()()()(),e.TgZ(73,"div",39)(74,"div",7)(75,"div",8),e._UZ(76,"div",9),e.TgZ(77,"div",10),e._uU(78,"Chuy\u1ebfn bay \u0111\xe3 ch\u1ecdn"),e.qZA()()(),e.TgZ(79,"div",40)(80,"div",41)(81,"div")(82,"ticket-selected",42),e.NdJ("showDetail",function(a){return n.onShowDetailInfo(a)}),e.qZA()(),e.YNc(83,Gi,6,2,"div",43),e.qZA()()(),e.YNc(84,Vi,2,4,"div",44),e.qZA()(),e.TgZ(85,"div",45)(86,"div",41)(87,"div",46)(88,"div",47),e._uU(89,"Chuy\u1ebfn bay c\u1ee7a b\u1ea1n"),e.qZA(),e.TgZ(90,"cf-icon",48),e.NdJ("click",function(){return n.onShare()}),e.qZA()(),e.TgZ(91,"div")(92,"ticket-selected",42),e.NdJ("showDetail",function(a){return n.onShowDetailInfo(a)}),e.qZA()(),e.YNc(93,$i,6,2,"div",43),e.qZA()()(),e.TgZ(94,"div",49)(95,"div",50)(96,"div",51)(97,"button",52),e.NdJ("click",function(){return n.onReselect()}),e._UZ(98,"cf-icon",53),e._uU(99," Ch\u1ecdn l\u1ea1i "),e.qZA()(),e.TgZ(100,"div",54),e.YNc(101,zi,3,1,"button",55),e.YNc(102,Xi,3,1,"button",56),e.qZA()()(),e.YNc(103,Wi,1,0,"cf-spinner",57),e.YNc(104,eo,3,0,"cf-spinner",57)),2&t&&(e.xp6(6),e.Q6J("formGroup",n.formGroup),e.xp6(8),e.Q6J("ngIf",n.canExtractImageToDocument),e.xp6(10),e.Q6J("ngIf",n.canExtractImageToDocument),e.xp6(6),e.Oqu(n.defaultBirthdayAdt),e.xp6(3),e.Q6J("ngForOf",n.getFormArray("adultPassenger").controls),e.xp6(1),e.Q6J("ngForOf",n.getFormArray("childPassenger").controls),e.xp6(1),e.Q6J("ngForOf",n.getFormArray("infantPassenger").controls),e.xp6(1),e.Q6J("ngIf",!n.isHiddenFeature&&!n.hasIVSProvider),e.xp6(1),e.Q6J("ngIf",n.isShowForBooker),e.xp6(11),e.Q6J("status",n.formGroup.controls.areaCode.invalid&&(n.formGroup.controls.areaCode.dirty||n.formGroup.controls.areaCode.touched)?"error":"default")("data",n.optionsAreaCode)("allowSearch",!0)("formControl",n.getFormControlInArray(n.formGroup,"areaCode")),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",n.formGroup.controls.areaCode.hasError("required")&&(n.formGroup.controls.areaCode.touched||n.formGroup.controls.areaCode.dirty)),e.xp6(3),e.Q6J("tooltipContent",n.hasVJAirline&&n.checkPhoneRequired?"Theo quy ch\u1ebf ban h\xe0nh b\u1edfi VietJet Air, sdt khi \u0111\u1eb7t v\xe9 b\u1eaft bu\u1ed9c ph\u1ea3i c\u1ee7a kh\xe1ch h\xe0ng, vui l\xf2ng kh\xf4ng nh\u1eadp sdt c\u1ee7a \u0111\u1ea1i l\xfd":"")("status",n.formGroup.controls.phone.invalid&&(n.formGroup.controls.phone.dirty||n.formGroup.controls.phone.touched)?"error":"default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",n.getFormControlInArray(n.formGroup,"phone")),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.phone.hasError("required")&&(n.formGroup.controls.phone.touched||n.formGroup.controls.phone.dirty)),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.phone.hasError("minlength")&&(n.formGroup.controls.phone.touched||n.formGroup.controls.phone.dirty)),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.phone.hasError("maxlength")&&(n.formGroup.controls.phone.touched||n.formGroup.controls.phone.dirty)),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.phone.hasError("blacklisted")&&(n.formGroup.controls.phone.touched||n.formGroup.controls.phone.dirty)),e.xp6(3),e.Q6J("status",n.formGroup.controls.email.invalid&&(n.formGroup.controls.email.dirty||n.formGroup.controls.email.touched)?"error":"default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",n.getFormControlInArray(n.formGroup,"email")),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.email.hasError("required")&&(n.formGroup.controls.email.touched||n.formGroup.controls.email.dirty)),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.email.hasError("email")&&n.formGroup.controls.email.touched),e.xp6(10),e.Q6J("showReselect",!1)("ticketsSelected",n.listTicketSelected),e.xp6(1),e.Q6J("ngIf",!n.isHiddenTotalCharge),e.xp6(1),e.Q6J("ngIf",!n.isShowForBooker),e.xp6(8),e.Q6J("showReselect",!1)("ticketsSelected",n.listTicketSelected),e.xp6(1),e.Q6J("ngIf",!n.isHiddenTotalCharge),e.xp6(8),e.Q6J("ngIf",!n.hasVNAirline&&!n.hasVUAirline&&n.isShowIssued||n.hasIVSProvider),e.xp6(1),e.Q6J("ngIf",n.isShowBooking&&!n.hasIVSProvider),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",n.isExtractingDocument))},dependencies:[h.ax,h.O5,h.mk,h.tP,b.B,b.K,T.AxE,T.Sm8,K.j$,K.ND,K.BN,K.v2,S.N8,S.Xq,z.q,d.u5,d.Fj,d.JJ,d.JL,d.UX,d.oH,d.sg,d.u,Y.Vz,st,h.JJ,U.C,$.Cs,N.OR,C.DW,me.z,ve.p,H.o,H.T,Ce.j],encapsulation:2}),i})(),no=(()=>{class i{transform(t,n="required"){var o;return!!(null!=t&&t.invalid&&(null!=t&&t.dirty||null!=t&&t.touched)&&null!==(o=null==t?void 0:t.errors)&&void 0!==o&&o[n])}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"controlError",type:i,pure:!0,standalone:!0}),i})()},36634:(O,D,f)=>{f.d(D,{U:()=>d});var h=f(94650);let d=(()=>{class C{get addonBaggageData(){return JSON.parse(sessionStorage.getItem("addonBaggageData"))}set addonBaggageData(b){sessionStorage.setItem("addonBaggageData",JSON.stringify(b))}}return C.\u0275fac=function(b){return new(b||C)},C.\u0275prov=h.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},86432:(O,D,f)=>{f.d(D,{h:()=>d});var h=f(94650);let d=(()=>{class C{get addonSeatData(){return JSON.parse(sessionStorage.getItem("addonSeatData"))}set addonSeatData(b){sessionStorage.setItem("addonSeatData",JSON.stringify(b))}}return C.\u0275fac=function(b){return new(b||C)},C.\u0275prov=h.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},4520:(O,D,f)=>{f.d(D,{J:()=>d});var h=f(94650);let d=(()=>{class C{get bookingRequestData(){return JSON.parse(sessionStorage.getItem("bookingRequestData"))}set bookingRequestData(b){sessionStorage.setItem("bookingRequestData",JSON.stringify(b))}}return C.\u0275fac=function(b){return new(b||C)},C.\u0275prov=h.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},3193:(O,D,f)=>{f.d(D,{m:()=>d});var h=f(94650);let d=(()=>{class C{get bookingResultData(){return JSON.parse(sessionStorage.getItem("bookingResultData"))}set bookingResultData(b){sessionStorage.setItem("bookingResultData",JSON.stringify(b))}get firstBookingResult(){return JSON.parse(sessionStorage.getItem("firstBookingResult"))}set firstBookingResult(b){sessionStorage.setItem("firstBookingResult",JSON.stringify(b))}get hasIVSProvider(){return JSON.parse(sessionStorage.getItem("hasIVSProvider"))}set hasIVSProvider(b){sessionStorage.setItem("hasIVSProvider",JSON.stringify(b))}}return C.\u0275fac=function(b){return new(b||C)},C.\u0275prov=h.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},3803:(O,D,f)=>{f.d(D,{h:()=>d});var h=f(94650);let d=(()=>{class C{get ticketSelectedData(){return JSON.parse(sessionStorage.getItem("ticketSelectedData"))}set ticketSelectedData(b){sessionStorage.setItem("ticketSelectedData",JSON.stringify(b))}}return C.\u0275fac=function(b){return new(b||C)},C.\u0275prov=h.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},49195:(O,D,f)=>{f.d(D,{t:()=>d});var h=f(53820);const d={[h.b.CREATE]:{name:"\u0110ang canh v\xe9",description:"Canh v\xe9 r\u1ebb \u0111ang ho\u1ea1t \u0111\u1ed9ng t\u1ef1 \u0111\u1ed9ng",icon:"search",backgroundColor:"bg-[#FFEAB9]",textColor:"text-secondary-7-5"},[h.b.IN_PROCESS]:{name:"\u0110ang canh v\xe9",description:"Canh v\xe9 r\u1ebb \u0111ang ho\u1ea1t \u0111\u1ed9ng t\u1ef1 \u0111\u1ed9ng",icon:"search",backgroundColor:"bg-[#FFEAB9]",textColor:"text-secondary-7-5"},[h.b.COMPLETED]:{name:"\u0110\xe3 canh th\xe0nh c\xf4ng",description:"\u0110\xe3 canh \u0111\u01b0\u1ee3c gi\xe1 v\xe9 r\u1ebb",icon:"check",backgroundColor:"bg-[#07A35D]",textColor:"text-neutral-white"},[h.b.IN_PROCESS_PRICE_UP]:{name:"\u0110ang canh gi\xe1 t\u0103ng",description:"Gi\xe1 v\xe9 \u0111\xe3 t\u0103ng, vui l\xf2ng c\xe2n nh\u1eafc xu\u1ea5t v\xe9",icon:"arrow_right_up",backgroundColor:"bg-[#ffd1bc]",textColor:"text-primary-1-4"},[h.b.CANCEL]:{name:"\u0110\xe3 h\u1ee7y",description:"\u0110\xe3 h\u1ee7y y\xeau c\u1ea7u canh v\xe9",icon:"delete",backgroundColor:"bg-[#999999]",textColor:"text-neutral-white"},[h.b.EXPIRED]:{name:"\u0110\xe3 h\u1ebft h\u1ea1n",description:"H\u1ebft h\u1ea1n canh v\xe9",icon:"clock",backgroundColor:"bg-[#CCCCCC]",textColor:"text-neutral-gray-6"}}},53820:(O,D,f)=>{f.d(D,{b:()=>h});var h=(()=>{return(d=h||(h={})).CREATE="CREATE",d.IN_PROCESS="IN_PROCESS",d.IN_PROCESS_PRICE_UP="IN_PROCESS_PRICE_UP",d.COMPLETED="COMPLETED",d.EXPIRED="EXPIRED",d.CANCEL="CANCEL",h;var d})()},97380:(O,D,f)=>{f.d(D,{D5:()=>N,VP:()=>H,_r:()=>z,v_:()=>Y,xj:()=>$,yI:()=>Q});var h=f(97582),d=f(87067),C=f(43429),S=f(49195),b=f(53820);let $=(()=>{class u{}return(0,h.gn)([(0,d.C)()],u.prototype,"status",void 0),(0,h.gn)([(0,C.D)(()=>T),(0,d.C)()],u.prototype,"data",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"objectError",void 0),u})(),T=(()=>{class u{}return(0,h.gn)([(0,C.D)(()=>H),(0,d.C)()],u.prototype,"listOrder",void 0),(0,h.gn)([(0,C.D)(()=>K),(0,d.C)()],u.prototype,"orderTaskStatus",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"pageOffset",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"pageSize",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"total",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"empty",void 0),u})(),K=(()=>{class u{}return(0,h.gn)([(0,d.C)()],u.prototype,"canCreateOrder",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"completeTask",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"inProcessTask",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"maxTask",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"numMaxFree",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"numOrderFree",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"ownerId",void 0),u})(),H=(()=>{class u{get stateDisplay(){switch(this.state){case b.b.CREATE:return S.t[b.b.CREATE].name;case b.b.IN_PROCESS:return S.t[b.b.IN_PROCESS].name;case b.b.COMPLETED:return S.t[b.b.COMPLETED].name;case b.b.CANCEL:return S.t[b.b.CANCEL].name;case b.b.EXPIRED:return S.t[b.b.EXPIRED].name;case b.b.IN_PROCESS_PRICE_UP:return S.t[b.b.IN_PROCESS_PRICE_UP].name;default:return""}}}return(0,h.gn)([(0,d.C)()],u.prototype,"orderId",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"canUpdate",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"code",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"state",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"monitorType",void 0),(0,h.gn)([(0,C.D)(()=>z),(0,d.C)()],u.prototype,"ticketInfo",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"distributionChannel",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"orderInfo",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"fareInfo",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"ownerInfo",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"userActionInfo",void 0),(0,h.gn)([(0,C.D)(()=>Y),(0,d.C)()],u.prototype,"availableSlotInfo",void 0),u})(),z=(()=>{class u{}return(0,h.gn)([(0,d.C)()],u.prototype,"leg",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"airline",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"flightType",void 0),(0,h.gn)([(0,C.D)(()=>N),(0,d.C)()],u.prototype,"journeys",void 0),(0,h.gn)([(0,C.D)(()=>Q),(0,d.C)()],u.prototype,"passengers",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"totalFare",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"originalPrice",void 0),u})(),N=(()=>{class u{}return(0,h.gn)([(0,d.C)()],u.prototype,"leg",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"startPoint",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"endPoint",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"departTime",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"arrivalTime",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"duration",void 0),(0,h.gn)([(0,C.D)(()=>Z),(0,d.C)()],u.prototype,"segments",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"rangeTime",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"rangeDateTime",void 0),u})(),Z=(()=>{class u{}return(0,h.gn)([(0,d.C)()],u.prototype,"startPoint",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"endPoint",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"flightNumber",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"fareBasic",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"fareClass",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"departTime",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"departZone",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"arriveTime",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"arriveZone",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"index",void 0),u})(),Q=(()=>{class u{}return(0,h.gn)([(0,d.C)()],u.prototype,"birthday",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"firstName",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"lastName",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"type",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"index",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"parentIndex",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"key",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"parentKey",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"namePrefix",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"gender",void 0),u})(),Y=(()=>{class u{}return(0,h.gn)([(0,d.C)()],u.prototype,"amountPerPax",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"currency",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"free",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"percent",void 0),(0,h.gn)([(0,d.C)()],u.prototype,"type",void 0),u})()}}]);