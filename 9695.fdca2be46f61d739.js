"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[9695],{29695:(Ue,A,d)=>{d.r(A),d.d(A,{ReroutingPageComponent:()=>be,SearchJourneyModifyComponent:()=>w.r});var v=d(36895),U=d(10908),q=d(83700),s=d(72506),N=d(19123),k=d(82908),_=d(67534),J=d(58276),h=d(15439),P=d(28746),w=d(67411),e=d(94650),R=d(27849),S=d(51716),F=d(28490),I=d(97579),j=d(62331),Y=d(82761),B=d(9381);function O(i,o){1&i&&(e.TgZ(0,"p"),e._uU(1," H\xe0nh tr\xecnh c\u1ea7n \u0111\u1ed5i "),e.qZA())}function M(i,o){1&i&&(e.TgZ(0,"p"),e._uU(1," H\xe0nh tr\xecnh m\u1edbi "),e.qZA())}function L(i,o){1&i&&(e.TgZ(0,"p"),e._uU(1," X\xe1c nh\u1eadn "),e.qZA())}function H(i,o){1&i&&(e.TgZ(0,"div",17)(1,"div",18)(2,"p"),e._uU(3,"1. \u0110\u1ea1i l\xfd mu\u1ed1n \u0111\u1ed5i nhi\u1ec1u h\xe0nh tr\xecnh c\xf9ng l\xfac th\xec li\xean h\u1ec7 Booker h\u1ed7 tr\u1ee3."),e.qZA(),e.TgZ(4,"p"),e._uU(5,"2. \u0110\u1ed5i h\xe0nh tr\xecnh \xe1p d\u1ee5ng cho t\u1ea5t c\u1ea3 kh\xe1ch chung code."),e.qZA()()())}function Q(i,o){1&i&&(e.TgZ(0,"div",19)(1,"div"),e.O4$(),e.TgZ(2,"svg",20),e._UZ(3,"path",21)(4,"path",22)(5,"path",23),e.qZA()(),e.kcU(),e.TgZ(6,"div",18)(7,"p"),e._uU(8,"1. H\xe0nh l\xfd v\xe0 gh\u1ebf ng\u1ed3i \u0111\xe3 mua c\xf3 th\u1ec3 s\u1ebd kh\xf4ng t\u1ef1 \u0111\u1ed9ng th\xeam v\xe0o h\xe0nh tr\xecnh m\u1edbi, vui l\xf2ng t\u1ef1 ki\u1ec3m tra v\xe0 b\u1ed5 sung sau"),e.qZA(),e.TgZ(9,"p"),e._uU(10,"2. Ti\u1ec1n ch\xeanh l\u1ec7ch khi \u0111\u1ed5i sang h\xe0nh tr\xecnh r\u1ebb h\u01a1n s\u1ebd kh\xf4ng \u0111\u01b0\u1ee3c c\u1ea5n tr\u1eeb. \u0110\u1ea1i l\xfd c\xf3 th\u1ec3 c\xe2n nh\u1eafn c\xe1c l\u1ef1a ch\u1ecdn kh\xe1c (hu\u1ef7 h\xe0nh tr\xecnh r\u1ed3i th\xeam m\u1edbi) \u0111\u1ec3 t\u1ed1i \u01b0u chi ph\xed"),e.qZA()()())}function K(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",27)(2,"div",28),e._UZ(3,"img",29),e.TgZ(4,"div",30),e._uU(5),e.qZA()(),e.TgZ(6,"div",31)(7,"div",32)(8,"div",33),e._UZ(9,"cf-icon",34),e.TgZ(10,"div",35)(11,"div"),e._uU(12),e.qZA(),e._UZ(13,"cf-icon",36),e.TgZ(14,"div"),e._uU(15),e.qZA()()(),e.TgZ(16,"div",33),e._UZ(17,"cf-icon",37),e.TgZ(18,"div",38),e._uU(19),e.ALo(20,"date"),e.qZA()(),e.TgZ(21,"div",33),e._UZ(22,"cf-icon",39),e.TgZ(23,"div",38),e._uU(24),e.qZA()()(),e._UZ(25,"div",40),e.TgZ(26,"div",41)(27,"div",42)(28,"div",43),e._uU(29,"T\xecnh tr\u1ea1ng"),e.qZA(),e.TgZ(30,"div",33),e.O4$(),e.TgZ(31,"svg",44),e._UZ(32,"path",45),e.qZA(),e.kcU(),e.TgZ(33,"div",46),e._uU(34),e.qZA()()(),e.TgZ(35,"cf-radio",47),e.NdJ("checkChange",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.onChangeJourney(r))}),e.qZA()()()(),e.BQk()}if(2&i){const t=o.$implicit;e.xp6(3),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(2),e.AsE("",t.airline," - ",t.airlineName,""),e.xp6(7),e.AsE("",t.startPointName," (",t.startPointCode,")"),e.xp6(3),e.AsE("",t.endPointName," (",t.endPointCode,")"),e.xp6(4),e.hij(" ",e.xi3(20,12,t.startTime,"HH:mm dd/MM/yyyy")," "),e.xp6(5),e.hij(" ",t.redirectType," "),e.xp6(10),e.Oqu(t.statusText),e.xp6(1),e.Q6J("checked",t.selected)("value",t.journeyKey)}}function $(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",48)(2,"div",49),e._UZ(3,"img",29),e.TgZ(4,"div",33),e.O4$(),e.TgZ(5,"svg",44),e._UZ(6,"path",45),e.qZA(),e.kcU(),e.TgZ(7,"div",46),e._uU(8),e.qZA()()(),e._UZ(9,"div",50),e.TgZ(10,"div",51)(11,"div",42)(12,"div",33),e._UZ(13,"cf-icon",34),e.TgZ(14,"div",35)(15,"div"),e._uU(16),e.qZA(),e._UZ(17,"cf-icon",36),e.TgZ(18,"div"),e._uU(19),e.qZA()()(),e.TgZ(20,"div",33),e._UZ(21,"cf-icon",37),e.TgZ(22,"div",38),e._uU(23),e.ALo(24,"date"),e.qZA()(),e.TgZ(25,"div",33),e._UZ(26,"cf-icon",39),e.TgZ(27,"div",38),e._uU(28),e.qZA()()(),e.TgZ(29,"div")(30,"cf-radio",47),e.NdJ("checkChange",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.onChangeJourney(r))}),e.qZA()()()(),e.BQk()}if(2&i){const t=o.$implicit;e.xp6(3),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(5),e.Oqu(t.statusText),e.xp6(8),e.AsE("",t.startPointName," (",t.startPointCode,")"),e.xp6(3),e.AsE("",t.endPointName," (",t.endPointCode,")"),e.xp6(4),e.hij(" ",e.xi3(24,10,t.startTime,"HH:mm dd/MM/yyyy")," "),e.xp6(5),e.hij(" ",t.redirectType," "),e.xp6(2),e.Q6J("checked",t.selected)("value",t.journeyKey)}}const C=function(){return[]};function V(i,o){if(1&i&&(e.TgZ(0,"div")(1,"div",24),e.YNc(2,K,36,15,"ng-container",25),e.qZA(),e.TgZ(3,"div",26),e.YNc(4,$,31,13,"ng-container",25),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",(null==t.bookingDetailReroutingData?null:t.bookingDetailReroutingData.journeys)||e.DdM(2,C)),e.xp6(2),e.Q6J("ngForOf",(null==t.bookingDetailReroutingData?null:t.bookingDetailReroutingData.journeys)||e.DdM(3,C))}}function z(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",52)(2,"div",53),e._UZ(3,"cf-icon",54),e.TgZ(4,"div",55),e._uU(5,"H\xe0nh tr\xecnh hi\u1ec7n t\u1ea1i"),e.qZA()(),e.TgZ(6,"div",56),e._uU(7),e._UZ(8,"cf-icon",36),e._uU(9),e.TgZ(10,"span",57),e._uU(11),e.ALo(12,"date"),e.qZA()()(),e.TgZ(13,"search-journey-modify",58),e.NdJ("ticketSelected",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.onTicketSelected(a))})("valueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.onValueChange(a))}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(7),e.hij(" ",null==t.currentJourneySeleceted?null:t.currentJourneySeleceted.startPointCode," "),e.xp6(2),e.hij(" ",null==t.currentJourneySeleceted?null:t.currentJourneySeleceted.endPointCode," \u30fb "),e.xp6(2),e.AsE("",e.xi3(12,8,null==t.currentJourneySeleceted?null:t.currentJourneySeleceted.startTime,"HH:mm dd/MM/yyyy")," \u30fb",null==t.currentJourneySeleceted?null:t.currentJourneySeleceted.redirectType," "),e.xp6(2),e.Q6J("searchType",t.searchJourneyModifyType)("hiddenCharge",t.hiddenCharge)("currentJourneySeleceted",t.currentJourneySeleceted)("reroutingJourneySeleceted",t.reroutingJourneySeleceted)}}function G(i,o){if(1&i&&(e.TgZ(0,"div",94),e._UZ(1,"cf-icon",95),e.TgZ(2,"span",46),e._uU(3),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",t.stopPoint," ")}}function X(i,o){1&i&&e._UZ(0,"div",96)}function W(i,o){if(1&i&&(e.TgZ(0,"div",97)(1,"div",76),e._uU(2),e.qZA(),e.TgZ(3,"div",98),e._uU(4),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.hij("",t.name,":\xa0"),e.xp6(2),e.Oqu(t.value)}}function ee(i,o){if(1&i&&(e.ynx(0),e.YNc(1,G,4,1,"div",67),e.TgZ(2,"div",68)(3,"div",69),e.YNc(4,X,1,0,"div",70),e.qZA(),e.TgZ(5,"div",71)(6,"div",72)(7,"div"),e._UZ(8,"img",73),e.qZA(),e.TgZ(9,"div",74)(10,"div",75),e._uU(11),e.qZA(),e.TgZ(12,"div",76),e._uU(13),e.qZA()(),e.TgZ(14,"div",77),e._uU(15),e.qZA()(),e.TgZ(16,"div",78)(17,"div",59)(18,"div",79)(19,"div",80),e._UZ(20,"cf-icon",81),e.TgZ(21,"div"),e._uU(22),e.qZA()(),e.TgZ(23,"div",82),e._UZ(24,"div",83)(25,"div",84)(26,"cf-icon",85),e.qZA()(),e.TgZ(27,"div",86),e._UZ(28,"cf-icon",87),e.TgZ(29,"div",43),e._uU(30),e.qZA()(),e.TgZ(31,"div",33),e._UZ(32,"cf-icon",34),e.TgZ(33,"div",88)(34,"span",89),e._uU(35),e.qZA(),e.TgZ(36,"span",90),e._uU(37),e.qZA()()()(),e.TgZ(38,"div")(39,"div",91),e._UZ(40,"cf-icon",81),e.TgZ(41,"div"),e._uU(42),e.qZA()(),e.TgZ(43,"div",86),e._UZ(44,"cf-icon",87),e.TgZ(45,"div",43),e._uU(46),e.qZA()(),e.TgZ(47,"div",33),e._UZ(48,"cf-icon",34),e.TgZ(49,"div",88)(50,"span",89),e._uU(51),e.qZA(),e.TgZ(52,"span",90),e._uU(53),e.qZA()()()()()(),e.TgZ(54,"div",92),e.YNc(55,W,5,2,"div",93),e.qZA()(),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.stopPoint),e.xp6(3),e.Q6J("ngForOf",e.DdM(15,C).constructor(6)),e.xp6(4),e.Q6J("src","assets/airline-logo/"+t.operating+".png",e.LSH),e.xp6(3),e.hij("",t.operating," - "),e.xp6(2),e.hij("\xa0",t.operatingName,""),e.xp6(2),e.hij(" ",t.flightNumber," "),e.xp6(7),e.Oqu(t.startTime),e.xp6(8),e.Oqu(t.startDate),e.xp6(5),e.hij("",t.startPoint," - "),e.xp6(2),e.Oqu(t.startPointName),e.xp6(5),e.hij(" ",t.endTime," "),e.xp6(4),e.Oqu(t.endDate),e.xp6(5),e.hij("",t.endPoint," - "),e.xp6(2),e.Oqu(t.endPointName),e.xp6(2),e.Q6J("ngForOf",null==t?null:t.rules)}}function te(i,o){if(1&i&&(e.TgZ(0,"div",115),e._UZ(1,"cf-icon",95),e.TgZ(2,"span",46),e._uU(3),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",t.stopPoint," ")}}function ie(i,o){if(1&i&&(e.TgZ(0,"span",89),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" (",t.startTerminal,")")}}function ne(i,o){if(1&i&&(e.TgZ(0,"span",89),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" (",t.endTerminal,")")}}function oe(i,o){if(1&i&&(e.TgZ(0,"div",97)(1,"div",76),e._uU(2),e.qZA(),e.TgZ(3,"div",116),e._uU(4),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.hij("",t.name,":\xa0"),e.xp6(2),e.Oqu(t.value)}}function ae(i,o){if(1&i&&(e.ynx(0),e.YNc(1,te,4,1,"div",99),e.TgZ(2,"div",100)(3,"div",101)(4,"div",33),e._UZ(5,"img",102),e.TgZ(6,"div",103)(7,"div",104),e._uU(8),e.qZA(),e.TgZ(9,"div",105),e._uU(10),e.qZA()()()(),e.TgZ(11,"div",106)(12,"div",107)(13,"div",108)(14,"div",104),e._uU(15),e.qZA(),e.TgZ(16,"div",105),e._uU(17),e.qZA()(),e.TgZ(18,"div",108)(19,"div",104),e._uU(20),e.qZA(),e.TgZ(21,"div",105),e._uU(22),e.qZA()()(),e.TgZ(23,"div",109),e._UZ(24,"div",110)(25,"div",111)(26,"cf-icon",112),e.qZA(),e.TgZ(27,"div",107)(28,"div",103)(29,"div",104),e._uU(30),e.YNc(31,ie,2,1,"span",113),e.qZA(),e.TgZ(32,"div",105),e._uU(33),e.qZA()(),e.TgZ(34,"div",103)(35,"div",104),e._uU(36),e.YNc(37,ne,2,1,"span",113),e.qZA(),e.TgZ(38,"div",105),e._uU(39),e.qZA()()()(),e._UZ(40,"div",114),e.TgZ(41,"div",42),e.YNc(42,oe,5,2,"div",93),e.qZA()(),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.stopPoint),e.xp6(4),e.Q6J("src",t.mobileAirlineLogo,e.LSH),e.xp6(3),e.Oqu(t.flightNumber),e.xp6(2),e.Oqu(t.airlineName),e.xp6(5),e.Oqu(t.startTime),e.xp6(2),e.Oqu(t.startDate),e.xp6(3),e.Oqu(t.endTime),e.xp6(2),e.Oqu(t.endDate),e.xp6(8),e.AsE("",t.startPointName," - ",t.startPoint," "),e.xp6(1),e.Q6J("ngIf",t.startTerminal),e.xp6(2),e.Oqu(t.startAirport),e.xp6(3),e.AsE("",t.endPointName," - ",t.endPoint," "),e.xp6(1),e.Q6J("ngIf",t.endTerminal),e.xp6(2),e.Oqu(t.endAirport),e.xp6(3),e.Q6J("ngForOf",t.rules)}}function re(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"td",139),e._uU(2),e.qZA(),e.TgZ(3,"td",139),e._uU(4),e.qZA(),e.TgZ(5,"td",139),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td",139),e._uU(9),e.ALo(10,"number"),e.qZA(),e.TgZ(11,"td",140),e._uU(12),e.ALo(13,"number"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.typeDisplay),e.xp6(2),e.Oqu(e.lcZ(7,5,t.baseFare)),e.xp6(3),e.Oqu(e.lcZ(10,7,t.taxFee)),e.xp6(3),e.Oqu(e.lcZ(13,9,t.totalPrice))}}function ue(i,o){if(1&i&&(e.TgZ(0,"div",126)(1,"div",127)(2,"div",128),e._UZ(3,"cf-icon",129),e.TgZ(4,"div"),e._uU(5,"Chi ph\xed h\xe0nh tr\xecnh m\u1edbi"),e.qZA()()(),e.TgZ(6,"div",130)(7,"table",131)(8,"thead")(9,"tr",132)(10,"th",133),e._uU(11,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(12,"th",133),e._uU(13,"Lo\u1ea1i kh\xe1ch"),e.qZA(),e.TgZ(14,"th",133),e._uU(15,"Gi\xe1 v\xe9"),e.qZA(),e.TgZ(16,"th",133),e._uU(17,"Thu\u1ebf ph\xed"),e.qZA(),e.TgZ(18,"th",134),e._uU(19,"T\u1ed5ng gi\xe1"),e.qZA()()(),e.TgZ(20,"tbody"),e.YNc(21,re,14,11,"tr",25),e.qZA()(),e.TgZ(22,"div",42)(23,"div",135)(24,"div",136),e._uU(25,"T\u1ed5ng gi\xe1 g\u1ed1c"),e.qZA(),e.TgZ(26,"div",137),e._uU(27),e.ALo(28,"number"),e.qZA()(),e.TgZ(29,"div",135)(30,"div",136),e._uU(31,"D\u1ecbch v\u1ee5 c\u1ed9ng th\xeam"),e.qZA(),e.TgZ(32,"div",137),e._uU(33),e.ALo(34,"number"),e.qZA()(),e.TgZ(35,"div",135)(36,"div",46),e._uU(37,"T\u1ed5ng chi ph\xed"),e.qZA(),e.TgZ(38,"div",138),e._uU(39),e.ALo(40,"number"),e.qZA()()()()()),2&i){const t=e.oxw(3);e.xp6(21),e.Q6J("ngForOf",t.bookingDetailReroutingData.passengers||e.DdM(10,C)),e.xp6(6),e.hij(" ",e.lcZ(28,4,(null==t.listTicketSelected[0]||null==t.listTicketSelected[0].ticketPrice?null:t.listTicketSelected[0].ticketPrice.totalCharge)||0)," \u0111"),e.xp6(6),e.hij(" ",e.lcZ(34,6,(null==t.quotationNewJourneyData.newJourney.addOnCharges?null:t.quotationNewJourneyData.newJourney.addOnCharges.total)||0)," \u0111 "),e.xp6(6),e.hij(" ",e.lcZ(40,8,((null==t.quotationNewJourneyData.newJourney||null==t.quotationNewJourneyData.newJourney.charge?null:t.quotationNewJourneyData.newJourney.charge.total)||0)+((null==t.quotationNewJourneyData.serviceFeeInfo?null:t.quotationNewJourneyData.serviceFeeInfo.totalService)||0)||0)," \u0111")}}function le(i,o){1&i&&(e.TgZ(0,"span",141),e._uU(1," (T\xednh theo t\u1ed5ng ph\xed c\u1ee7a PNR) "),e.qZA())}function de(i,o){if(1&i&&(e.TgZ(0,"div",142)(1,"div",49)(2,"div",143),e._uU(3," Ph\xed h\xe0nh tr\xecnh m\u1edbi "),e._UZ(4,"cf-icon",144),e.qZA(),e.TgZ(5,"div",145),e._uU(6),e.ALo(7,"number"),e.qZA()(),e.TgZ(8,"div",49)(9,"div",143),e._uU(10," Ph\xed \u0111\u1ed5i h\xe0nh tr\xecnh "),e._UZ(11,"cf-icon",144),e.qZA(),e.TgZ(12,"div",145),e._uU(13),e.ALo(14,"number"),e.qZA()(),e.TgZ(15,"div",49)(16,"div",146),e._uU(17," T\u1ed5ng ph\xed "),e._UZ(18,"cf-icon",144),e.qZA(),e.TgZ(19,"div",147),e._uU(20),e.ALo(21,"number"),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(6),e.hij("",e.lcZ(7,3,t.paymentDetailBooked.newJourneyCharge)," \u0111"),e.xp6(7),e.hij("",e.lcZ(14,5,t.paymentDetailBooked.modifyCharge)," \u0111"),e.xp6(7),e.hij("",e.lcZ(21,7,t.paymentDetailBooked.totalCharge)," \u0111")}}function ce(i,o){if(1&i&&(e.TgZ(0,"div",142)(1,"div",49)(2,"div",143),e._uU(3," Ph\xed h\xe0nh tr\xecnh m\u1edbi "),e._UZ(4,"cf-icon",144),e.qZA(),e.TgZ(5,"div",145),e._uU(6),e.ALo(7,"number"),e.qZA()(),e.TgZ(8,"div",49)(9,"div",143),e._uU(10," Ph\xed h\xe0nh tr\xecnh c\u0169 \u0111\xe3 thanh to\xe1n "),e._UZ(11,"cf-icon",144),e.qZA(),e.TgZ(12,"div",148),e._uU(13),e.ALo(14,"number"),e.qZA()(),e.TgZ(15,"div",49)(16,"div",143),e._uU(17," Ph\xed \u0111\u1ed5i h\xe0nh tr\xecnh "),e._UZ(18,"cf-icon",144),e.qZA(),e.TgZ(19,"div",145),e._uU(20),e.ALo(21,"number"),e.qZA()(),e.TgZ(22,"div",49)(23,"div",143),e._uU(24," Kh\xf4ng ho\xe0n tr\u1ea3 "),e._UZ(25,"cf-icon",144),e.qZA(),e.TgZ(26,"div",145),e._uU(27),e.ALo(28,"number"),e.qZA()(),e.TgZ(29,"div",49)(30,"div",146),e._uU(31," T\u1ed5ng ph\xed "),e._UZ(32,"cf-icon",144),e.qZA(),e.TgZ(33,"div",147),e._uU(34),e.ALo(35,"number"),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(6),e.hij("",e.lcZ(7,5,t.paymentDetailIssued.newJourneyCharge)," \u0111"),e.xp6(7),e.hij(" (",e.lcZ(14,7,t.paymentDetailIssued.oldJourneyCharge)," \u0111) "),e.xp6(7),e.hij("",e.lcZ(21,9,t.paymentDetailIssued.modifyCharge)," \u0111 "),e.xp6(7),e.hij("",e.lcZ(28,11,t.paymentDetailIssued.nonRefund)," \u0111 "),e.xp6(7),e.hij("",e.lcZ(35,13,t.paymentDetailIssued.totalCharge)," \u0111")}}function se(i,o){if(1&i&&(e.TgZ(0,"div",24),e.YNc(1,ue,41,11,"div",117),e.TgZ(2,"div",118)(3,"div",119),e._UZ(4,"cf-icon",120),e._uU(5," Chi ti\u1ebft thanh to\xe1n "),e.YNc(6,le,2,0,"span",121),e.qZA(),e.YNc(7,de,22,9,"div",122),e.YNc(8,ce,36,15,"div",122),e.TgZ(9,"div",123)(10,"div",124),e._UZ(11,"cf-icon",125),e.TgZ(12,"span",18),e._uU(13," L\u01b0u \xfd: N\u1ebfu \u0111\u1ed5i h\xe0nh tr\xecnh tr\xean v\xe9 \u0111\xe3 xu\u1ea5t, chi ph\xed s\u1ebd \u0111\u01b0\u1ee3c thanh to\xe1n ngay v\xe0 c\u1eadp nh\u1eadt v\xe0o c\xf4ng n\u1ee3 "),e.qZA()()()()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","VJ"===(null==t.bookingDetailReroutingData?null:t.bookingDetailReroutingData.provider)),e.xp6(5),e.Q6J("ngIf","VN"===t.bookingDetailReroutingData.provider&&"ISSUED"===t.bookingDetailReroutingData.status),e.xp6(1),e.Q6J("ngIf","BOOKED"===t.bookingDetailReroutingData.status),e.xp6(1),e.Q6J("ngIf","ISSUED"===t.bookingDetailReroutingData.status)}}function ge(i,o){if(1&i&&(e.TgZ(0,"div",103)(1,"div",159)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.ALo(6,"number"),e.qZA()(),e.TgZ(7,"div",160)(8,"div"),e._uU(9,"Gi\xe1 v\xe9 m\xe1y bay"),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.ALo(12,"number"),e.qZA()(),e.TgZ(13,"div",160)(14,"div"),e._uU(15,"Thu\u1ebf & ph\xed"),e.qZA(),e.TgZ(16,"div"),e._uU(17),e.ALo(18,"number"),e.qZA()()()),2&i){const t=o.$implicit;e.xp6(3),e.AsE("",t.name," (",t.typeDisplay,")"),e.xp6(2),e.Oqu(e.lcZ(6,5,t.totalPrice)),e.xp6(6),e.Oqu(e.lcZ(12,7,t.baseFare)),e.xp6(6),e.Oqu(e.lcZ(18,9,t.taxFee))}}function he(i,o){if(1&i&&(e.TgZ(0,"div",126)(1,"div",127)(2,"div",128),e._UZ(3,"cf-icon",129),e.TgZ(4,"div"),e._uU(5,"Chi ph\xed h\xe0nh tr\xecnh m\u1edbi"),e.qZA()()(),e.TgZ(6,"div",151)(7,"div",107),e.YNc(8,ge,19,11,"div",152),e.qZA(),e.TgZ(9,"div",153)(10,"div",154)(11,"div",155),e._uU(12,"T\u1ed5ng gi\xe1 g\u1ed1c"),e.qZA(),e.TgZ(13,"div",156),e._uU(14),e.ALo(15,"number"),e.qZA()(),e.TgZ(16,"div",154)(17,"div",155),e._uU(18,"D\u1ecbch v\u1ee5 c\u1ed9ng th\xeam"),e.qZA(),e.TgZ(19,"div",156),e._uU(20),e.ALo(21,"number"),e.qZA()(),e.TgZ(22,"div",154)(23,"div",157),e._uU(24,"T\u1ed5ng chi ph\xed"),e.qZA(),e.TgZ(25,"div",138),e._uU(26),e.ALo(27,"number"),e.qZA()()(),e._UZ(28,"div",158),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(8),e.Q6J("ngForOf",t.bookingDetailReroutingData.passengers||e.DdM(10,C)),e.xp6(6),e.hij(" ",e.lcZ(15,4,(null==t.listTicketSelected[0]||null==t.listTicketSelected[0].ticketPrice?null:t.listTicketSelected[0].ticketPrice.totalCharge)||0)," \u0111 "),e.xp6(6),e.hij(" ",e.lcZ(21,6,(null==t.quotationNewJourneyData.newJourney.addOnCharges?null:t.quotationNewJourneyData.newJourney.addOnCharges.total)||0)," \u0111 "),e.xp6(6),e.hij(" ",e.lcZ(27,8,((null==t.quotationNewJourneyData.newJourney||null==t.quotationNewJourneyData.newJourney.charge?null:t.quotationNewJourneyData.newJourney.charge.total)||0)+((null==t.quotationNewJourneyData.serviceFeeInfo?null:t.quotationNewJourneyData.serviceFeeInfo.totalService)||0)||0)," \u0111 ")}}function pe(i,o){1&i&&(e.TgZ(0,"div",141),e._uU(1," (T\xednh theo t\u1ed5ng ph\xed c\u1ee7a PNR) "),e.qZA())}function fe(i,o){if(1&i&&(e.TgZ(0,"div",151)(1,"div",49)(2,"div",143),e._uU(3," Ph\xed h\xe0nh tr\xecnh m\u1edbi "),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.ALo(6,"number"),e.qZA()(),e.TgZ(7,"div",49)(8,"div",143),e._uU(9," Ph\xed \u0111\u1ed5i h\xe0nh tr\xecnh "),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.ALo(12,"number"),e.qZA()(),e.TgZ(13,"div",49)(14,"div",146),e._uU(15," T\u1ed5ng ph\xed "),e.qZA(),e.TgZ(16,"div",147),e._uU(17),e.ALo(18,"number"),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(5),e.hij("",e.lcZ(6,3,t.paymentDetailBooked.newJourneyCharge)," \u0111"),e.xp6(6),e.hij("",e.lcZ(12,5,t.paymentDetailBooked.modifyCharge)," \u0111"),e.xp6(6),e.hij("",e.lcZ(18,7,t.paymentDetailBooked.totalCharge)," \u0111")}}function ve(i,o){if(1&i&&(e.TgZ(0,"div",142)(1,"div",49)(2,"div",143),e._uU(3," Ph\xed h\xe0nh tr\xecnh m\u1edbi "),e.qZA(),e.TgZ(4,"div",145),e._uU(5),e.ALo(6,"number"),e.qZA()(),e.TgZ(7,"div",49)(8,"div",143),e._uU(9," Ph\xed h\xe0nh tr\xecnh c\u0169 \u0111\xe3 thanh to\xe1n "),e.qZA(),e.TgZ(10,"div",148),e._uU(11),e.ALo(12,"number"),e.qZA()(),e.TgZ(13,"div",49)(14,"div",143),e._uU(15," Ph\xed \u0111\u1ed5i h\xe0nh tr\xecnh "),e.qZA(),e.TgZ(16,"div",145),e._uU(17),e.ALo(18,"number"),e.qZA()(),e.TgZ(19,"div",49)(20,"div",143),e._uU(21," Kh\xf4ng ho\xe0n tr\u1ea3 "),e.qZA(),e.TgZ(22,"div",145),e._uU(23),e.ALo(24,"number"),e.qZA()(),e.TgZ(25,"div",49)(26,"div",146),e._uU(27," T\u1ed5ng ph\xed "),e._UZ(28,"cf-icon",144),e.qZA(),e.TgZ(29,"div",147),e._uU(30),e.ALo(31,"number"),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(5),e.hij("",e.lcZ(6,5,t.paymentDetailIssued.newJourneyCharge)," \u0111"),e.xp6(6),e.hij("",e.lcZ(12,7,t.paymentDetailIssued.oldJourneyCharge)," \u0111"),e.xp6(6),e.hij("",e.lcZ(18,9,t.paymentDetailIssued.modifyCharge)," \u0111 "),e.xp6(6),e.hij("",e.lcZ(24,11,t.paymentDetailIssued.nonRefund)," \u0111 "),e.xp6(7),e.hij("",e.lcZ(31,13,t.paymentDetailIssued.totalCharge)," \u0111")}}function _e(i,o){if(1&i&&(e.TgZ(0,"div",26),e.YNc(1,he,29,11,"div",117),e.TgZ(2,"div",126)(3,"div",127)(4,"div",149)(5,"div"),e._uU(6,"Chi ti\u1ebft thanh to\xe1n"),e.qZA(),e.YNc(7,pe,2,0,"div",121),e.qZA()(),e.YNc(8,fe,19,9,"div",150),e.YNc(9,ve,32,15,"div",122),e.TgZ(10,"div",123)(11,"div",124),e._UZ(12,"cf-icon",125),e.TgZ(13,"span",18),e._uU(14," L\u01b0u \xfd: N\u1ebfu \u0111\u1ed5i h\xe0nh tr\xecnh tr\xean v\xe9 \u0111\xe3 xu\u1ea5t, chi ph\xed s\u1ebd \u0111\u01b0\u1ee3c thanh to\xe1n ngay v\xe0 c\u1eadp nh\u1eadt v\xe0o c\xf4ng n\u1ee3 "),e.qZA()()()()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","VJ"===(null==t.bookingDetailReroutingData?null:t.bookingDetailReroutingData.provider)),e.xp6(6),e.Q6J("ngIf","VN"===t.bookingDetailReroutingData.provider&&"ISSUED"===t.bookingDetailReroutingData.status),e.xp6(1),e.Q6J("ngIf","BOOKED"===t.bookingDetailReroutingData.status),e.xp6(1),e.Q6J("ngIf","ISSUED"===t.bookingDetailReroutingData.status)}}function me(i,o){if(1&i&&(e.TgZ(0,"div",59)(1,"div")(2,"div",60),e._UZ(3,"cf-icon",61),e.TgZ(4,"span",62),e._uU(5),e.qZA()(),e.TgZ(6,"div",63),e.YNc(7,ee,56,16,"ng-container",25),e.qZA(),e.TgZ(8,"div",64)(9,"div"),e.YNc(10,ae,43,17,"ng-container",25),e.qZA()()(),e.YNc(11,se,14,4,"div",65),e.YNc(12,_e,15,4,"div",66),e.qZA()),2&i){const t=e.oxw();e.xp6(5),e.lnq("Th\xf4ng tin chuy\u1ebfn bay ",t.flightInfo.startPoint," - ",t.flightInfo.endPoint,", ",t.flightInfo.departureDate,""),e.xp6(2),e.Q6J("ngForOf",t.flightInfo.segments),e.xp6(3),e.Q6J("ngForOf",t.flightInfo.segments),e.xp6(1),e.Q6J("ngIf",t.isQuotation),e.xp6(1),e.Q6J("ngIf",t.isQuotation)}}function xe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",166),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onNextStep(1))}),e._uU(1," Ti\u1ebfp t\u1ee5c "),e._UZ(2,"cf-icon",167),e.qZA()}}function ye(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",161)(1,"div")(2,"button",162),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onCancel())}),e._UZ(3,"cf-icon",163),e._uU(4," H\u1ee7y d\u1ecbch v\u1ee5 "),e.qZA()(),e.TgZ(5,"div",164),e.YNc(6,xe,3,0,"button",165),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",1===t.step)}}function Ze(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",168)(1,"div")(2,"button",162),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onCancel())}),e._UZ(3,"cf-icon",163),e._uU(4," H\u1ee7y d\u1ecbch v\u1ee5 "),e.qZA()(),e.TgZ(5,"div",164)(6,"button",169),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onBack())}),e._UZ(7,"cf-icon",170),e._uU(8," Quay l\u1ea1i "),e.qZA()()()}}function Te(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",166),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onNextStep(3))}),e._uU(1," X\xe1c nh\u1eadn "),e._UZ(2,"cf-icon",167),e.qZA()}}function De(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",168)(1,"div")(2,"button",162),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onCancel())}),e._UZ(3,"cf-icon",163),e._uU(4," H\u1ee7y d\u1ecbch v\u1ee5 "),e.qZA()(),e.TgZ(5,"div",164)(6,"button",169),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onBack())}),e._UZ(7,"cf-icon",170),e._uU(8," Quay l\u1ea1i "),e.qZA(),e.YNc(9,Te,3,0,"button",165),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(9),e.Q6J("ngIf",3===t.step)}}function Ce(i,o){1&i&&e._UZ(0,"cf-spinner")}const Ee=function(i){return{"!w-full":i}};let be=(()=>{class i{constructor(t,n,a,r,l,g,p,f,m){this._requestReroutingService=n,this._reroutingService=a,this._locationDataService=r,this._modal=l,this._toastService=g,this._router=p,this._detectMobileService=f,this._bottomSheetService=m,this.step=1,this.listTicketSelected=[],this.isLoading=!1,this.paymentDetailBooked={newJourneyCharge:0,serviceFee:0,modifyCharge:0,totalCharge:0},this.paymentDetailIssued={newJourneyCharge:0,oldJourneyCharge:0,gapCharge:0,modifyCharge:0,nonRefund:0,totalCharge:0},this.searchJourneyModifyType=k.Io.UPDATE_JOURNEY,this.isQuotation=!1,this.hiddenCharge=!1,t.registerIcons([s.gW0,s.s5C,s.Ffn,s.rks,s.wvd,s.okA,s.toh,s.UNF,s.QkI,s.ILM,s.o1t,s.B2I,s.NNX,s.gW0,s.Lxr,s.Xlt,s.a04]),this.bookingDetailReroutingData=this._requestReroutingService.getBookingDetailReroutingData(),this.hiddenCharge="VN"===this.bookingDetailReroutingData.provider}initFlightInfo(){const t=this.listTicketSelected[0];this.flightInfo={airline:t.airline,airlineName:t.airlineName,airlineLogo:t.airlineLogo,provider:t.provider,journeyKey:t.journeyKey,operating:t.operating,operatingName:t.operatingName,leg:t.leg,flightNumber:t.flight,journeyName:`Chuy\u1ebfn bay: ${t.startPoint} - ${t.endPoint}`,numOfStop:t.numOfStop,departureDate:h(t.startTime).format("HH:mm DD/MM/YYYY"),startPoint:t.startCode,startPointName:t.startPoint,endPoint:t.endCode,endPointName:t.endPoint,startTerminal:t.startTerminal,endTerminal:t.endTerminal,price:t.totalPrice,showSurchargeFare:!1,surcharge:0,handBag:"Kh\xf4ng",segments:t.segments.map((n,a)=>({airline:n.airline,airlineSystem:n.airline,airlineName:n.airlineName,airlineLogo:n.airlineLogo,operating:n.operating,operatingName:n.operatingName,mobileAirlineLogo:["VJ","VN","QH"].includes(n.airline)?"assets/airline-logo/"+n.airline+"_small.png":"assets/airline-logo/"+n.airline+".png",flightNumber:n.airline+n.flightNumber,startTime:h(n.departDate).format("HH:mm"),startDate:h(n.departDate).format("DD/MM/YYYY"),startPoint:n.startCode,startPointName:n.startPoint,startAirport:this._locationDataService.getAirportNameByCode(n.startPoint),endTime:h(n.arrivalDate).format("HH:mm"),endDate:h(n.arrivalDate).format("DD/MM/YYYY"),endPoint:n.endCode,endPointName:n.endPoint,startTerminal:n.startTerminal,endTerminal:n.endTerminal,endAirport:this._locationDataService.getAirportNameByCode(n.endPoint),stopPoint:n.stopPoint,modelAirplane:n.modelAirplane,rules:[{name:"Th\u1eddi gian bay",value:n.duration},{name:"Lo\u1ea1i m\xe1y bay",value:n.modelAirplane},{name:"H\u1ea1ng ch\u1ed7",value:(n.fareType||"")+(n.fareClass?`(${n.fareClass})`:"N/A")},{name:"H\xe0nh l\xfd k\xfd g\u1eedi",value:t.checkedBag||"N/A"},{name:"H\xe0nh l\xfd x\xe1ch tay",value:t.handBag||"N/A"}]})),ticketPrice:t.ticketPrice,fareRule:t.fareRule}}onNextStep(t){var n;switch(t){case 1:this.isQuotation=!1,this.step=2,this.currentJourneySeleceted=this.bookingDetailReroutingData.journeys.find(r=>r.selected);break;case 2:if(!this.listTicketSelected.length){if(this._detectMobileService.isMobile()){const r=this._bottomSheetService.open(_.Q4,{headerTitle:"Kh\xf4ng th\u1ec3 ti\u1ebfp t\u1ee5c",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"",body:"Vui l\xf2ng l\u1ef1a ch\u1ecdn h\xe0nh tr\xecnh m\u1edbi tr\u01b0\u1edbc khi \u0111i ti\u1ebfp",okText:"\u0110\xf3ng",cancelText:"",hasIcon:!0,hasCancel:!1,status:"info"}});r.containerInstance._rightButtonClick.subscribe(()=>{r.dismiss()})}else this._modal.open(_.V0,{title:"Kh\xf4ng th\u1ec3 ti\u1ebfp t\u1ee5c",body:"Vui l\xf2ng l\u1ef1a ch\u1ecdn h\xe0nh tr\xecnh m\u1edbi tr\u01b0\u1edbc khi \u0111i ti\u1ebfp",okText:"\u0110\xf3ng",hasCancel:!1,cancelText:""});return}const a=null===(n=this.listTicketSelected[0].ticketPrice)||void 0===n?void 0:n.details;this.bookingDetailReroutingData.passengers.forEach(r=>{if("ADULT"===r.type){const l=null==a?void 0:a.find(g=>g.type.includes("ADT"));l&&(r.baseFare=l.baseFare,r.taxFee=l.taxFee,r.totalPrice=l.baseFare+l.taxFee)}if("CHILD"===r.type){const l=null==a?void 0:a.find(g=>g.type.includes("CHD"));l&&(r.baseFare=l.baseFare,r.taxFee=l.taxFee,r.totalPrice=l.baseFare+l.taxFee)}if("INFANT"===r.type){const l=null==a?void 0:a.find(g=>g.type.includes("INF"));l&&(r.baseFare=l.baseFare,r.taxFee=l.taxFee,r.totalPrice=l.baseFare+l.taxFee)}}),"VN"===this.bookingDetailReroutingData.provider&&"BOOKED"===this.bookingDetailReroutingData.status?this.step=3:this.quotationUpdateJourney(),this.initFlightInfo();break;case 3:this.updateJourneyReservation()}}onBack(){this.step=this.step>1?this.step-1:1}onCancel(){if(this._detectMobileService.isMobile()){const t=this._bottomSheetService.open(_.Q4,{headerTitle:"X\xe1c nh\u1eadn h\u1ee7y d\u1ecbch v\u1ee5",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y d\u1ecbch v\u1ee5 \u0110\u1ed5i h\xe0nh tr\xecnh?",okText:"C\xf3, h\u1ee7y d\u1ecbch v\u1ee5",cancelText:"Kh\xf4ng",hasIcon:!1,status:"info"}});t.containerInstance._rightButtonClick.subscribe(()=>{t.dismiss()}),t.afterDismissed().subscribe(n=>{n&&this._router.navigate([`admin/booking-detail/${this.bookingDetailReroutingData.airline}/${this.bookingDetailReroutingData.bookingCode}`]),t.dismiss()})}else this._modal.open(_.V0,{title:"X\xe1c nh\u1eadn h\u1ee7y d\u1ecbch v\u1ee5",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y d\u1ecbch v\u1ee5 \u0110\u1ed5i h\xe0nh tr\xecnh?",okText:"C\xf3, h\u1ee7y d\u1ecbch v\u1ee5",cancelText:"Kh\xf4ng"}).afterClosed$.subscribe({next:n=>{n.data&&this._router.navigate([`admin/booking-detail/${this.bookingDetailReroutingData.airline}/${this.bookingDetailReroutingData.bookingCode}`])}})}onChangeJourney(t){t.selected||(this.bookingDetailReroutingData.journeys.forEach(n=>{n.selected=n.journeyKey===t.journeyKey}),this.reroutingJourneySeleceted=this.bookingDetailReroutingData.journeys.find(n=>n.selected),this._requestReroutingService.setBookingDetailReroutingData(this.bookingDetailReroutingData))}onValueChange(t){this.listTicketSelected=t}onTicketSelected(t){this.listTicketSelected=t,this.listTicketSelected.length&&this.onNextStep(2)}quotationUpdateJourney(){var t,n,a,r,l,g,p,f;this.isLoading=!0;const m={bookingCode:this.bookingDetailReroutingData.bookingCode||"",newJourney:{airline:this.listTicketSelected[0].airline||"",departDate:h(this.listTicketSelected[0].startTime).format("YYYY-MM-DDTHH:mm:ss"),startPoint:this.listTicketSelected[0].startCode||"",endPoint:this.listTicketSelected[0].endCode||"",fareOptionKey:this.listTicketSelected[0].fareOptionKey||"",journeyKey:this.listTicketSelected[0].journeyKey||"",segments:this.listTicketSelected[0].segments.map(u=>({airline:u.airline,fareClass:u.fareClass,departDate:h(u.departDate).format("YYYY-MM-DDTHH:mm:ss"),endPoint:u.endCode,flightNumber:u.flightNumber,startPoint:u.startCode}))},oldJourney:{airline:(null===(t=this.bookingDetailReroutingData)||void 0===t?void 0:t.airline)||"",departDate:h(null===(n=this.currentJourneySeleceted)||void 0===n?void 0:n.startTime).format("YYYY-MM-DDTHH:mm:ss"),startPoint:(null===(a=this.currentJourneySeleceted)||void 0===a?void 0:a.startPointCode)||"",endPoint:(null===(r=this.currentJourneySeleceted)||void 0===r?void 0:r.endPointCode)||"",fareOptionKey:"",journeyKey:(null===(l=this.currentJourneySeleceted)||void 0===l?void 0:l.journeyKey)||"",segments:(null===(g=this.currentJourneySeleceted)||void 0===g?void 0:g.segments.map(u=>({airline:u.airline,fareClass:u.fareClass,departDate:h(u.departDate).format("YYYY-MM-DDTHH:mm:ss"),endPoint:u.endPoint,flightNumber:u.flightNumber,startPoint:u.startPoint})))||[]},provider:(null===(p=this.bookingDetailReroutingData)||void 0===p?void 0:p.provider)||"",supplier:(null===(f=this.bookingDetailReroutingData)||void 0===f?void 0:f.supplier)||null};this._reroutingService.quotationJourneyUpdate(m).pipe((0,P.x)(()=>this.isLoading=!1)).subscribe({next:u=>{var x,y,E,c,Z,T,D;if(console.log(u),"OK"===u.status)this.isQuotation=!0,this.step=3,this.quotationNewJourneyData=u.data,"BOOKED"===this.bookingDetailReroutingData.status?this.paymentDetailBooked={newJourneyCharge:u.data.newJourney.charge.total+u.data.serviceFeeInfo.totalService,serviceFee:u.data.serviceFeeInfo.totalService,modifyCharge:u.data.modifyCharge.total,totalCharge:u.data.totalCharge.total+u.data.serviceFeeInfo.totalService}:this.paymentDetailIssued={newJourneyCharge:u.data.newJourney.charge.total||0,oldJourneyCharge:u.data.newJourney.charge.total-((null===(x=u.data.totalCharge)||void 0===x?void 0:x.total)-u.data.modifyCharge.total)+((null===(y=u.data.nonRefund)||void 0===y?void 0:y.total)||0),gapCharge:Math.max(0,(null===(E=u.data.totalCharge)||void 0===E?void 0:E.total)-u.data.modifyCharge.total),modifyCharge:u.data.modifyCharge.total||0,nonRefund:(null===(c=u.data.nonRefund)||void 0===c?void 0:c.total)||0,totalCharge:(null===(Z=u.data.totalCharge)||void 0===Z?void 0:Z.total)||0};else{const b=(null===(D=null===(T=u.objectError)||void 0===T?void 0:T.errorDescription)||void 0===D?void 0:D.vi)||"C\xf3 l\u1ed7i x\u1ea3y ra trong qu\xe1 tr\xecnh t\xednh gi\xe1 h\xe0nh tr\xecnh. Vui l\xf2ng th\u1eed l\u1ea1i.";this._modal.open(_.V0,{title:"T\xednh gi\xe1 h\xe0nh tr\xecnh th\u1ea5t b\u1ea1i",body:b,okText:"\u0110\xf3ng",hasCancel:!1,cancelText:""})}},error:()=>{this._modal.open(_.V0,{title:"T\xednh gi\xe1 h\xe0nh tr\xecnh th\u1ea5t b\u1ea1i",body:"C\xf3 l\u1ed7i x\u1ea3y ra trong qu\xe1 tr\xecnh t\xednh gi\xe1 h\xe0nh tr\xecnh. Vui l\xf2ng th\u1eed l\u1ea1i.",okText:"\u0110\xf3ng",hasCancel:!1,cancelText:""})}})}updateJourneyReservation(){var t,n,a,r,l,g,p,f,m,u,x,y;this.isLoading=!0;const E={bookingCode:(null===(t=this.bookingDetailReroutingData)||void 0===t?void 0:t.bookingCode)||"",confirmCharge:(null===(a=null===(n=this.quotationNewJourneyData)||void 0===n?void 0:n.totalCharge)||void 0===a?void 0:a.total)||0,confirmKey:(null===(r=this.quotationNewJourneyData)||void 0===r?void 0:r.confirmKey)||"",newJourney:{airline:this.listTicketSelected[0].airline||"",departDate:h(this.listTicketSelected[0].startTime).format("YYYY-MM-DDTHH:mm:ss"),startPoint:this.listTicketSelected[0].startCode||"",endPoint:this.listTicketSelected[0].endCode||"",fareOptionKey:this.listTicketSelected[0].fareOptionKey||"",journeyKey:this.listTicketSelected[0].journeyKey||"",segments:this.listTicketSelected[0].segments.map(c=>({airline:c.airline,fareClass:c.fareClass,departDate:h(c.departDate).format("YYYY-MM-DDTHH:mm:ss"),endPoint:c.endCode,flightNumber:c.flightNumber,startPoint:c.startCode}))},oldJourney:{airline:(null===(l=this.bookingDetailReroutingData)||void 0===l?void 0:l.airline)||"",departDate:h(null===(g=this.currentJourneySeleceted)||void 0===g?void 0:g.startTime).format("YYYY-MM-DDTHH:mm:ss"),startPoint:(null===(p=this.currentJourneySeleceted)||void 0===p?void 0:p.startPointCode)||"",endPoint:(null===(f=this.currentJourneySeleceted)||void 0===f?void 0:f.endPointCode)||"",fareOptionKey:"",journeyKey:(null===(m=this.currentJourneySeleceted)||void 0===m?void 0:m.journeyKey)||"",segments:(null===(u=this.currentJourneySeleceted)||void 0===u?void 0:u.segments.map(c=>({airline:c.airline,fareClass:c.fareClass,departDate:h(c.departDate).format("YYYY-MM-DDTHH:mm:ss"),endPoint:c.endPoint,flightNumber:c.flightNumber,startPoint:c.startPoint})))||[]},provider:(null===(x=this.bookingDetailReroutingData)||void 0===x?void 0:x.provider)||"",supplier:(null===(y=this.bookingDetailReroutingData)||void 0===y?void 0:y.supplier)||null};this._reroutingService.updateJourney(E).pipe((0,P.x)(()=>this.isLoading=!1)).subscribe({next:c=>{var Z,T,D,b;if(console.log(c),"OK"===c.status)this._toastService.add({severity:"success",summary:"Thay \u0111\u1ed5i h\xe0nh tr\xecnh th\xe0nh c\xf4ng",detail:"",sticky:!1}),this._router.navigate([`admin/booking-detail/${null===(Z=this.bookingDetailReroutingData)||void 0===Z?void 0:Z.airline}/${null===(T=this.bookingDetailReroutingData)||void 0===T?void 0:T.bookingCode}`],{state:{modifyType:k.Io.UPDATE_JOURNEY}});else{const Ae=(null===(b=null===(D=c.objectError)||void 0===D?void 0:D.errorDescription)||void 0===b?void 0:b.vi)||"C\xf3 l\u1ed7i x\u1ea3y ra trong qu\xe1 tr\xecnh \u0110\u1ed5i h\xe0nh tr\xecnh. Vui l\xf2ng th\u1eed l\u1ea1i.";this._modal.open(_.V0,{title:"Thay \u0111\u1ed5i h\xe0nh tr\xecnh th\u1ea5t b\u1ea1i",body:Ae,okText:"\u0110\xf3ng",hasCancel:!1,cancelText:""})}},error:()=>{this._modal.open(_.V0,{title:"Thay \u0111\u1ed5i h\xe0nh tr\xecnh th\u1ea5t b\u1ea1i",body:"C\xf3 l\u1ed7i x\u1ea3y ra trong qu\xe1 tr\xecnh \u0110\u1ed5i h\xe0nh tr\xecnh. Vui l\xf2ng th\u1eed l\u1ea1i.",okText:"\u0110\xf3ng",hasCancel:!1,cancelText:""})}})}showJourneyModify(t){var n,a,r,l,g;const p={oldJourney:{startPoint:null===(n=this.reroutingJourneySeleceted)||void 0===n?void 0:n.startPointCode,endPoint:null===(a=this.reroutingJourneySeleceted)||void 0===a?void 0:a.endPointCode,startTime:null!==(r=this.reroutingJourneySeleceted)&&void 0!==r&&r.startTime?h(null===(l=this.reroutingJourneySeleceted)||void 0===l?void 0:l.startTime).format("HH:mm DD/MM/YYYY"):"",redirectType:null===(g=this.reroutingJourneySeleceted)||void 0===g?void 0:g.redirectType,totalBaseFare:"BOOKED"===this.bookingDetailReroutingData.status?this.paymentDetailBooked.totalCharge-this.quotationNewJourneyData.modifyCharge.total:this.paymentDetailIssued.oldJourneyCharge,serviceFee:"BOOKED"===this.bookingDetailReroutingData.status?this.paymentDetailBooked.serviceFee:0,totalCharge:"BOOKED"===this.bookingDetailReroutingData.status?this.paymentDetailBooked.totalCharge-this.quotationNewJourneyData.modifyCharge.total+this.paymentDetailBooked.serviceFee:this.paymentDetailIssued.totalCharge,gapCharge:0},newJourney:{startPoint:this.flightInfo.startPoint,endPoint:this.flightInfo.endPoint,startTime:this.flightInfo.departureDate,redirectType:`${this.flightInfo.numOfStop+1} ch\u1eb7ng`,totalBaseFare:this.quotationNewJourneyData.newJourney.charge.total+this.quotationNewJourneyData.serviceFeeInfo.totalService,serviceFee:this.quotationNewJourneyData.serviceFeeInfo.totalService,totalCharge:this.quotationNewJourneyData.totalCharge.total,gapCharge:"BOOKED"===this.bookingDetailReroutingData.status?this.quotationNewJourneyData.modifyCharge.total||0:this.quotationNewJourneyData.totalCharge.total}};if(this._detectMobileService.isMobile()){const f=this._bottomSheetService.open(J.G,{headerTitle:"Chi ti\u1ebft h\xe0nh tr\xecnh m\u1edbi",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",containerFullHeigh:!0,data:{type:t,compareJourneyData:p,flightInfo:this.flightInfo,passengers:this.bookingDetailReroutingData.passengers}});f.containerInstance._rightButtonClick.subscribe(()=>{f.dismiss()})}else this._modal.open(J.G,{type:t,compareJourneyData:p,flightInfo:this.flightInfo,passengers:this.bookingDetailReroutingData.passengers})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.KNP),e.Y36(R.h),e.Y36(S.M),e.Y36(F._),e.Y36(I.oE),e.Y36(j.BX),e.Y36(Y.F0),e.Y36(B.L),e.Y36(U.a2))},i.\u0275cmp=e.Xpm({type:i,selectors:[["rerouting-page"]],hostAttrs:[1,"w-full","h-full"],standalone:!0,features:[e.jDz],decls:23,vars:15,consts:[[1,"flex","flex-col","gap-y-6","h-full"],[1,"w-full","h-full","flex","justify-center","py-8","px-6"],[1,"w-[970px]","flex","flex-col","justify-between","gap-y-6",3,"ngClass"],[1,"w-full","flex","gap-x-5"],[1,"w-1","h-full","bg-primary-2-4"],[1,"text-heading-md","text-black","flex","items-center","gap-x-2"],["icon","chevron_right","size","small"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","py-1.5 px-3 bg-functional-1-1 flex items-center gap-x-2",4,"ngIf"],["class","px-3 py-1.5 gap-x-2 bg-secondary-7-1 flex items-center",4,"ngIf"],[1,"w-full","flex-1"],[4,"ngIf"],["class","",4,"ngIf"],["class","w-full flex justify-between items-center",4,"ngIf"],["class","w-full flex justify-between items-center py-6",4,"ngIf"],[1,"py-1.5","px-3","bg-functional-1-1","flex","items-center","gap-x-2"],[1,"text-body-md-short"],[1,"px-3","py-1.5","gap-x-2","bg-secondary-7-1","flex","items-center"],["width","16","height","16","viewBox","0 0 16 16","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M1.15219 12.4042L6.82252 3.58351C6.93579 3.40736 7.10527 3.25996 7.31274 3.15714C7.5202 3.05433 7.75781 3 8 3C8.24218 3 8.47979 3.05433 8.68726 3.15714C8.89472 3.25996 9.06421 3.40736 9.17747 3.58351L14.8478 12.4042C14.9542 12.5706 15.0065 12.7569 14.9994 12.9449C14.9923 13.1329 14.9261 13.3162 14.8074 13.4769C14.6886 13.6376 14.5212 13.7703 14.3216 13.8619C14.122 13.9536 13.897 14.0012 13.6684 14H2.32903C2.10067 14.0008 1.87593 13.953 1.67669 13.8612C1.47744 13.7694 1.31046 13.6367 1.19199 13.476C1.07352 13.3154 1.00759 13.1322 1.00062 12.9444C0.993643 12.7566 1.04586 12.5705 1.15219 12.4042Z","fill","#FCB40A"],["fill-rule","evenodd","clip-rule","evenodd","d","M8.0001 5.34998C8.35908 5.34998 8.6501 5.64099 8.6501 5.99998V8.99998C8.6501 9.35896 8.35908 9.64998 8.0001 9.64998C7.64111 9.64998 7.3501 9.35896 7.3501 8.99998V5.99998C7.3501 5.64099 7.64111 5.34998 8.0001 5.34998Z","fill","#2C2C2C"],["d","M8.0502 12.0999C8.51964 12.0999 8.9002 11.7193 8.9002 11.2499C8.9002 10.7805 8.51964 10.3999 8.0502 10.3999C7.58075 10.3999 7.2002 10.7805 7.2002 11.2499C7.2002 11.7193 7.58075 12.0999 8.0502 12.0999Z","fill","#2C2C2C"],[1,"flex","flex-col","gap-y-6","md:hidden"],[4,"ngFor","ngForOf"],[1,"hidden","md:flex","flex-col","gap-y-6"],[1,"p-4","bg-neutral-white","flex","gap-x-12"],[1,"flex","flex-col","items-center"],[1,"w-[80px]","h-[40px]","object-contain",3,"src"],[1,"text-express-sm","whitespace-nowrap"],[1,"w-full","flex","gap-x-4"],[1,"flex-1","flex","flex-col","gap-y-2"],[1,"flex","items-center","gap-x-2"],["icon","location","size","small"],[1,"flex","items-center","gap-x-2.5","text-express-xl"],["icon","arrow_right","size","small"],["icon","calendar","size","small",1,"text-neutral-gray-4"],[1,"text-body-md-short","text-neutral-gray-4"],["icon","plane","size","small",1,"text-neutral-gray-4"],[1,"border-l","border-dashed","border-neutral-gray-3"],[1,"flex","items-stretch","gap-x-12"],[1,"flex","flex-col","gap-y-2"],[1,"text-body-md","text-neutral-black"],["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.00004 0.333313C5.6815 0.333313 4.39257 0.724306 3.29624 1.45685C2.19991 2.18939 1.34543 3.23058 0.840847 4.44876C0.336263 5.66693 0.20424 7.00738 0.461475 8.30058C0.71871 9.59379 1.35365 10.7817 2.286 11.714C3.21835 12.6464 4.40623 13.2813 5.69944 13.5385C6.99265 13.7958 8.33309 13.6638 9.55127 13.1592C10.7694 12.6546 11.8106 11.8001 12.5432 10.7038C13.2757 9.60745 13.6667 8.31852 13.6667 6.99998C13.6616 5.23345 12.9576 3.54073 11.7084 2.2916C10.4593 1.04247 8.76658 0.338443 7.00004 0.333313ZM5.88893 10.0078L3.27393 7.39276C3.05701 7.17583 3.05701 6.82413 3.27393 6.6072C3.49086 6.39028 3.84256 6.39028 4.05949 6.6072L5.88893 8.43665L9.9406 4.38498C10.1575 4.16805 10.5092 4.16805 10.7262 4.38498C10.9431 4.60191 10.9431 4.95361 10.7262 5.17054L5.88893 10.0078Z","fill","#07A35D"],[1,"text-express-md","text-neutral-gray-6"],["size","medium",3,"checked","value","checkChange"],[1,"p-4","bg-neutral-white","flex","flex-col","gap-y-2"],[1,"flex","justify-between","items-center"],[1,"w-full","border-t","border-t-neutral-gray-1"],[1,"flex","justify-between","items-start"],[1,"flex","gap-x-4","md:hidden","py-4","px-6","bg-neutral-white","border-b","border-neutral-gray-2"],[1,"flex","gap-x-2","items-center"],["icon","plane","size","small"],[1,"text-heading-xs"],[1,"px-3","py-1","bg-neutral-gray-1","rounded","flex","items-center","text-heading-sm"],[1,"md:text-express-md"],[3,"searchType","hiddenCharge","currentJourneySeleceted","reroutingJourneySeleceted","ticketSelected","valueChange"],[1,""],[1,"mb-4","flex","items-center","gap-x-2"],["icon","circle_information","size","small",1,"cf-icon-small"],[1,"text-heading-sm","text-neutral-black"],[1,"md:hidden","mb-6"],[1,"hidden","md:flex","flex-col","gap-y-6","mb-6"],["class","flex flex-col gap-y-6 md:hidden",4,"ngIf"],["class","hidden md:flex flex-col gap-y-6",4,"ngIf"],["class","w-full bg-[#F0EAF4] rounded flex items-center gap-x-2 py-1.5 px-3 my-3",4,"ngIf"],[1,"flex","justify-between","items-center","bg-neutral-white","border","border-neutral-gray-2","rounded","shadow-cf-journey-booking-success","relative"],[1,"absolute","-translate-x-[18%]","top-0","h-full","flex","flex-col","justify-between","py-3.5"],["class","w-1.5 h-3 border border-l-0 bg-neutral-gray-1 border-neutral-gray-2 rounded-r-full",4,"ngFor","ngForOf"],[1,"px-8","pt-6","pb-8","flex","flex-1","gap-x-10"],[1,"flex","flex-col","items-center","justify-center"],[1,"w-[120px]","h-[60px]","object-contain",3,"src"],[1,"flex","items-center","mt-1.5"],[1,"text-espressive-sm"],[1,"text-body-sm"],[1,"py-[2px]","px-2","bg-neutral-gray-1","rounded","text-espressive-sm","text-neutral-black","mt-2"],[1,"flex","justify-between","gap-x-3"],[1,"flex","items-center","gap-x-[20px]","mb-3"],[1,"text-heading-lg","text-neutral-black","flex","gap-x-2","items-center"],["icon","clock","size","small"],[1,"flex","items-center","w-[50px]","py-1","px-2.5"],[1,"w-1.5","h-1.5","bg-neutral-gray-2","rounded-full"],[1,"w-full","h-[1px]","bg-neutral-gray-2"],["icon","plane","size","small",1,"text-[#ccc]"],[1,"flex","items-center","gap-x-2","mb-2"],["icon","calendar","size","small"],[1,"text-neutral-black"],[1,"text-espressive-md"],[1,"text-body-md"],[1,"text-heading-lg","text-neutral-black","mb-3","flex","gap-x-2","items-center"],[1,"py-6","px-[18px]","border-l","border-dashed","border-neutral-gray-2","flex","flex-col","justify-between","gap-y-2"],["class","flex flex-nowrap items-center",4,"ngFor","ngForOf"],[1,"w-full","bg-[#F0EAF4]","rounded","flex","items-center","gap-x-2","py-1.5","px-3","my-3"],["icon","circle_information","size","small",1,"text-secondary-2-4"],[1,"w-1.5","h-3","border","border-l-0","bg-neutral-gray-1","border-neutral-gray-2","rounded-r-full"],[1,"flex","flex-nowrap","items-center"],[1,"text-espressive-sm","text-neutral-black"],["class","w-full bg-[#F0EAF4] rounded flex items-center gap-x-2 py-1.5 px-3",4,"ngIf"],[1,"flex","flex-col","p-3","bg-neutral-white","rounded-lg"],[1,"flex","items-center","justify-between"],[1,"w-9","h-9","object-contain",3,"src"],[1,"flex","flex-col","gap-y-1"],[1,"text-heading-xs","text-neutral-gray-6"],[1,"text-espressive-xs","text-neutral-gray-4"],[1,"flex","mt-2","gap-x-4"],[1,"flex","flex-col","gap-y-4"],[1,"flex","flex-col","items-center","gap-y-1"],[1,"flex","flex-col","items-center","justify-between","py-3"],[1,"w-1","h-1","rounded-full","bg-neutral-gray-3"],[1,"border-r","border-r-neutral-gray-3","h-full"],["icon","plane","size","small",1,"text-neutral-gray-3"],["class","text-espressive-md",4,"ngIf"],[1,"w-full","border-b","border-b-neutral-gray-3","my-4","border-dashed"],[1,"w-full","bg-[#F0EAF4]","rounded","flex","items-center","gap-x-2","py-1.5","px-3"],[1,"text-espressive-sm","text-neutral-black","font-semibold"],["class","py-6 flex flex-col gap-y-4 bg-neutral-white",4,"ngIf"],[1,"bg-neutral-white","py-6","flex","flex-col","gap-y-4"],[1,"px-6","text-heading-sm","flex","gap-x-2","items-center"],["icon","money","size","small",1,"md:hidden"],["class","text-neutral-gray-4",4,"ngIf"],["class","px-6 flex flex-col gap-y-3",4,"ngIf"],[1,"px-6"],[1,"w-full","py-1.5","px-3","bg-functional-1-1","rounded","flex","items-center","gap-x-3"],["icon","info","size","small",1,"text-functional-1-3"],[1,"py-6","flex","flex-col","gap-y-4","bg-neutral-white"],[1,"px-6","gap-x-2","flex","justify-between"],[1,"flex","items-center","gap-x-2","text-heading-sm"],["icon","money","size","small"],[1,"px-3"],[1,"table-auto","w-full"],[1,"border-b","border-neutral-gray-1"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","py-3"],[1,"text-right","text-espressive-sm","text-neutral-gray-4","py-3"],[1,"flex","justify-end","gap-x-4","items-center"],[1,"text-espressive-sm","text-neutral-gray-4"],[1,"min-w-[120px]","text-body-md-short","text-neutral-gray-6","text-right"],[1,"min-w-[120px]","text-heading-md","text-neutral-black","text-right"],[1,"text-body-md","text-neutral-black","py-3"],[1,"text-right","text-body-md","text-neutral-black","py-3"],[1,"text-neutral-gray-4"],[1,"px-6","flex","flex-col","gap-y-3"],[1,"flex","gap-x-2","items-center","text-body-md"],["icon","circle_information","size","small"],[1,"text-espressive-md-short"],[1,"flex","gap-x-2","items-center","text-express-md"],[1,"text-heading-lg","text-primary-1-4"],[1,"text-espressive-md-short","text-functional-2-3"],[1,"text-heading-sm"],["class","px-3 flex flex-col gap-y-4",4,"ngIf"],[1,"px-3","flex","flex-col","gap-y-4"],["class","flex flex-col gap-y-1",4,"ngFor","ngForOf"],[1,"border-t","border-t-neutral-gray-3","py-2"],[1,"w-full","flex","justify-between","gap-x-4","items-center"],[1,"text-body-sm","text-neutral-gray-4"],[1,"min-w-[120px]","text-express-md","text-right","text-neutral-gray-6"],[1,"text-body-md-short","text-neutral-gray-6"],[1,"flex","flex-col","gap-y-3"],[1,"flex","justify-between","items-center","text-heading-xs"],[1,"flex","justify-between","items-center","text-body-sm","text-neutral-gray-4"],[1,"w-full","flex","justify-between","items-center"],["cf-button","","type","border",1,"min-w-[100px]","justify-center","bg-neutral-white",3,"click"],["icon","close","size","small",1,"mr-2.5","md:hidden"],[1,"flex","gap-x-4"],["class","min-w-[100px] justify-center","cf-button","",3,"click",4,"ngIf"],["cf-button","",1,"min-w-[100px]","justify-center",3,"click"],["icon","chevron_right","size","small",1,"ml-2.5","md:hidden"],[1,"w-full","flex","justify-between","items-center","py-6"],["cf-button","","type","secondary",1,"min-w-[100px]","justify-center","bg-neutral-white",3,"click"],["icon","arrow_left","size","small",1,"mr-2.5","md:hidden"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"div",4),e.TgZ(5,"div",5)(6,"div"),e._uU(7,"\u0110\u1ed5i h\xe0nh tr\xecnh"),e.qZA(),e._UZ(8,"cf-icon",6),e.TgZ(9,"div",7),e.YNc(10,O,2,0,"p",8),e.YNc(11,M,2,0,"p",8),e.YNc(12,L,2,0,"p",9),e.qZA()()(),e.YNc(13,H,6,0,"div",10),e.YNc(14,Q,11,0,"div",11),e.TgZ(15,"div",12),e.YNc(16,V,5,4,"div",13),e.YNc(17,z,14,11,"div",13),e.YNc(18,me,13,7,"div",14),e.qZA(),e.YNc(19,ye,7,1,"div",15),e.YNc(20,Ze,9,0,"div",16),e.YNc(21,De,10,1,"div",16),e.qZA()()(),e.YNc(22,Ce,1,0,"cf-spinner",13)),2&t&&(e.xp6(2),e.Q6J("ngClass",e.VKq(13,Ee,2===n.step)),e.xp6(7),e.Q6J("ngSwitch",n.step),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(2),e.Q6J("ngIf",1===n.step),e.xp6(1),e.Q6J("ngIf",3===n.step),e.xp6(2),e.Q6J("ngIf",1===n.step),e.xp6(1),e.Q6J("ngIf",2===n.step),e.xp6(1),e.Q6J("ngIf",3===n.step),e.xp6(1),e.Q6J("ngIf",1===n.step),e.xp6(1),e.Q6J("ngIf",2===n.step),e.xp6(1),e.Q6J("ngIf",3===n.step),e.xp6(1),e.Q6J("ngIf",n.isLoading))},dependencies:[v.ez,v.mk,v.sg,v.O5,v.RF,v.n9,v.ED,v.JJ,v.uU,s.AxE,s.Sm8,N.o,q.N8,q.Xq,U.DW,_.OR,w.r],encapsulation:2}),i})()}}]);